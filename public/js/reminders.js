(window.webpackJsonp=window.webpackJsonp||[]).push([[27,1],{"1MU1":function(e,t,r){"use strict";var n={name:"ModalBody"},s=r("KHd+"),a=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"modal-body"},[this._t("default")],2)}),[],!1,null,"21f39381",null);t.a=a.exports},"2+zd":function(e,t,r){(t=e.exports=r("I1BE")(!1)).i(r("hMIB"),""),t.i(r("Q3Jf"),""),t.i(r("YB49"),""),t.push([e.i,"",""])},"5Rol":function(e,t,r){"use strict";var n=r("mKMH");r.n(n).a},EGv3:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",(function(){return s}));var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={},void 0!==t&&this.set(t)}var t,r,s;return t=e,(r=[{key:"get",value:function(e){if(this.errors[e])return"string"==typeof this.errors[e]?this.errors[e]:this.errors[e][0]}},{key:"first",value:function(e){return this.get(e)}},{key:"set",value:function(e){this.errors=e.errors}},{key:"clear",value:function(e){this.errors[e]&&delete this.errors[e]}},{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"clearAll",value:function(){this.errors={}}},{key:"toArray",value:function(){var e=this,t=[];return Object.keys(this.errors).forEach((function(r){e.errors[r].forEach((function(e){return t.push(e)}))})),t}}])&&n(t.prototype,r),s&&n(t,s),e}()},Igho:function(e,t,r){var n=r("gcIj");"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,s);n.locals&&(e.exports=n.locals)},J17W:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,"\n.max-vh[data-v-65ec0403] {\n    max-height: 93vh;\n}\n.bg-transparent-dark[data-v-65ec0403] {\n    background-color: rgba(0, 0, 0, .7);\n}\n",""])},JUFj:function(e,t,r){"use strict";var n={name:"ModalCard"},s=r("KHd+"),a=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"modal-content shadow-lg border-0"},[this._t("default")],2)}),[],!1,null,"bf90aa66",null);t.a=a.exports},KBkZ:function(e,t,r){"use strict";var n=r("Igho");r.n(n).a},MEn4:function(e,t,r){"use strict";var n={name:"Required"},s=r("KHd+"),a=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("sup",{staticClass:"text-danger"},[this._v("*")])}),[],!1,null,"53582911",null);t.a=a.exports},RnhZ:function(e,t,r){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function s(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="RnhZ"},SCm9:function(e,t,r){var n=r("2+zd");"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,s);n.locals&&(e.exports=n.locals)},gcIj:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,"\n.close[data-v-7a28cdfc] {\n    right: 20px;\n    top: 50%;\n    margin-top: -25px;\n}\n",""])},iOyG:function(e,t,r){"use strict";var n=r("SCm9");r.n(n).a},ke3Z:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("EGv3");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors=new n.a,this.originalData=t,this._multipart=!1,this.fileFields=[],this.onProgressCallback=function(e){},t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t,r,s;return t=e,(r=[{key:"multipart",value:function(e){this._multipart=void 0===e||e}},{key:"keydown",value:function(e){var t=e.target.name;void 0!==t&&void 0!==this[t]&&this.errors.clear(t)}},{key:"onProgressChange",value:function(e){if("function"!=typeof e)throw new n.a("The function onProgressChange only accepts a function as a parameters");this.onProgressCallback=e}},{key:"data",value:function(e){var t={};for(var r in this.originalData)this.originalData.hasOwnProperty(r)&&(t[r]=this[r]);if(e)for(var n in e)this.originalData.hasOwnProperty(n)&&(t[n]=e[n]);if(this._multipart){var s=new FormData;for(var a in t)t.hasOwnProperty(a)&&(this.isFileField(a)&&FileList&&t[a]instanceof FileList?s.append(a,null===t[a][0]?"":t[a][0]):s.append(a,null===t[a]?"":t[a]));return s}return t}},{key:"isFileField",value:function(e){return this.fileFields.indexOf(e)>-1}},{key:"reset",value:function(){for(var e in this.originalData)this.originalData.hasOwnProperty(e)&&(this[e]=this.originalData[e]);this.errors.clearAll()}},{key:"post",value:function(e,t){return this.submit("post",e,t)}},{key:"put",value:function(e,t){return this.submit("put",e,t)}},{key:"get",value:function(e,t){return this.submit("get",e,t)}},{key:"delete",value:function(e,t){return this.submit("delete",e,t)}},{key:"patch",value:function(e,t){return this.submit("patch",e,t)}},{key:"headers",value:function(){var e={};return this._multipart&&(e["Content-Type"]="multipart/form-data"),e}},{key:"setAsFile",value:function(e){this.isFileField(e)||(this.multipart(!0),this.fileFields.push(e))}},{key:"setAsNotFile",value:function(e){this.fileFields=this.fileFields.filter((function(t){return t!==e})),0===this.fileFields.length&&this.multipart(!1)}},{key:"config",value:function(){return{onUploadProgress:this.onProgressCallback}}},{key:"submit",value:function(e,t,r){var n=this;if(0===t.length)throw new Error("Please provide a valid URL");if(this._multipart&&"post"!==e)throw new Error("Form is set to be multipart but request method is ".concat(e,". Method should be changed to post."));var s=this.headers(),i=this.config();return new Promise((function(o,l){axios[e](t,n.data(r),a(a({},i),{},{headers:s})).then((function(e){o(e)})).catch((function(e){n.onFail(e),l(e)}))}))}},{key:"onFail",value:function(e){e.response&&422===e.response.status&&this.errors.set(e.response.data)}},{key:"setDefault",value:function(e){for(var t in this.originalData){if(!this.originalData.hasOwnProperty(t))return;null!==e[t]?"undefined"!==e[t]&&(this[t]=e[t]):this[t]=null!==this.originalData[t]?this.originalData[t]:null}}}])&&o(t.prototype,r),s&&o(t,s),e}()},klO2:function(e,t,r){"use strict";var n={name:"Modal",props:{large:{type:Boolean,required:!1,default:!1},medium:{type:Boolean,required:!1,default:!1}},data:function(){return{mounted:!1}}},s=(r("5Rol"),r("KHd+")),a=Object(s.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[r("div",{staticClass:"modal show vh-100 d-block",attrs:{tabindex:"-1",role:"dialog"}},[r("button",{staticClass:"modal-backdrop border-0 bg-transparent-dark cursor-default",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}}),e._v(" "),r("div",{ref:"modal",staticClass:"modal-dialog",class:{"modal-lg":e.large,"modal-md":e.medium},staticStyle:{"z-index":"1060"},attrs:{role:"document"}},[e._t("default")],2)])])}),[],!1,null,"65ec0403",null);t.a=a.exports},mKMH:function(e,t,r){var n=r("J17W");"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,s);n.locals&&(e.exports=n.locals)},"mS+z":function(e,t,r){"use strict";var n={name:"ModalFooter"},s=r("KHd+"),a=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"modal-footer justify-content-start border-top-0 bg-light"},[this._t("default")],2)}),[],!1,null,"2efdf4a2",null);t.a=a.exports},pPER:function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),s=r.n(n),a=r("cv7c"),i=r("klO2"),o=r("JUFj"),l=r("wXy6"),c=r("vQtE"),u=r("1MU1"),d=r("mS+z"),m=r("yoRh"),f=r("ke3Z"),v=r("TTxJ");function h(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,s)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){h(a,n,s,i,o,"next",e)}function o(e){h(a,n,s,i,o,"throw",e)}i(void 0)}))}}var j={name:"ReminderForm",components:{Required:r("MEn4").a,InlineSpinner:v.a,Close:m.a,ModalFooter:d.a,ModalBody:u.a,ModalTitle:c.a,ModalHeader:l.a,ModalCard:o.a,Modal:i.a},props:{reminder:{required:!1}},data:function(){return{loading:!1,form:new f.a({days:"",site_id:""}),sites:[]}},mounted:function(){this.reminder&&this.form.setDefault(this.reminder),this.loadSites()},methods:{loadSites:function(){var e=this;return p(s.a.mark((function t(){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,axios.get("/web/sites",{params:{limit:1e3}});case 4:r=t.sent,n=r.data,e.sites=n.data,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},save:function(){this.reminder?this.update():this.create()},create:function(){var e=this;return p(s.a.mark((function t(){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.form.post("/web/reminders");case 4:r=t.sent,n=r.data,e.$notify({type:"success",text:"Reminder created successfully."}),e.$emit("create",n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),t.t0.response&&422===t.t0.response.status||(e.$alert("Unable to create reminder. Please try refreshing the page."),console.error(t.t0));case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},update:function(){var e=this;return p(s.a.mark((function t(){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.form.put("/web/reminders/".concat(e.reminder.id));case 4:r=t.sent,n=r.data,e.$notify({type:"success",text:"Reminder update successfully."}),e.$emit("update",n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),t.t0.response&&422===t.t0.response.status||(e.$alert("Unable to update reminder. Please try refreshing the page."),console.error(t.t0));case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()}}},y=r("KHd+"),b=Object(y.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("modal",{on:{close:function(t){return e.$emit("close")}}},[r("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.save(t)},keydown:function(t){return e.form.errors.clear(t.target.name)}}},[r("modal-card",[r("modal-header",[e.reminder?e._e():r("modal-title",[e._v("Create a Reminder")]),e._v(" "),e.reminder?r("modal-title",[e._v("Update Reminder")]):e._e(),e._v(" "),r("close",{on:{click:function(t){return e.$emit("close")}}})],1),e._v(" "),r("modal-body",[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"days"}},[e._v("Specify how many days must pass after a measurement has been recorded.")]),e._v(" "),r("div",{staticClass:"d-flex align-items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.days,expression:"form.days"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("days")},staticStyle:{width:"80px"},attrs:{name:"days",id:"days",placeholder:"Days",title:"Number of days",autofocus:""},domProps:{value:e.form.days},on:{input:function(t){t.target.composing||e.$set(e.form,"days",t.target.value)}}}),e._v(" "),r("span",{staticClass:"ml-1"},[e._v("days after last measurement.")])]),e._v(" "),e.form.errors.has("days")?r("small",{staticClass:"form-text text-danger"},[e._v("\n                        "+e._s(e.form.errors.first("days"))+"\n                    ")]):e._e()]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"site"}},[e._v("\n                        Site\n                        "),r("required")],1),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.form.site_id,expression:"form.site_id"}],staticClass:"custom-select",attrs:{name:"site",id:"site"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"site_id",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[e._v("Select a Site")]),e._v(" "),e._l(e.sites,(function(t){return r("option",{domProps:{value:t.id}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])}))],2)]),e._v(" "),r("div",[r("small",[r("strong",[e._v("Note")]),e._v(" that you will receive no more than 3 emails a week for each reminder.")])])]),e._v(" "),r("modal-footer",{staticClass:"d-flex"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.loading}},[e.loading?r("inline-spinner"):e._e(),e._v(" "),r("span",[e._v("Save")])],1),e._v(" "),r("button",{staticClass:"btn btn-light ml-auto",attrs:{disabled:e.loading},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[e._v("\n                    Cancel\n                ")])])],1)],1)])}),[],!1,null,"bbe66a06",null).exports,g=r("tzoz"),_=r("wd/R"),k=r.n(_);function w(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,s)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){w(a,n,s,i,o,"next",e)}function o(e){w(a,n,s,i,o,"throw",e)}i(void 0)}))}}var C={name:"Reminders",components:{RemindersCalendar:g.a,ReminderForm:b,Icon:a.a},data:function(){return{moment:k.a,reminders:[],showForm:!1,reminder:null,loading:!0}},mounted:function(){this.loadReminders()},methods:{loadReminders:function(){var e=this;return x(s.a.mark((function t(){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,axios.get("/web/reminders");case 4:r=t.sent,n=r.data,e.reminders=n,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.$alert("Unable to load reminders. Please try refreshing the page.");case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})))()},created:function(e){this.reminders.push(e),this.closeForm()},updated:function(e){this.reminders=this.reminders.map((function(t){return t.id===e.id?e:t})),this.closeForm()},closeForm:function(){this.showForm=!1,this.reminder=null},edit:function(e){this.reminder=e,this.showForm=!0},destroy:function(e){var t,r=this;this.$confirm({title:"Delete Reminder?",text:'"'.concat(e.days,' days after last measurement." will be permanently removed.'),onConfirm:(t=x(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.delete("/web/reminders/".concat(e.id));case 3:r.reminders=r.reminders.filter((function(t){return t.id!==e.id})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),r.$alert("Unable to delete reminder. Please try refreshing the page.");case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),function(){return t.apply(this,arguments)})})}}},O=Object(y.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"d-flex card-header align-items-center"},[e._m(1),e._v(" "),r("div",{staticClass:"flex-shrink-0"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.showForm=!0}}},[r("icon",{attrs:{name:"add"}}),e._v(" "),r("span",[e._v("New Reminder")])],1)])]),e._v(" "),r("div",{staticClass:"card-body p-0 table-responsive"},[e.loading||0!==e.reminders.length?e._e():r("div",{staticClass:"p-3 d-flex align-items-center justify-content-center flex-column text-center"},[r("div",{staticClass:"d-flex align-items-center justify-content-center icon-circle"},[r("icon",{attrs:{name:"notifications"}})],1),e._v(" "),r("div",{staticClass:"mt-3 mb-3  mx-auto max-w-700"},[e._m(2),e._v(" "),r("p",{staticClass:"text-muted"},[e._v("\n                        Here you will be able to setup reminders to help you plan\n                        your next measurement trips. Reminders will be emailed to\n                        you depending on the settings you select for each reminder.\n                    ")]),e._v(" "),r("p",{staticClass:"text-muted"},[e._v("\n                        Get started by creating a new reminder using the button below.\n                    ")]),e._v(" "),r("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.showForm=!0}}},[r("icon",{attrs:{name:"add"}}),e._v(" "),r("span",[e._v("New Reminder")])],1)])]),e._v(" "),!e.loading&&e.reminders.length>0?r("table",{staticClass:"table mb-0 table-middle table-nowrap table-hover"},[e._m(3),e._v(" "),r("tbody",e._l(e.reminders,(function(t){return r("tr",[r("td",[r("router-link",{attrs:{to:"/app/sites/"+t.site.id}},[r("strong",[e._v(e._s(t.site.name))])]),e._v(" "),r("div",[r("strong",[e._v(e._s(t.days)+" days")]),e._v(" "),r("span",{staticClass:"text-muted"},[e._v("after last measurement")])])],1),e._v(" "),r("td",[t.site.last_measured_at?r("span",[e._v(e._s(e.moment(t.site.last_measured_at).format("MMM Do, YYYY")))]):e._e()]),e._v(" "),r("td",[r("div",{staticClass:"d-flex justify-content-end"},[r("button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Edit Reminder",expression:"'Edit Reminder'",modifiers:{left:!0}}],staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),e.edit(t)}}},[r("icon",{attrs:{name:"create"}})],1),e._v(" "),r("button",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:"Delete Reminder",expression:"'Delete Reminder'",modifiers:{right:!0}}],staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),e.destroy(t)}}},[r("icon",{attrs:{name:"trash"}})],1)])])])})),0)]):e._e()])]),e._v(" "),e.showForm?r("reminder-form",{attrs:{reminder:e.reminder},on:{close:e.closeForm,create:e.created,update:e.updated}}):e._e()],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex mb-3"},[t("div",{staticClass:"flex-grow-1"},[t("h1",{staticClass:"page-title"},[this._v("My Reminders")]),this._v(" "),t("p",{staticClass:"mb-0 text-muted"},[this._v("Schedule & manage reminders")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex-grow-1"},[t("strong",[this._v("Reminders")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Welcome to Reminders")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Reminder")]),this._v(" "),t("th",[this._v("Last Measured At")]),this._v(" "),t("th")])])}],!1,null,"0445abf7",null);t.default=O.exports},tzoz:function(e,t,r){"use strict";var n=r("3Am6"),s=r("iOEq"),a=r("+Izv"),i=r("Gbwi"),o={name:"Calendar",components:{FullCalendar:n.a},props:{events:{required:!0}},data:function(){return{calendarPlugins:[s.a,a.a,i.a]}}},l=(r("iOyG"),r("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("full-calendar",{attrs:{defaultView:"dayGridMonth",plugins:e.calendarPlugins,"event-sources":e.events,header:{center:"title",left:"listWeek,dayGridMonth",right:"prev,next today"}},on:{dateClick:function(t){return e.$emit("dateClick",t)},eventClick:function(t){return e.$emit("eventClick",t)}}})],1)}),[],!1,null,"6a3e857a",null);t.a=c.exports},vQtE:function(e,t,r){"use strict";var n={name:"ModalTitle"},s=r("KHd+"),a=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("h3",{staticClass:"modal-title m-0"},[this._t("default")],2)}),[],!1,null,"1e97cd5f",null);t.a=a.exports},wXy6:function(e,t,r){"use strict";var n={name:"ModalHeader"},s=r("KHd+"),a=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"modal-header position-relative"},[this._t("default")],2)}),[],!1,null,"2075d2dc",null);t.a=a.exports},yoRh:function(e,t,r){"use strict";var n={name:"Close",components:{Icon:r("cv7c").a}},s=(r("KBkZ"),r("KHd+")),a=Object(s.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"btn btn-close btn-sm ml-auto text-muted position-absolute close",attrs:{type:"button"},on:{click:function(t){return e.$emit("click",t)}}},[r("icon",{attrs:{name:"close"}})],1)}),[],!1,null,"7a28cdfc",null);t.a=a.exports}}]);
//# sourceMappingURL=reminders.js.map?id=edcc3354652f6fbc54f9