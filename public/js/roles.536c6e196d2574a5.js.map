{"version":3,"file":"js/roles.536c6e196d2574a5.js","mappings":"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","sources":["webpack:///resources/js/screens/Roles.vue","webpack:///./resources/js/screens/Roles.vue?c519","webpack:///./resources/js/screens/Roles.vue?aef4","webpack:///./resources/js/screens/Roles.vue"],"sourcesContent":["<template>\n    <div>\n        <div class=\"mb-3\">\n            <h1 class=\"page-title\">Roles & Permissions</h1>\n            <p class=\"mb-0 text-muted\">Manage permissions for each role.</p>\n        </div>\n\n        <div class=\"d-flex align-items-center justify-content-center\" v-if=\"loading\">\n            <inline-spinner class=\"text-primary\"/>\n        </div>\n\n        <div class=\"card\" v-if=\"!loading && roles.length > 0\">\n            <div class=\"card-body table-responsive overflow-hidden p-0\">\n                <table class=\"table table-hover table-middle mb-0\">\n                    <thead>\n                    <tr>\n                        <th class=\"w-100 border-top-0\">Permission</th>\n                        <th class=\"border-top-0\" style=\"width: 0\" v-for=\"role in roles\">\n                            {{ role.name }}\n                        </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for=\"permission in permissions\">\n                        <td>\n                            <p class=\"mb-0\"><strong>{{ permission.title }}</strong></p>\n                            <p class=\"mb-0 text-muted\">\n                                {{ permission.description }}\n                            </p>\n                        </td>\n                        <td class=\"text-center\" v-for=\"role in roles\">\n                            <input type=\"checkbox\"\n                                   :checked=\"matrix[role.id][permission.id]\"\n                                   :disabled=\"role.name === 'Admin' || toggling\"\n                                   @change.prevent=\"toggle(permission, role)\"\n                                   :title=\"role.name === 'Admin' ? 'Admin role can\\'t be changed' : null\">\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n  import InlineSpinner from '../components/InlineSpinner'\n\n  export default {\n    name: 'Roles',\n\n    components: {InlineSpinner},\n\n    data() {\n      return {\n        loading    : true,\n        toggling   : false,\n        roles      : [],\n        permissions: [],\n        matrix     : {},\n      }\n    },\n\n    mounted() {\n      this.loadData()\n    },\n\n    methods: {\n      async loadData() {\n        this.loading = true\n        try {\n          const {data}     = await axios.get('/web/permissions')\n          this.roles       = data.roles\n          this.permissions = data.permissions\n          this.matrix      = data.matrix\n        } catch (e) {\n          this.$alert('Unable to load page. Please try refreshing the page.')\n        }\n        this.loading = false\n      },\n\n      async toggle(permission, role) {\n        if (role.name === 'Admin') {\n          return\n        }\n\n        this.toggling = true\n        try {\n          const {data} = await axios.patch(`/web/permissions/${permission.id}/roles/${role.id}`)\n\n          // Update the matrix to reflect the new change\n          this.matrix[role.id][permission.id] = data.attached\n\n          this.$notify({\n            type: 'success',\n            text: 'Role updated successfully',\n          })\n        } catch (e) {\n          this.$notify({\n            text: 'Unable to update role. Please try refreshing the page.',\n            type: 'error',\n          })\n          console.error(e)\n        }\n        this.toggling = false\n      },\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=17a9d2f7&scoped=true&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17a9d2f7\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_vm._m(0),_vm._v(\" \"),(_vm.loading)?_c('div',{staticClass:\"d-flex align-items-center justify-content-center\"},[_c('inline-spinner',{staticClass:\"text-primary\"})],1):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.roles.length > 0)?_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body table-responsive overflow-hidden p-0\"},[_c('table',{staticClass:\"table table-hover table-middle mb-0\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"w-100 border-top-0\"},[_vm._v(\"Permission\")]),_vm._v(\" \"),_vm._l((_vm.roles),function(role){return _c('th',{staticClass:\"border-top-0\",staticStyle:{\"width\":\"0\"}},[_vm._v(\"\\n                        \"+_vm._s(role.name)+\"\\n                    \")])})],2)]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.permissions),function(permission){return _c('tr',[_c('td',[_c('p',{staticClass:\"mb-0\"},[_c('strong',[_vm._v(_vm._s(permission.title))])]),_vm._v(\" \"),_c('p',{staticClass:\"mb-0 text-muted\"},[_vm._v(\"\\n                            \"+_vm._s(permission.description)+\"\\n                        \")])]),_vm._v(\" \"),_vm._l((_vm.roles),function(role){return _c('td',{staticClass:\"text-center\"},[_c('input',{attrs:{\"type\":\"checkbox\",\"disabled\":role.name === 'Admin' || _vm.toggling,\"title\":role.name === 'Admin' ? 'Admin role can\\'t be changed' : null},domProps:{\"checked\":_vm.matrix[role.id][permission.id]},on:{\"change\":function($event){$event.preventDefault();return _vm.toggle(permission, role)}}})])})],2)}),0)])])]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mb-3\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"Roles & Permissions\")]),_vm._v(\" \"),_c('p',{staticClass:\"mb-0 text-muted\"},[_vm._v(\"Manage permissions for each role.\")])])\n}]\n\nexport { render, staticRenderFns }"],"names":["name","components","InlineSpinner","data","loading","toggling","roles","permissions","matrix","mounted","methods","loadData","axios","toggle","permission","role","type","text","console","_vm","this","_c","_self","_m","_v","staticClass","_e","length","_l","staticStyle","_s","title","description","attrs","domProps","id","on","$event","preventDefault"],"sourceRoot":""}