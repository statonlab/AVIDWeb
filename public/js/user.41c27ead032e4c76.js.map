{"version":3,"file":"js/user.41c27ead032e4c76.js","mappings":"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","sources":["webpack:///resources/js/components/Pager.vue","webpack:///./resources/js/components/Pager.vue?b55f","webpack:///./resources/js/components/Pager.vue","webpack:///./resources/js/components/Pager.vue?b6d8","webpack:///./resources/js/screens/User.vue?e816","webpack:///resources/js/screens/User.vue","webpack:///./resources/js/screens/User.vue?0403","webpack:///./resources/js/screens/User.vue"],"sourcesContent":["<template>\n  <nav aria-label=\"Page navigation\" v-if=\"hideIfEmpty ? lastPage > 1 : true\" class=\"d-flex w-100 justify-content-between align-items-center\">\n    <button class=\"btn btn-white\"\n            :disabled=\"page === 1\"\n            @click.prevent=\"previous()\"\n            type=\"button\">\n      Previous\n    </button>\n\n    <div>\n      <select class=\"custom-select w-auto\" v-model=\"currentPage\">\n        <option v-for=\"i in lastPage\" :value=\"i\">\n          Page {{ i }}\n        </option>\n      </select>\n    </div>\n\n    <button class=\"btn btn-white\"\n            :disabled=\"page === lastPage\"\n            @click.prevent=\"next()\"\n            type=\"button\">\n      Next\n    </button>\n  </nav>\n</template>\n\n<script>\nexport default {\n  name: 'Pager',\n\n  props: {\n    lastPage: {required: true, type: Number},\n    page    : {required: true, type: Number},\n    hideIfEmpty: {required: false, type: Boolean, default: true}\n  },\n\n  data() {\n    return {\n      currentPage: 1,\n    }\n  },\n\n  mounted() {\n    this.currentPage = this.page\n  },\n\n  watch: {\n    page(page) {\n      this.currentPage = page\n    },\n\n    currentPage(page) {\n      this.change(page)\n    },\n  },\n\n  methods: {\n    previous() {\n      if (this.page === 1) {\n        return\n      }\n\n      this.$emit('change', this.page - 1)\n    },\n\n    next() {\n      if (this.lastPage === this.page) {\n        return\n      }\n\n      this.$emit('change', this.page + 1)\n    },\n\n    change(page) {\n      if (this.page === page) {\n        return\n      }\n\n      this.$emit('change', page)\n    },\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pager.vue?vue&type=template&id=645860e9&scoped=true&\"\nimport script from \"./Pager.vue?vue&type=script&lang=js&\"\nexport * from \"./Pager.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"645860e9\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hideIfEmpty ? _vm.lastPage > 1 : true)?_c('nav',{staticClass:\"d-flex w-100 justify-content-between align-items-center\",attrs:{\"aria-label\":\"Page navigation\"}},[_c('button',{staticClass:\"btn btn-white\",attrs:{\"disabled\":_vm.page === 1,\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.previous()}}},[_vm._v(\"\\n    Previous\\n  \")]),_vm._v(\" \"),_c('div',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentPage),expression:\"currentPage\"}],staticClass:\"custom-select w-auto\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.currentPage=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.lastPage),function(i){return _c('option',{domProps:{\"value\":i}},[_vm._v(\"\\n        Page \"+_vm._s(i)+\"\\n      \")])}),0)]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-white\",attrs:{\"disabled\":_vm.page === _vm.lastPage,\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.next()}}},[_vm._v(\"\\n    Next\\n  \")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.loading)?_c('inline-spinner'):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.user)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xl-4 col-md-5\"},[_c('div',{staticClass:\"card mb-4\"},[_c('div',{staticClass:\"card-body d-flex align-items-center\"},[_c('avatar',{staticClass:\"flex-shrink-0\",attrs:{\"user\":_vm.user,\"tooltip\":false}}),_vm._v(\" \"),_c('div',{staticClass:\"ml-3\"},[_c('strong',[_vm._v(_vm._s(_vm.user.name))]),_vm._v(\" \"),_c('p',{staticClass:\"mb-0 text-muted\"},[_vm._v(_vm._s((\"Member since \" + (_vm.user.member_since))))]),_vm._v(\" \"),_c('a',{attrs:{\"href\":(\"mailto:\" + (_vm.user.email))}},[_vm._v(\"\\n                            \"+_vm._s(_vm.user.email)+\"\\n                        \")])])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"card mb-3\"},[_c('div',{staticClass:\"card-body rounded\"},[_c('p',{staticClass:\"font-weight-bold text-dark text-sm mb-1\"},[_vm._v(\"Roles\")]),_vm._v(\" \"),_vm._l((_vm.roles),function(role,index){return _c('div',{staticClass:\"d-flex align-items-center\"},[_c('div',{staticClass:\"custom-control custom-radio\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userRole),expression:\"userRole\"}],staticClass:\"custom-control-input\",attrs:{\"type\":\"radio\",\"id\":(\"role-\" + index),\"name\":\"role-select\"},domProps:{\"value\":(\"\" + (role.id)),\"checked\":_vm._q(_vm.userRole,(\"\" + (role.id)))},on:{\"change\":[function($event){_vm.userRole=\"\" + (role.id)},_vm.setRole]}}),_vm._v(\" \"),_c('label',{staticClass:\"custom-control-label\",attrs:{\"for\":(\"role-\" + index)}},[_vm._v(\"\\n                                \"+_vm._s(role.name)+\"\\n                            \")])])])})],2)])]),_vm._v(\" \"),_c('div',{staticClass:\"col-xl-8 col-md-7\"},[_c('div',{staticClass:\"d-flex\"},[_c('h1',{staticClass:\"page-title mb-3\"},[_vm._v(\"Sites\")]),_vm._v(\" \"),_c('div',{staticClass:\"ml-auto text-muted\"},[_vm._v(\"\\n                    Page \"+_vm._s(_vm.page)+\" of \"+_vm._s(_vm.lastPage)+\"\\n                \")])]),_vm._v(\" \"),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header d-flex p-2\"},[_c('div',{staticClass:\"flex-grow-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],staticClass:\"form-control\",attrs:{\"type\":\"search\",\"placeholder\":\"Search...\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}})])]),_vm._v(\" \"),(_vm.loading)?_c('p',{staticClass:\"mb-0 p-4\"},[_c('inline-spinner',{staticClass:\"text-primary\"})],1):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.sites.length === 0)?_c('p',{staticClass:\"mb-0 p-4 text-muted\"},[_vm._v(\"\\n                    User does not have any sites.\\n                \")]):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.sites.length > 0)?_c('table',{staticClass:\"table mb-0 table-middle table-hover\"},[_vm._m(0),_vm._v(\" \"),_c('tbody',_vm._l((_vm.sites),function(site){return _c('tr',{staticClass:\"on-hover\"},[_c('td',[_c('router-link',{attrs:{\"to\":(\"/app/sites/\" + (site.id))}},[_c('strong',[_vm._v(_vm._s(site.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"text-muted\"},[_vm._v(\"\\n                                    \"+_vm._s(site.county.name)+\", \"+_vm._s(site.state.code)+\"\\n                                \")])],1),_vm._v(\" \"),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(site.plots_count))]),_vm._v(\" \"),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(site.plants_count))])])}),0)]):_vm._e()]),_vm._v(\" \"),_c('pager',{attrs:{\"last-page\":_vm.lastPage,\"page\":_vm.page},on:{\"change\":function($event){return _vm.goTo($event)}}})],1)]):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{staticStyle:{\"width\":\"100%\"}},[_vm._v(\"Name\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Plots\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Plants\")]),_vm._v(\" \"),_c('th')])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <inline-spinner v-if=\"loading\"/>\n        <div class=\"row\" v-if=\"!loading && user\">\n            <div class=\"col-xl-4 col-md-5\">\n                <div class=\"card mb-4\">\n                    <div class=\"card-body d-flex align-items-center\">\n                        <avatar class=\"flex-shrink-0\" :user=\"user\" :tooltip=\"false\"/>\n                        <div class=\"ml-3\">\n                            <strong>{{ user.name }}</strong>\n                            <p class=\"mb-0 text-muted\">{{ `Member since ${user.member_since}` }}</p>\n                            <a :href=\"`mailto:${user.email}`\">\n                                {{ user.email }}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"card mb-3\">\n                    <div class=\"card-body rounded\">\n                        <p class=\"font-weight-bold text-dark text-sm mb-1\">Roles</p>\n                        <div v-for=\"(role, index) in roles\" class=\"d-flex align-items-center\">\n                            <div class=\"custom-control custom-radio\">\n                                <input type=\"radio\"\n                                       :id=\"`role-${index}`\"\n                                       name=\"role-select\"\n                                       class=\"custom-control-input\"\n                                       :value=\"`${role.id}`\"\n                                       v-model=\"userRole\"\n                                       v-on:change=\"setRole\">\n                                <label class=\"custom-control-label\"\n                                       :for=\"`role-${index}`\">\n                                    {{ role.name }}\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-xl-8 col-md-7\">\n                <div class=\"d-flex\">\n                    <h1 class=\"page-title mb-3\">Sites</h1>\n                    <div class=\"ml-auto text-muted\">\n                        Page {{ page }} of {{ lastPage }}\n                    </div>\n                </div>\n                <div class=\"card\">\n                    <div class=\"card-header d-flex p-2\">\n                        <div class=\"flex-grow-1\">\n                            <input type=\"search\" class=\"form-control\" v-model=\"search\" placeholder=\"Search...\">\n                        </div>\n                    </div>\n                    <p class=\"mb-0 p-4\" v-if=\"loading\">\n                        <inline-spinner class=\"text-primary\"/>\n                    </p>\n                    <p class=\"mb-0 p-4 text-muted\" v-if=\"!loading && sites.length === 0\">\n                        User does not have any sites.\n                    </p>\n                    <table class=\"table mb-0 table-middle table-hover\" v-if=\"!loading && sites.length > 0\">\n                        <thead>\n                        <tr>\n                            <th style=\"width: 100%\">Name</th>\n                            <th>Plots</th>\n                            <th>Plants</th>\n                            <th></th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                            <tr v-for=\"site in sites\" class=\"on-hover\">\n                                <td>\n                                    <router-link :to=\"`/app/sites/${site.id}`\">\n                                        <strong>{{ site.name }}</strong>\n                                    </router-link>\n                                    <div class=\"text-muted\">\n                                        {{ site.county.name }}, {{ site.state.code }}\n                                    </div>\n                                </td>\n                                <td class=\"text-right\">{{ site.plots_count }}</td>\n                                <td class=\"text-right\">{{ site.plants_count }}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <pager @change=\"goTo($event)\"\n                       :last-page=\"lastPage\"\n                       :page=\"page\"/>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n  import Avatar from '../components/Avatar'\n  import InlineSpinner from '../components/InlineSpinner'\n  import Pager from '../components/Pager'\n\n  export default {\n    name: 'User',\n\n    components: {InlineSpinner, Avatar, Pager},\n\n    data() {\n      return {\n        user        : null,\n        userRole    : '',\n        sites       : [],\n        roles       : [],\n        loading     : true,\n        search      : '',\n        page        : 1,\n        lastPage    : 1,\n      }\n    },\n\n    mounted() {\n      this.loadUser()\n      this.loadSites()\n      this.loadRoles()\n      this.loading = false\n    },\n\n    watch: {\n      search() {\n        this.loadSites()\n      },\n    },\n\n    methods: {\n      async loadUser() {\n        try {\n          const id      = this.$route.params.id\n          const {data}  = await axios.get(`/web/users/${id}`)\n          this.user     = data\n          this.userRole = `${this.user.role_id}`\n        } catch (e) {\n          console.error(e)\n          this.$notify({\n            text: 'Unable to process this request. Please try refreshing the page.',\n            type: 'error',\n          })\n        }\n      },\n\n      async loadSites() {\n        try {\n          const id     = this.$route.params.id\n          const {data} = await axios.get(`/web/user/${id}/sites`, {\n            params: {\n              search: this.search,\n              page  : this.page,\n            }\n          })\n          this.sites    = data.data\n          this.page     = data.current_page\n          this.lastPage = data.last_page\n        } catch (e) {\n          console.error(e)\n          this.$notify({\n            text: 'Unable to process this request. Please try refreshing the page.',\n            type: 'error',\n          })\n        }\n      },\n\n      async loadRoles() {\n        try {\n          const {data} = await axios.get(`/web/roles`)\n          this.roles    = data\n        } catch (e) {\n          console.error(e)\n          this.$notify({\n            text: 'Unable to process this request. Please try refreshing the page.',\n            type: 'error',\n          })\n        }\n      },\n\n      async setRole() {\n        try {\n          const id      = this.$route.params.id\n          await axios.patch(`/web/user/${id}/role`, {\n            role: this.userRole,\n          })\n          \n          this.$notify({\n              text: 'Role updated successfully.',\n              type: 'success'\n          })\n        } catch (e) {\n          console.error(e)\n          this.$notify({\n            text: 'Unable to process this request. Please try refreshing the page.',\n            type: 'error',\n          })\n        }\n      },\n\n      goTo(page) {\n        this.loading = true\n        this.page    = page\n        this.loadSites()\n        this.loading = false\n      },\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=34204a09&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34204a09\",\n  null\n  \n)\n\nexport default component.exports"],"names":["name","props","lastPage","required","type","page","hideIfEmpty","data","currentPage","mounted","this","watch","change","methods","previous","$emit","next","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","preventDefault","_v","directives","rawName","value","expression","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","_value","multiple","_l","i","domProps","_s","_e","components","InlineSpinner","Avatar","Pager","user","userRole","sites","roles","loading","search","id","axios","console","text","params","role","email","index","_q","setRole","composing","length","_m","site","county","state","code","plots_count","plants_count","goTo","staticStyle"],"sourceRoot":""}