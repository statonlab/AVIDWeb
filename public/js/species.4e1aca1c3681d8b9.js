/*! For license information please see species.4e1aca1c3681d8b9.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[929],{1660:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>o});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={},void 0!==e&&this.set(e)}var e,n,o;return e=t,(n=[{key:"get",value:function(t){if(this.errors[t])return"string"==typeof this.errors[t]?this.errors[t]:this.errors[t][0]}},{key:"first",value:function(t){return this.get(t)}},{key:"set",value:function(t){this.errors=t.errors}},{key:"clear",value:function(t){this.errors[t]&&delete this.errors[t]}},{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"clearAll",value:function(){this.errors={}}},{key:"toArray",value:function(){var t=this,e=[];return Object.keys(this.errors).forEach((function(n){t.errors[n].forEach((function(t){return e.push(t)}))})),e}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},1817:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(1660);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors=new r.Z,this.originalData=e,this._multipart=!1,this.fileFields=[],this.onProgressCallback=function(t){},e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e,n,o;return e=t,(n=[{key:"multipart",value:function(t){this._multipart=void 0===t||t}},{key:"keydown",value:function(t){var e=t.target.name;void 0!==e&&void 0!==this[e]&&this.errors.clear(e)}},{key:"onProgressChange",value:function(t){if("function"!=typeof t)throw new r.Z("The function onProgressChange only accepts a function as a parameters");this.onProgressCallback=t}},{key:"data",value:function(t){var e={};for(var n in this.originalData)this.originalData.hasOwnProperty(n)&&(e[n]=this[n]);if(t)for(var r in t)this.originalData.hasOwnProperty(r)&&(e[r]=t[r]);if(this._multipart){var o=new FormData;for(var i in e)e.hasOwnProperty(i)&&(this.isFileField(i)&&FileList&&e[i]instanceof FileList?o.append(i,null===e[i][0]?"":e[i][0]):o.append(i,null===e[i]?"":e[i]));return o}return e}},{key:"isFileField",value:function(t){return this.fileFields.indexOf(t)>-1}},{key:"reset",value:function(){for(var t in this.originalData)this.originalData.hasOwnProperty(t)&&(this[t]=this.originalData[t]);this.errors.clearAll()}},{key:"post",value:function(t,e){return this.submit("post",t,e)}},{key:"put",value:function(t,e){return this.submit("put",t,e)}},{key:"get",value:function(t,e){return this.submit("get",t,e)}},{key:"delete",value:function(t,e){return this.submit("delete",t,e)}},{key:"patch",value:function(t,e){return this.submit("patch",t,e)}},{key:"headers",value:function(){var t={};return this._multipart&&(t["Content-Type"]="multipart/form-data"),t}},{key:"setAsFile",value:function(t){this.isFileField(t)||(this.multipart(!0),this.fileFields.push(t))}},{key:"setAsNotFile",value:function(t){this.fileFields=this.fileFields.filter((function(e){return e!==t})),0===this.fileFields.length&&this.multipart(!1)}},{key:"config",value:function(){return{onUploadProgress:this.onProgressCallback}}},{key:"submit",value:function(t,e,n){var r=this;if(0===e.length)throw new Error("Please provide a valid URL");if(this._multipart&&"post"!==t)throw new Error("Form is set to be multipart but request method is ".concat(t,". Method should be changed to post."));var o=this.headers(),a=this.config();return new Promise((function(s,c){axios[t](e,r.data(n),i(i({},a),{},{headers:o})).then((function(t){s(t)})).catch((function(t){r.onFail(t),c(t)}))}))}},{key:"onFail",value:function(t){t.response&&422===t.response.status&&this.errors.set(t.response.data)}},{key:"setDefault",value:function(t){for(var e in this.originalData)this.originalData.hasOwnProperty(e)&&t.hasOwnProperty(e)&&(null!==t[e]?"undefined"!==t[e]&&(this[e]=t[e]):this[e]=null!==this.originalData[e]?this.originalData[e]:null)}}])&&s(e.prototype,n),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},1255:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(7897),o=n.n(r),i=n(1519),a=n.n(i)()(o());a.push([t.id,".close[data-v-7a28cdfc]{margin-top:-25px;right:20px;top:50%}","",{version:3,sources:["webpack://./resources/js/components/Modal/Close.vue"],names:[],mappings:"AAiBA,wBAGA,gBAAA,CAFA,UAAA,CACA,OAEA",sourcesContent:['<template>\n    <button type="button"\n            class="btn btn-close btn-sm ml-auto text-muted position-absolute close"\n            @click="$emit(\'click\', $event)">\n        <icon name="close"/>\n    </button>\n</template>\n\n<script>\n  import Icon from \'../Icon\'\n  export default {\n    name: \'Close\',\n    components: {Icon},\n  }\n<\/script>\n\n<style scoped>\n.close {\n    right: 20px;\n    top: 50%;\n    margin-top: -25px;\n}\n</style>\n'],sourceRoot:""}]);const s=a},4326:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(7897),o=n.n(r),i=n(1519),a=n.n(i)()(o());a.push([t.id,".max-vh[data-v-65ec0403]{max-height:93vh}.bg-transparent-dark[data-v-65ec0403]{background-color:rgba(0,0,0,.7)}","",{version:3,sources:["webpack://./resources/js/components/Modal/Modal.vue"],names:[],mappings:"AA0CA,yBACA,eACA,CAEA,sCACA,+BACA",sourcesContent:['<template>\n    <transition name="fade">\n        <div class="modal show vh-100 d-block" tabindex="-1" role="dialog">\n            <button class="modal-backdrop border-0 bg-transparent-dark cursor-default" type="button" @click.prevent="$emit(\'close\')"></button>\n            <div class="modal-dialog"\n                 style="z-index: 1060"\n                 :class="{\'modal-lg\': large, \'modal-md\': medium}"\n                 role="document"\n                 ref="modal">\n                <slot></slot>\n            </div>\n        </div>\n    </transition>\n</template>\n\n<script>\n  export default {\n    name: \'Modal\',\n\n    props: {\n      large : {type: Boolean, required: false, default: false},\n      medium: {type: Boolean, required: false, default: false},\n    },\n\n    data() {\n      return {\n        mounted: false,\n      }\n    },\n  }\n<\/script>\n\n<style scoped>\n    .max-vh {\n        max-height: 93vh;\n    }\n\n    .bg-transparent-dark {\n        background-color: rgba(0, 0, 0, .7);\n    }\n</style>\n'],sourceRoot:""}]);const s=a},4991:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(7897),o=n.n(r),i=n(1519),a=n.n(i)()(o());a.push([t.id,".floating-button[data-v-785c008d]{bottom:10px;position:fixed;right:10px}","",{version:3,sources:["webpack://./resources/js/screens/Species.vue"],names:[],mappings:"AAwRA,kCAEA,WAAA,CADA,cAAA,CAEA,UACA",sourcesContent:['<template>\n  <div>\n    <div class="d-flex mb-3 align-items-center">\n      <h1 class="page-title">Species</h1>\n      <div class="ml-auto text-muted">\n        Page {{ page }} of {{ lastPage }}.\n        Show <select name="limit"\n                     id="limit"\n                     title="per page"\n                     v-model="limit"\n                     class="custom-select d-inline-block w-auto">\n        <option value="20">20</option>\n        <option value="40">40</option>\n        <option value="60">60</option>\n        <option value="80">80</option>\n        <option value="100">100</option>\n      </select> per page.\n      </div>\n    </div>\n    <div class="card mb-3">\n      <div class="card-header d-flex p-2 align-items-center">\n        <div class="flex-grow-1">\n          <input type="search" class="form-control" placeholder="Search..." v-model="search" title="Search">\n        </div>\n        <div class="ml-auto">\n          <button class="btn btn-info" type="button" @click.prevent="merge()" v-if="selected.length > 1">\n            <icon name="git-merge"/>\n            <span>Merge {{ selected.length }} Species</span>\n          </button>\n\n          <button class="btn btn-primary" @click.prevent="showForm = true">\n            <icon name="add"/>\n            <span>Species</span>\n          </button>\n        </div>\n      </div>\n      <div class="card-body p-0">\n        <div class="d-flex align-items-center justify-content-center p-3" v-if="loading">\n          <inline-spinner class="text-primary"/>\n        </div>\n        <p class="text-muted mb-0 p-3" v-if="species.length === 0 && !loading">\n          There are no species found. Please user the "+ species" button above to add one.\n        </p>\n        <div class="table-responsive" v-if="!loading && species.length > 0">\n          <table class="table table-hover table-middle mb-0">\n            <thead>\n            <tr>\n              <th></th>\n              <th>Name</th>\n              <th>Type</th>\n              <th>Plants</th>\n              <th>Overstory</th>\n              <th>Seedling/Shrubs</th>\n              <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr v-for="item in species" class="hover-visible-container">\n              <td style="width: 30px">\n                <input type="checkbox"\n                       title="Select species"\n                       @change="select(item, $event)"\n                       :checked="selected.indexOf(item.id) > -1">\n              </td>\n              <td>\n                <inline-spinner v-if="destroying.indexOf(item.id) > -1" class="text-primary"/>\n                <strong>{{ item.name }}</strong>\n              </td>\n              <td>\n                {{ item.type ? item.type.name : null }}\n              </td>\n              <td>{{ item.plants_count }}</td>\n              <td>{{ item.sites_count }}</td>\n              <td>{{ item.shrubs_count }}</td>\n              <td>\n                <div class="d-flex justify-content-end hover-visible">\n                  <button class="btn btn-link" @click.prevent="edit(item)" v-tooltip="\'Edit\'">\n                    <icon name="create"/>\n                  </button>\n\n                  <button class="btn btn-link"\n                          @click.prevent="destroy(item)"\n                          v-tooltip="\'Delete\'">\n                    <icon name="trash"/>\n                  </button>\n                </div>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <pager @change="goTo($event)" :last-page="lastPage" :page="page"/>\n\n    <species-form\n        @close="closeForm"\n        :species="editing"\n        v-if="showForm"\n        @create="created($event)"\n        @update="updated($event)"/>\n\n    <species-merge-form v-if="showMergeForm"\n                        :selected="selected"\n                        @close="showMergeForm = false"\n                        @merged="merged"/>\n\n    <div class="floating-button rounded shadow" v-if="selected.length > 1">\n      <button class="btn btn-info" type="button" @click.prevent="merge()">\n        <icon name="git-merge"/>\n        <span>Merge {{ selected.length }} Species</span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Icon from \'../components/Icon\'\nimport InlineSpinner from \'../components/InlineSpinner\'\nimport SpeciesForm from \'../forms/SpeciesForm\'\nimport Pager from \'../components/Pager\'\nimport Errors from \'../forms/Errors\'\nimport SpeciesMergeForm from \'../forms/SpeciesMergeForm\'\n\nexport default {\n  name: \'Species\',\n\n  components: {SpeciesMergeForm, Pager, SpeciesForm, InlineSpinner, Icon},\n\n  data() {\n    return {\n      loading      : true,\n      search       : \'\',\n      species      : [],\n      page         : 1,\n      lastPage     : 1,\n      total        : 0,\n      editing      : null,\n      showForm     : false,\n      request      : null,\n      limit        : \'20\',\n      destroying   : [],\n      selected     : [],\n      showMergeForm: false,\n    }\n  },\n\n  mounted() {\n    this.loadSpecies()\n  },\n\n  watch: {\n    search() {\n      this.loadSpecies()\n    },\n\n    limit() {\n      this.page = 1\n      this.loadSpecies()\n    },\n  },\n\n  methods: {\n    async loadSpecies() {\n      if (this.request) {\n        this.request()\n      }\n\n      try {\n        const {data} = await axios.get(`/web/species`, {\n          params     : {\n            page  : this.page,\n            search: this.search,\n            limit : this.limit,\n          },\n          cancelToken: new axios.CancelToken(c => this.request = c),\n        })\n\n        this.species  = data.data\n        this.page     = data.current_page\n        this.lastPage = data.last_page\n        this.total    = data.total\n      } catch (e) {\n        if (!axios.isCancel(e)) {\n          console.error(e)\n          this.$notify({\n            type: \'error\',\n            text: \'Unable to load species. Please try refreshing the page.\',\n          })\n        }\n      }\n      this.loading = false\n    },\n\n    created(species) {\n      this.loadSpecies()\n      this.editing = null\n    },\n\n    updated(species) {\n      this.editing  = null\n      this.species  = this.species.map(s => s.id === species.id ? species : s)\n      this.showForm = false\n    },\n\n    destroy(species) {\n      this.$confirm({\n        title    : `Delete ${species.name}?`,\n        text     : \'This action is permanent\',\n        onConfirm: async () => {\n          this.destroying.push(species.id)\n          try {\n            await axios.delete(`/web/species/${species.id}`)\n            this.species = this.species.filter(s => s.id !== species.id)\n            this.$notify({\n              type: \'success\',\n              text: \'Species deleted successfully\',\n            })\n          } catch (e) {\n            if (e.response && e.response.status === 422) {\n              const errors = new Errors(e.response.data)\n              if (errors.has(\'species\')) {\n                this.$alert(errors.first(\'species\'))\n              }\n            } else {\n              this.$alert({\n                title: \'Error\',\n                text : \'Unable to delete species. Please try refreshing the page.\',\n              })\n            }\n          }\n\n          this.destroying = this.destroying.filter(id => id !== species.id)\n        },\n      })\n    },\n\n    edit(species) {\n      this.editing  = species\n      this.showForm = true\n    },\n\n    closeForm() {\n      this.editing  = null\n      this.showForm = false\n    },\n\n    goTo(page) {\n      this.loading = true\n      this.page    = page\n      this.loadSpecies()\n    },\n\n    merge() {\n      this.showMergeForm = true\n    },\n\n    select(species, event) {\n      if (this.selected.indexOf(species.id) > -1) {\n        event.target.checked = false\n        this.selected        = this.selected.filter(id => id !== species.id)\n      } else {\n        event.target.checked = true\n        this.selected.push(species.id)\n      }\n    },\n\n    merged() {\n      this.showMergeForm = false\n      this.loading       = true\n      this.page          = 1\n      this.selected      = []\n      this.loadSpecies()\n    },\n  },\n}\n<\/script>\n\n<style scoped>\n.floating-button {\n  position: fixed;\n  bottom: 10px;\n  right: 10px;\n}\n</style>\n'],sourceRoot:""}]);const s=a},2038:(t,e,n)=>{n.d(e,{Z:()=>c});const r={name:"Close",components:{Icon:n(4856).Z}};var o=n(3379),i=n.n(o),a=n(1255),s={insert:"head",singleton:!1};i()(a.Z,s);a.Z.locals;const c=(0,n(1900).Z)(r,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"btn btn-close btn-sm ml-auto text-muted position-absolute close",attrs:{type:"button"},on:{click:function(e){return t.$emit("click",e)}}},[e("icon",{attrs:{name:"close"}})],1)}),[],!1,null,"7a28cdfc",null).exports},3981:(t,e,n)=>{n.d(e,{Z:()=>c});const r={name:"Modal",props:{large:{type:Boolean,required:!1,default:!1},medium:{type:Boolean,required:!1,default:!1}},data:function(){return{mounted:!1}}};var o=n(3379),i=n.n(o),a=n(4326),s={insert:"head",singleton:!1};i()(a.Z,s);a.Z.locals;const c=(0,n(1900).Z)(r,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("div",{staticClass:"modal show vh-100 d-block",attrs:{tabindex:"-1",role:"dialog"}},[e("button",{staticClass:"modal-backdrop border-0 bg-transparent-dark cursor-default",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}}),t._v(" "),e("div",{ref:"modal",staticClass:"modal-dialog",class:{"modal-lg":t.large,"modal-md":t.medium},staticStyle:{"z-index":"1060"},attrs:{role:"document"}},[t._t("default")],2)])])}),[],!1,null,"65ec0403",null).exports},6973:(t,e,n)=>{n.d(e,{Z:()=>o});const r={name:"ModalBody"};const o=(0,n(1900).Z)(r,(function(){return(0,this._self._c)("div",{staticClass:"modal-body"},[this._t("default")],2)}),[],!1,null,"21f39381",null).exports},6451:(t,e,n)=>{n.d(e,{Z:()=>o});const r={name:"ModalCard"};const o=(0,n(1900).Z)(r,(function(){return(0,this._self._c)("div",{staticClass:"modal-content shadow-lg border-0"},[this._t("default")],2)}),[],!1,null,"bf90aa66",null).exports},8136:(t,e,n)=>{n.d(e,{Z:()=>o});const r={name:"ModalFooter"};const o=(0,n(1900).Z)(r,(function(){return(0,this._self._c)("div",{staticClass:"modal-footer justify-content-start border-top-0 bg-light"},[this._t("default")],2)}),[],!1,null,"2efdf4a2",null).exports},9294:(t,e,n)=>{n.d(e,{Z:()=>o});const r={name:"ModalHeader"};const o=(0,n(1900).Z)(r,(function(){return(0,this._self._c)("div",{staticClass:"modal-header position-relative"},[this._t("default")],2)}),[],!1,null,"2075d2dc",null).exports},1797:(t,e,n)=>{n.d(e,{Z:()=>o});const r={name:"ModalTitle"};const o=(0,n(1900).Z)(r,(function(){return(0,this._self._c)("h3",{staticClass:"modal-title m-0"},[this._t("default")],2)}),[],!1,null,"1e97cd5f",null).exports},6365:(t,e,n)=>{n.d(e,{Z:()=>o});const r={name:"Pager",props:{lastPage:{required:!0,type:Number},page:{required:!0,type:Number},hideIfEmpty:{required:!1,type:Boolean,default:!0}},data:function(){return{currentPage:1}},mounted:function(){this.currentPage=this.page},watch:{page:function(t){this.currentPage=t},currentPage:function(t){this.change(t)}},methods:{previous:function(){1!==this.page&&this.$emit("change",this.page-1)},next:function(){this.lastPage!==this.page&&this.$emit("change",this.page+1)},change:function(t){this.page!==t&&this.$emit("change",t)}}};const o=(0,n(1900).Z)(r,(function(){var t=this,e=t._self._c;return!t.hideIfEmpty||t.lastPage>1?e("nav",{staticClass:"d-flex w-100 justify-content-between align-items-center",attrs:{"aria-label":"Page navigation"}},[e("button",{staticClass:"btn btn-white",attrs:{disabled:1===t.page,type:"button"},on:{click:function(e){return e.preventDefault(),t.previous()}}},[t._v("\n    Previous\n  ")]),t._v(" "),e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.currentPage,expression:"currentPage"}],staticClass:"custom-select w-auto",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.currentPage=e.target.multiple?n:n[0]}}},t._l(t.lastPage,(function(n){return e("option",{domProps:{value:n}},[t._v("\n        Page "+t._s(n)+"\n      ")])})),0)]),t._v(" "),e("button",{staticClass:"btn btn-white",attrs:{disabled:t.page===t.lastPage,type:"button"},on:{click:function(e){return e.preventDefault(),t.next()}}},[t._v("\n    Next\n  ")])]):t._e()}),[],!1,null,"645860e9",null).exports},5016:(t,e,n)=>{n.d(e,{Z:()=>o});const r={name:"Required"};const o=(0,n(1900).Z)(r,(function(){return(0,this._self._c)("sup",{staticClass:"text-danger"},[this._v("*")])}),[],!1,null,"53582911",null).exports},943:(t,e,n)=>{n.r(e),n.d(e,{default:()=>N});var r=n(4856),o=n(1452),i=n(6451),a=n(3981),s=n(9294),c=n(1797),l=n(2038),u=n(6973),p=n(8136),d=n(1817);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(){h=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function p(){}function d(){}function v(){}var m={};s(m,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(C([])));y&&y!==e&&n.call(y,o)&&(m=y);var b=v.prototype=p.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==f(p)&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(p).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,s(b,"constructor",v),s(v,"constructor",d),d.displayName=s(v,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function v(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){v(i,r,o,a,s,"next",t)}function s(t){v(i,r,o,a,s,"throw",t)}a(void 0)}))}}const g={name:"SpeciesForm",components:{InlineSpinner:o.Z,ModalFooter:p.Z,ModalBody:u.Z,Close:l.Z,ModalTitle:c.Z,ModalHeader:s.Z,Modal:a.Z,ModalCard:i.Z},props:{species:{required:!1,default:null}},data:function(){return{loading:!1,types:null,loadingTypes:!1,form:new d.Z({name:"",plant_type_id:null})}},mounted:function(){var t=this;return m(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadTypes();case 2:t.species&&t.form.setDefault(t.species);case 3:case"end":return e.stop()}}),e)})))()},methods:{save:function(){this.species?this.update():this.create()},loadTypes:function(){var t=this;return m(h().mark((function e(){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingTypes=!0,e.prev=1,e.next=4,axios.get("/web/plant-types");case 4:n=e.sent,r=n.data,t.types=r,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.$alert("Unable to load form. Please try refreshing the page.");case 12:t.loadingTypes=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},create:function(){var t=this;return m(h().mark((function e(){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.form.post("/web/species");case 4:n=e.sent,r=n.data,t.$emit("create",r),t.form.reset(),t.$refs.name.focus(),t.$notify({text:"Species created successfully",type:"success"}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t.$notify({text:"Unable to create species. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 16:t.loading=!1;case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()},update:function(){var t=this;return m(h().mark((function e(){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.form.put("/web/species/".concat(t.species.id));case 4:n=e.sent,r=n.data,t.$emit("update",r),t.$notify({text:"Species updated successfully",type:"success"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t.$notify({text:"Unable to update species. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 14:t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))()}}};var y=n(1900);const b=(0,y.Z)(g,(function(){var t=this,e=t._self._c;return e("modal",{on:{close:function(e){return t.$emit("close")}}},[e("form",{attrs:{action:"#"},on:{keydown:function(e){return t.form.errors.clear(e.target.name)},submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("modal-card",[e("modal-header",[t.species?e("modal-title",[t._v("\n                    Update "+t._s(t.species.name)+"\n                ")]):e("modal-title",[t._v("Create Species")]),t._v(" "),e("close",{on:{click:function(e){return e.preventDefault(),t.$emit("close")}}})],1),t._v(" "),e("modal-body",[t.species?e("div",{staticClass:"alert alert-warning"},[e("p",{staticClass:"mb-0"},[e("strong",[t._v("Warning")])]),t._v(" "),e("div",[t._v("Changing the name of this species will affect any resources that are attached to it such as plants and sites.")])]):t._e(),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],ref:"name",staticClass:"form-control",class:{"is-invalid":t.form.errors.has("name")},attrs:{type:"text",autofocus:"",placeholder:"Species Name",name:"name",id:"name"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),t.form.errors.has("name")?e("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("name"))+"\n                    ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"plant"}},[t._v("\n                        Plant Type\n                    ")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.plant_type_id,expression:"form.plant_type_id"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("plant_type_id")},attrs:{id:"plant",name:"plant_type_id",disabled:t.loadingTypes},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"plant_type_id",e.target.multiple?n:n[0])}}},[e("option",{domProps:{value:null}},[t._v("None")]),t._v(" "),t._l(t.types,(function(n){return e("option",{domProps:{value:n.id}},[t._v(t._s(n.name))])}))],2),t._v(" "),t.form.errors.has("plant_type_id")?e("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("plant_type_id"))+"\n                    ")]):t._e()])]),t._v(" "),e("modal-footer",{staticClass:"d-flex"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.loading}},[t.loading?e("inline-spinner"):t._e(),t._v(" "),e("span",[t._v("Save")])],1),t._v(" "),e("button",{staticClass:"btn btn-light ml-auto",attrs:{type:"button",disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n                    Cancel\n                ")])])],1)],1)])}),[],!1,null,"64a10005",null).exports;var w=n(6365),_=n(1660),x=n(5016);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function P(){P=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function p(){}function d(){}function f(){}var h={};s(h,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==e&&n.call(m,o)&&(h=m);var g=f.prototype=p.prototype=Object.create(h);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==k(p)&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(p).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=f,s(g,"constructor",f),s(f,"constructor",d),d.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function S(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function C(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){S(i,r,o,a,s,"next",t)}function s(t){S(i,r,o,a,s,"throw",t)}a(void 0)}))}}const E={name:"SpeciesMergeForm",props:{selected:{type:Array}},components:{Required:x.Z,Close:l.Z,InlineSpinner:o.Z,ModalFooter:p.Z,ModalBody:u.Z,ModalTitle:c.Z,ModalHeader:s.Z,ModalCard:i.Z,Modal:a.Z},data:function(){return{loading:!0,species:[],plantTypes:[],saving:!1,form:new d.Z({type:"",species:[]})}},mounted:function(){this.loadOptions()},watch:{selected:{immediate:!0,handler:function(){this.form.species=this.selected},deep:!0}},methods:{loadOptions:function(){var t=this;return C(P().mark((function e(){var n,r,o;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/web/species/merge-options",{params:{species:t.selected}});case 3:n=e.sent,r=n.data,t.plantTypes=r.types,t.species=r.species,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response&&422===e.t0.response.status?(o=new _.Z(e.t0.response.data),t.$alert(o.toArray().join(" "))):e.t0.response&&403===e.t0.response.status?t.$alert("You are not authorized to complete this action."):t.$alert("Unable to process your request at this time. Please try refreshing the page or contact us."),t.$emit("close"),console.error(e.t0);case 14:t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))()},merge:function(){var t=this;return C(P().mark((function e(){var n;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.saving){e.next=2;break}return e.abrupt("return");case 2:return t.saving=!0,e.prev=3,e.next=6,t.form.post("/web/species/merge-species");case 6:t.$notify({type:"success",text:"Species merged successfully."}),t.$emit("merged"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0.response&&422===e.t0.response.status?(n=new _.Z(e.t0.response.data),t.$alert(n.toArray().join(" "))):e.t0.response&&403===e.t0.response.status?t.$alert("You are not authorized to complete this action."):t.$alert("Unable to process your request at this time. Please try refreshing the page or contact us."),console.error(e.t0);case 14:t.saving=!1;case 15:case"end":return e.stop()}}),e,null,[[3,10]])})))()}}};function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function O(){O=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function p(){}function d(){}function f(){}var h={};s(h,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(P([])));m&&m!==e&&n.call(m,o)&&(h=m);var g=f.prototype=p.prototype=Object.create(h);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==L(p)&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(p).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=f,s(g,"constructor",f),s(f,"constructor",d),d.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function F(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function A(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){F(i,r,o,a,s,"next",t)}function s(t){F(i,r,o,a,s,"throw",t)}a(void 0)}))}}const j={name:"Species",components:{SpeciesMergeForm:(0,y.Z)(E,(function(){var t=this,e=t._self._c;return e("modal",{on:{close:function(e){return t.$emit("close")}}},[e("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.merge.apply(null,arguments)}}},[e("modal-card",[e("modal-header",[e("modal-title",[t._v("Merge Species")]),t._v(" "),e("close",{on:{click:function(e){return t.$emit("close")}}})],1),t._v(" "),e("modal-body",[t.loading?e("div",{staticClass:"d-flex align-items-center justify-content-center"},[e("inline-spinner",{staticClass:"text-primary"})],1):e("div",[e("p",{staticClass:"font-weight-bold"},[t._v("\n            Merging the following species\n          ")]),t._v(" "),e("ul",t._l(t.species,(function(n){return e("li",[e("strong",[t._v(t._s(n.name))]),t._v(" "),n.type?e("div",[e("span",{staticClass:"text-muted"},[t._v(t._s(n.type.name))])]):t._e()])})),0),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"type"}},[t._v("Select Plant Type\n              "),e("required")],1),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"custom-select",attrs:{name:"type",id:"type"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"type",e.target.multiple?n:n[0])}}},[e("option",{attrs:{value:""}},[t._v("Select Plant Type")]),t._v(" "),t._l(t.plantTypes,(function(n){return e("option",{domProps:{value:n.id}},[t._v("\n                "+t._s(n.name)+"\n              ")])}))],2)])])]),t._v(" "),e("modal-footer",{staticClass:"d-flex justify-content-between"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.saving}},[t.saving?e("inline-spinner"):t._e(),t._v(" "),e("span",[t._v("Merge Species")])],1),t._v(" "),e("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n          Cancel\n        ")])])],1)],1)])}),[],!1,null,"64846567",null).exports,Pager:w.Z,SpeciesForm:b,InlineSpinner:o.Z,Icon:r.Z},data:function(){return{loading:!0,search:"",species:[],page:1,lastPage:1,total:0,editing:null,showForm:!1,request:null,limit:"20",destroying:[],selected:[],showMergeForm:!1}},mounted:function(){this.loadSpecies()},watch:{search:function(){this.loadSpecies()},limit:function(){this.page=1,this.loadSpecies()}},methods:{loadSpecies:function(){var t=this;return A(O().mark((function e(){var n,r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.request&&t.request(),e.prev=1,e.next=4,axios.get("/web/species",{params:{page:t.page,search:t.search,limit:t.limit},cancelToken:new axios.CancelToken((function(e){return t.request=e}))});case 4:n=e.sent,r=n.data,t.species=r.data,t.page=r.current_page,t.lastPage=r.last_page,t.total=r.total,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),axios.isCancel(e.t0)||(console.error(e.t0),t.$notify({type:"error",text:"Unable to load species. Please try refreshing the page."}));case 15:t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},created:function(t){this.loadSpecies(),this.editing=null},updated:function(t){this.editing=null,this.species=this.species.map((function(e){return e.id===t.id?t:e})),this.showForm=!1},destroy:function(t){var e,n=this;this.$confirm({title:"Delete ".concat(t.name,"?"),text:"This action is permanent",onConfirm:(e=A(O().mark((function e(){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.destroying.push(t.id),e.prev=1,e.next=4,axios.delete("/web/species/".concat(t.id));case 4:n.species=n.species.filter((function(e){return e.id!==t.id})),n.$notify({type:"success",text:"Species deleted successfully"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status?(r=new _.Z(e.t0.response.data)).has("species")&&n.$alert(r.first("species")):n.$alert({title:"Error",text:"Unable to delete species. Please try refreshing the page."});case 11:n.destroying=n.destroying.filter((function(e){return e!==t.id}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(){return e.apply(this,arguments)})})},edit:function(t){this.editing=t,this.showForm=!0},closeForm:function(){this.editing=null,this.showForm=!1},goTo:function(t){this.loading=!0,this.page=t,this.loadSpecies()},merge:function(){this.showMergeForm=!0},select:function(t,e){this.selected.indexOf(t.id)>-1?(e.target.checked=!1,this.selected=this.selected.filter((function(e){return e!==t.id}))):(e.target.checked=!0,this.selected.push(t.id))},merged:function(){this.showMergeForm=!1,this.loading=!0,this.page=1,this.selected=[],this.loadSpecies()}}};var Z=n(3379),$=n.n(Z),T=n(4991),M={insert:"head",singleton:!1};$()(T.Z,M);T.Z.locals;const N=(0,y.Z)(j,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex mb-3 align-items-center"},[e("h1",{staticClass:"page-title"},[t._v("Species")]),t._v(" "),e("div",{staticClass:"ml-auto text-muted"},[t._v("\n      Page "+t._s(t.page)+" of "+t._s(t.lastPage)+".\n      Show "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.limit,expression:"limit"}],staticClass:"custom-select d-inline-block w-auto",attrs:{name:"limit",id:"limit",title:"per page"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.limit=e.target.multiple?n:n[0]}}},[e("option",{attrs:{value:"20"}},[t._v("20")]),t._v(" "),e("option",{attrs:{value:"40"}},[t._v("40")]),t._v(" "),e("option",{attrs:{value:"60"}},[t._v("60")]),t._v(" "),e("option",{attrs:{value:"80"}},[t._v("80")]),t._v(" "),e("option",{attrs:{value:"100"}},[t._v("100")])]),t._v(" per page.\n    ")])]),t._v(" "),e("div",{staticClass:"card mb-3"},[e("div",{staticClass:"card-header d-flex p-2 align-items-center"},[e("div",{staticClass:"flex-grow-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search...",title:"Search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"ml-auto"},[t.selected.length>1?e("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.merge()}}},[e("icon",{attrs:{name:"git-merge"}}),t._v(" "),e("span",[t._v("Merge "+t._s(t.selected.length)+" Species")])],1):t._e(),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:function(e){e.preventDefault(),t.showForm=!0}}},[e("icon",{attrs:{name:"add"}}),t._v(" "),e("span",[t._v("Species")])],1)])]),t._v(" "),e("div",{staticClass:"card-body p-0"},[t.loading?e("div",{staticClass:"d-flex align-items-center justify-content-center p-3"},[e("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),0!==t.species.length||t.loading?t._e():e("p",{staticClass:"text-muted mb-0 p-3"},[t._v('\n        There are no species found. Please user the "+ species" button above to add one.\n      ')]),t._v(" "),!t.loading&&t.species.length>0?e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-middle mb-0"},[t._m(0),t._v(" "),e("tbody",t._l(t.species,(function(n){return e("tr",{staticClass:"hover-visible-container"},[e("td",{staticStyle:{width:"30px"}},[e("input",{attrs:{type:"checkbox",title:"Select species"},domProps:{checked:t.selected.indexOf(n.id)>-1},on:{change:function(e){return t.select(n,e)}}})]),t._v(" "),e("td",[t.destroying.indexOf(n.id)>-1?e("inline-spinner",{staticClass:"text-primary"}):t._e(),t._v(" "),e("strong",[t._v(t._s(n.name))])],1),t._v(" "),e("td",[t._v("\n              "+t._s(n.type?n.type.name:null)+"\n            ")]),t._v(" "),e("td",[t._v(t._s(n.plants_count))]),t._v(" "),e("td",[t._v(t._s(n.sites_count))]),t._v(" "),e("td",[t._v(t._s(n.shrubs_count))]),t._v(" "),e("td",[e("div",{staticClass:"d-flex justify-content-end hover-visible"},[e("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit",expression:"'Edit'"}],staticClass:"btn btn-link",on:{click:function(e){return e.preventDefault(),t.edit(n)}}},[e("icon",{attrs:{name:"create"}})],1),t._v(" "),e("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"btn btn-link",on:{click:function(e){return e.preventDefault(),t.destroy(n)}}},[e("icon",{attrs:{name:"trash"}})],1)])])])})),0)])]):t._e()])]),t._v(" "),e("pager",{attrs:{"last-page":t.lastPage,page:t.page},on:{change:function(e){return t.goTo(e)}}}),t._v(" "),t.showForm?e("species-form",{attrs:{species:t.editing},on:{close:t.closeForm,create:function(e){return t.created(e)},update:function(e){return t.updated(e)}}}):t._e(),t._v(" "),t.showMergeForm?e("species-merge-form",{attrs:{selected:t.selected},on:{close:function(e){t.showMergeForm=!1},merged:t.merged}}):t._e(),t._v(" "),t.selected.length>1?e("div",{staticClass:"floating-button rounded shadow"},[e("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.merge()}}},[e("icon",{attrs:{name:"git-merge"}}),t._v(" "),e("span",[t._v("Merge "+t._s(t.selected.length)+" Species")])],1)]):t._e()],1)}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th"),t._v(" "),e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Plants")]),t._v(" "),e("th",[t._v("Overstory")]),t._v(" "),e("th",[t._v("Seedling/Shrubs")]),t._v(" "),e("th")])])}],!1,null,"785c008d",null).exports}}]);
//# sourceMappingURL=species.4e1aca1c3681d8b9.js.map