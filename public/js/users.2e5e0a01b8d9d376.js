"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[571],{414:(t,e,a)=>{a.d(e,{Z:()=>n});const s={name:"Pager",props:{lastPage:{required:!0,type:Number},page:{required:!0,type:Number},hideIfEmpty:{required:!1,type:Boolean,default:!0}},data:function(){return{currentPage:1}},mounted:function(){this.currentPage=this.page},watch:{page:function(t){this.currentPage=t},currentPage:function(t){this.change(t)}},methods:{previous:function(){1!==this.page&&this.$emit("change",this.page-1)},next:function(){this.lastPage!==this.page&&this.$emit("change",this.page+1)},change:function(t){this.page!==t&&this.$emit("change",t)}}};const n=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return!t.hideIfEmpty||t.lastPage>1?a("nav",{staticClass:"d-flex w-100 justify-content-between align-items-center",attrs:{"aria-label":"Page navigation"}},[a("button",{staticClass:"btn btn-white",attrs:{disabled:1===t.page,type:"button"},on:{click:function(e){return e.preventDefault(),t.previous()}}},[t._v("\n    Previous\n  ")]),t._v(" "),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentPage,expression:"currentPage"}],staticClass:"custom-select w-auto",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.currentPage=e.target.multiple?a:a[0]}}},t._l(t.lastPage,(function(e){return a("option",{domProps:{value:e}},[t._v("\n        Page "+t._s(e)+"\n      ")])})),0)]),t._v(" "),a("button",{staticClass:"btn btn-white",attrs:{disabled:t.page===t.lastPage,type:"button"},on:{click:function(e){return e.preventDefault(),t.next()}}},[t._v("\n    Next\n  ")])]):t._e()}),[],!1,null,"645860e9",null).exports},5290:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var s=a(7757),n=a.n(s),r=a(4090),i=a(393),o=a(414);function c(t,e,a,s,n,r,i){try{var o=t[r](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,n)}const l={name:"Users",components:{Avatar:a(1808).Z,Pager:o.Z,InlineSpinner:i.Z,Icon:r.Z},data:function(){return{loading:!0,users:[],search:"",page:1,lastPage:1,total:0,orderBy:"name",orderDir:"asc"}},mounted:function(){this.loadUsers()},watch:{search:function(){this.loadUsers()}},methods:{loadUsers:function(){var t,e=this;return(t=n().mark((function t(){var a,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.get("/web/users",{params:{search:e.search,page:e.page,order_by:e.orderBy,order_dir:e.orderDir},cancelToken:new axios.CancelToken((function(t){return e.request=t}))});case 3:a=t.sent,s=a.data,e.users=s.data,e.page=s.current_page,e.lastPage=s.last_page,e.total=s.total,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),axios.isCancel(t.t0)||(e.$notify({type:"error",text:"Unable to load species. Please try refreshing the page."}),console.error(t.t0));case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})),function(){var e=this,a=arguments;return new Promise((function(s,n){var r=t.apply(e,a);function i(t){c(r,s,n,i,o,"next",t)}function o(t){c(r,s,n,i,o,"throw",t)}i(void 0)}))})()},goTo:function(t){this.loading=!0,this.page=t,this.loadUsers()},sort:function(t){t===this.orderBy?this.orderDir="asc"===this.orderDir?"desc":"asc":(this.orderBy=t,this.orderDir="asc"),this.loadUsers()},sortIcon:function(t){return t!==this.orderBy?"swap-vertical":"asc"===this.orderDir?"arrow-up":"arrow-down"}}};const u=(0,a(1900).Z)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex mb-3"},[a("div",[a("h1",{staticClass:"page-title mb-0"},[t._v("Manage Users")]),t._v(" "),a("p",{staticClass:"mb-0 text-muted"},[t._v(t._s(t.total)+" users found")])]),t._v(" "),a("div",{staticClass:"ml-auto text-muted"},[t._v("\n            Page "+t._s(t.page)+" of "+t._s(t.lastPage)+"\n        ")])]),t._v(" "),a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-header d-flex p-2"},[a("div",{staticClass:"flex-grow-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search...",title:"Search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"card-body p-0"},[t.loading?a("div",{staticClass:"d-flex align-items-center justify-content-center p-3"},[a("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),0!==t.users.length||t.loading?t._e():a("p",{staticClass:"text-muted mb-0 p-3"},[t._v("\n                There are no users found.\n            ")]),t._v(" "),t.users.length>0&&!t.loading?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-middle mb-0"},[a("thead",[a("tr",[a("th",{staticStyle:{width:"55px"}}),t._v(" "),a("th",[a("a",{staticClass:"d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sort("name")}}},[a("span",{staticClass:"mr-1"},[t._v("Name")]),t._v(" "),a("icon",{attrs:{name:t.sortIcon("name")}})],1)]),t._v(" "),a("th",[a("a",{staticClass:"d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sort("sites_count")}}},[a("span",{staticClass:"mr-1"},[t._v("Sites")]),t._v(" "),a("icon",{attrs:{name:t.sortIcon("sites_count")}})],1)]),t._v(" "),a("th",[a("a",{staticClass:"d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sort("created_at")}}},[a("span",{staticClass:"mr-1"},[t._v("Member Since")]),t._v(" "),a("icon",{attrs:{name:t.sortIcon("created_at")}})],1)]),t._v(" "),a("th",[t._v("Role")])])]),t._v(" "),a("tbody",t._l(t.users,(function(e){return a("tr",{staticClass:"hover-visible-container"},[a("td",{staticStyle:{width:"55px"}},[a("avatar",{attrs:{user:e,tooltip:!1}})],1),t._v(" "),a("td",[a("router-link",{attrs:{to:"/app/users/"+e.id}},[a("div",[t._v(t._s(e.name))])]),t._v(" "),a("div",[a("a",{staticClass:"text-muted",attrs:{href:"mailto:"+e.email}},[t._v("\n                                    "+t._s(e.email)+"\n                                ")])])],1),t._v(" "),a("td",[t._v("\n                            "+t._s(e.sites_count)+"\n                        ")]),t._v(" "),a("td",[a("div",[t._v(t._s(e.member_since))])]),t._v(" "),a("td",[a("div",[t._v(t._s(e.role.name))])])])})),0)])]):t._e()])]),t._v(" "),a("pager",{attrs:{"last-page":t.lastPage,page:t.page},on:{change:function(e){return t.goTo(e)}}})],1)}),[],!1,null,"cf2edcd2",null).exports}}]);
//# sourceMappingURL=users.2e5e0a01b8d9d376.js.map