{"version":3,"file":"js/user.638a2920145a7dee.js","mappings":"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","sources":["webpack:///resources/js/components/Pager.vue","webpack:///./resources/js/components/Pager.vue?3b44","webpack:///./resources/js/components/Pager.vue?b905","webpack:///./resources/js/components/Pager.vue","webpack:///./resources/js/screens/User.vue","webpack:///resources/js/screens/User.vue","webpack:///./resources/js/screens/User.vue?7c1d","webpack:///./resources/js/screens/User.vue?c973"],"sourcesContent":["<template>\n  <nav aria-label=\"Page navigation\" v-if=\"hideIfEmpty ? lastPage > 1 : true\" class=\"d-flex w-100 justify-content-between align-items-center\">\n    <button class=\"btn btn-white\"\n            :disabled=\"page === 1\"\n            @click.prevent=\"previous()\"\n            type=\"button\">\n      Previous\n    </button>\n\n    <div>\n      <select class=\"custom-select w-auto\" v-model=\"currentPage\">\n        <option v-for=\"i in lastPage\" :value=\"i\">\n          Page {{ i }}\n        </option>\n      </select>\n    </div>\n\n    <button class=\"btn btn-white\"\n            :disabled=\"page === lastPage\"\n            @click.prevent=\"next()\"\n            type=\"button\">\n      Next\n    </button>\n  </nav>\n</template>\n\n<script>\nexport default {\n  name: 'Pager',\n\n  props: {\n    lastPage: {required: true, type: Number},\n    page    : {required: true, type: Number},\n    hideIfEmpty: {required: false, type: Boolean, default: true}\n  },\n\n  data() {\n    return {\n      currentPage: 1,\n    }\n  },\n\n  mounted() {\n    this.currentPage = this.page\n  },\n\n  watch: {\n    page(page) {\n      this.currentPage = page\n    },\n\n    currentPage(page) {\n      this.change(page)\n    },\n  },\n\n  methods: {\n    previous() {\n      if (this.page === 1) {\n        return\n      }\n\n      this.$emit('change', this.page - 1)\n    },\n\n    next() {\n      if (this.lastPage === this.page) {\n        return\n      }\n\n      this.$emit('change', this.page + 1)\n    },\n\n    change(page) {\n      if (this.page === page) {\n        return\n      }\n\n      this.$emit('change', page)\n    },\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pager.vue?vue&type=template&id=645860e9&scoped=true&\"\nimport script from \"./Pager.vue?vue&type=script&lang=js&\"\nexport * from \"./Pager.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"645860e9\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.hideIfEmpty ? _vm.lastPage > 1 : true)?_c('nav',{staticClass:\"d-flex w-100 justify-content-between align-items-center\",attrs:{\"aria-label\":\"Page navigation\"}},[_c('button',{staticClass:\"btn btn-white\",attrs:{\"disabled\":_vm.page === 1,\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.previous()}}},[_vm._v(\"\\n    Previous\\n  \")]),_vm._v(\" \"),_c('div',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentPage),expression:\"currentPage\"}],staticClass:\"custom-select w-auto\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.currentPage=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.lastPage),function(i){return _c('option',{domProps:{\"value\":i}},[_vm._v(\"\\n        Page \"+_vm._s(i)+\"\\n      \")])}),0)]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-white\",attrs:{\"disabled\":_vm.page === _vm.lastPage,\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.next()}}},[_vm._v(\"\\n    Next\\n  \")])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.loading)?_c('inline-spinner'):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.user)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xl-4 col-md-5\"},[_c('div',{staticClass:\"card mb-4\"},[_c('div',{staticClass:\"card-body d-flex align-items-center\"},[_c('avatar',{staticClass:\"flex-shrink-0\",attrs:{\"user\":_vm.user,\"tooltip\":false}}),_vm._v(\" \"),_c('div',{staticClass:\"ml-3\"},[_c('strong',[_vm._v(_vm._s(_vm.user.name))]),_vm._v(\" \"),_c('p',{staticClass:\"mb-0 text-muted\"},[_vm._v(_vm._s(`Member since ${_vm.user.member_since}`))]),_vm._v(\" \"),_c('a',{attrs:{\"href\":`mailto:${_vm.user.email}`}},[_vm._v(\"\\n                            \"+_vm._s(_vm.user.email)+\"\\n                        \")])])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"card mb-3\"},[_c('div',{staticClass:\"card-body rounded\"},[_c('p',{staticClass:\"font-weight-bold text-dark text-sm mb-1\"},[_vm._v(\"Roles\")]),_vm._v(\" \"),_vm._l((_vm.roles),function(role,index){return _c('div',{staticClass:\"d-flex align-items-center\"},[_c('div',{staticClass:\"custom-control custom-radio\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userRole),expression:\"userRole\"}],staticClass:\"custom-control-input\",attrs:{\"type\":\"radio\",\"id\":`role-${index}`,\"name\":\"role-select\"},domProps:{\"value\":`${role.id}`,\"checked\":_vm._q(_vm.userRole,`${role.id}`)},on:{\"change\":[function($event){_vm.userRole=`${role.id}`},_vm.setRole]}}),_vm._v(\" \"),_c('label',{staticClass:\"custom-control-label\",attrs:{\"for\":`role-${index}`}},[_vm._v(\"\\n                                \"+_vm._s(role.name)+\"\\n                            \")])])])})],2)])]),_vm._v(\" \"),_c('div',{staticClass:\"col-xl-8 col-md-7\"},[_c('div',{staticClass:\"d-flex\"},[_c('h1',{staticClass:\"page-title mb-3\"},[_vm._v(\"Sites\")]),_vm._v(\" \"),_c('div',{staticClass:\"ml-auto text-muted\"},[_vm._v(\"\\n                    Page \"+_vm._s(_vm.page)+\" of \"+_vm._s(_vm.lastPage)+\"\\n                \")])]),_vm._v(\" \"),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header d-flex p-2\"},[_c('div',{staticClass:\"flex-grow-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],staticClass:\"form-control\",attrs:{\"type\":\"search\",\"placeholder\":\"Search...\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing)return;_vm.search=$event.target.value}}})])]),_vm._v(\" \"),(_vm.loading)?_c('p',{staticClass:\"mb-0 p-4\"},[_c('inline-spinner',{staticClass:\"text-primary\"})],1):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.sites.length === 0)?_c('p',{staticClass:\"mb-0 p-4 text-muted\"},[_vm._v(\"\\n                    User does not have any sites.\\n                \")]):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.sites.length > 0)?_c('table',{staticClass:\"table mb-0 table-middle table-hover\"},[_vm._m(0),_vm._v(\" \"),_c('tbody',_vm._l((_vm.sites),function(site){return _c('tr',{staticClass:\"on-hover\"},[_c('td',[_c('router-link',{attrs:{\"to\":`/app/sites/${site.id}`}},[_c('strong',[_vm._v(_vm._s(site.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"text-muted\"},[_vm._v(\"\\n                                    \"+_vm._s(site.county.name)+\", \"+_vm._s(site.state.code)+\"\\n                                \")])],1),_vm._v(\" \"),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(site.plots_count))]),_vm._v(\" \"),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(site.plants_count))])])}),0)]):_vm._e()]),_vm._v(\" \"),_c('pager',{attrs:{\"last-page\":_vm.lastPage,\"page\":_vm.page},on:{\"change\":function($event){return _vm.goTo($event)}}})],1)]):_vm._e()],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{staticStyle:{\"width\":\"100%\"}},[_vm._v(\"Name\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Plots\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Plants\")]),_vm._v(\" \"),_c('th')])])\n}]\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <inline-spinner v-if=\"loading\"/>\n        <div class=\"row\" v-if=\"!loading && user\">\n            <div class=\"col-xl-4 col-md-5\">\n                <div class=\"card mb-4\">\n                    <div class=\"card-body d-flex align-items-center\">\n                        <avatar class=\"flex-shrink-0\" :user=\"user\" :tooltip=\"false\"/>\n                        <div class=\"ml-3\">\n                            <strong>{{ user.name }}</strong>\n                            <p class=\"mb-0 text-muted\">{{ `Member since ${user.member_since}` }}</p>\n                            <a :href=\"`mailto:${user.email}`\">\n                                {{ user.email }}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"card mb-3\">\n                    <div class=\"card-body rounded\">\n                        <p class=\"font-weight-bold text-dark text-sm mb-1\">Roles</p>\n                        <div v-for=\"(role, index) in roles\" class=\"d-flex align-items-center\">\n                            <div class=\"custom-control custom-radio\">\n                                <input type=\"radio\"\n                                       :id=\"`role-${index}`\"\n                                       name=\"role-select\"\n                                       class=\"custom-control-input\"\n                                       :value=\"`${role.id}`\"\n                                       v-model=\"userRole\"\n                                       v-on:change=\"setRole\">\n                                <label class=\"custom-control-label\"\n                                       :for=\"`role-${index}`\">\n                                    {{ role.name }}\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-xl-8 col-md-7\">\n                <div class=\"d-flex\">\n                    <h1 class=\"page-title mb-3\">Sites</h1>\n                    <div class=\"ml-auto text-muted\">\n                        Page {{ page }} of {{ lastPage }}\n                    </div>\n                </div>\n                <div class=\"card\">\n                    <div class=\"card-header d-flex p-2\">\n                        <div class=\"flex-grow-1\">\n                            <input type=\"search\" class=\"form-control\" v-model=\"search\" placeholder=\"Search...\">\n                        </div>\n                    </div>\n                    <p class=\"mb-0 p-4\" v-if=\"loading\">\n                        <inline-spinner class=\"text-primary\"/>\n                    </p>\n                    <p class=\"mb-0 p-4 text-muted\" v-if=\"!loading && sites.length === 0\">\n                        User does not have any sites.\n                    </p>\n                    <table class=\"table mb-0 table-middle table-hover\" v-if=\"!loading && sites.length > 0\">\n                        <thead>\n                        <tr>\n                            <th style=\"width: 100%\">Name</th>\n                            <th>Plots</th>\n                            <th>Plants</th>\n                            <th></th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                            <tr v-for=\"site in sites\" class=\"on-hover\">\n                                <td>\n                                    <router-link :to=\"`/app/sites/${site.id}`\">\n                                        <strong>{{ site.name }}</strong>\n                                    </router-link>\n                                    <div class=\"text-muted\">\n                                        {{ site.county.name }}, {{ site.state.code }}\n                                    </div>\n                                </td>\n                                <td class=\"text-right\">{{ site.plots_count }}</td>\n                                <td class=\"text-right\">{{ site.plants_count }}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <pager @change=\"goTo($event)\"\n                       :last-page=\"lastPage\"\n                       :page=\"page\"/>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n  import Avatar from '../components/Avatar'\n  import InlineSpinner from '../components/InlineSpinner'\n  import Pager from '../components/Pager'\n\n  export default {\n    name: 'User',\n\n    components: {InlineSpinner, Avatar, Pager},\n\n    data() {\n      return {\n        user        : null,\n        userRole    : '',\n        sites       : [],\n        roles       : [],\n        loading     : true,\n        search      : '',\n        page        : 1,\n        lastPage    : 1,\n      }\n    },\n\n    mounted() {\n      this.loadUser()\n      this.loadSites()\n      this.loadRoles()\n      this.loading = false\n    },\n\n    watch: {\n      search() {\n        this.loadSites()\n      },\n    },\n\n    methods: {\n      async loadUser() {\n        try {\n          const id      = this.$route.params.id\n          const {data}  = await axios.get(`/web/users/${id}`)\n          this.user     = data\n          this.userRole = `${this.user.role_id}`\n        } catch (e) {\n          console.error(e)\n          this.$notify({\n            text: 'Unable to process this request. Please try refreshing the page.',\n            type: 'error',\n          })\n        }\n      },\n\n      async loadSites() {\n        try {\n          const id     = this.$route.params.id\n          const {data} = await axios.get(`/web/user/${id}/sites`, {\n            params: {\n              search: this.search,\n              page  : this.page,\n            }\n          })\n          this.sites    = data.data\n          this.page     = data.current_page\n          this.lastPage = data.last_page\n        } catch (e) {\n          console.error(e)\n          this.$notify({\n            text: 'Unable to process this request. Please try refreshing the page.',\n            type: 'error',\n          })\n        }\n      },\n\n      async loadRoles() {\n        try {\n          const {data} = await axios.get(`/web/roles`)\n          this.roles    = data\n        } catch (e) {\n          console.error(e)\n          this.$notify({\n            text: 'Unable to process this request. Please try refreshing the page.',\n            type: 'error',\n          })\n        }\n      },\n\n      async setRole() {\n        try {\n          const id      = this.$route.params.id\n          await axios.patch(`/web/user/${id}/role`, {\n            role: this.userRole,\n          })\n          \n          this.$notify({\n              text: 'Role updated successfully.',\n              type: 'success'\n          })\n        } catch (e) {\n          console.error(e)\n          this.$notify({\n            text: 'Unable to process this request. Please try refreshing the page.',\n            type: 'error',\n          })\n        }\n      },\n\n      goTo(page) {\n        this.loading = true\n        this.page    = page\n        this.loadSites()\n        this.loading = false\n      },\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=34204a09&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34204a09\",\n  null\n  \n)\n\nexport default component.exports"],"names":["name","props","lastPage","required","type","page","hideIfEmpty","data","currentPage","mounted","watch","methods","previous","next","change","_vm","this","_c","_self","staticClass","attrs","on","$event","preventDefault","_v","directives","rawName","value","expression","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","_value","multiple","_l","i","domProps","_s","_e","components","InlineSpinner","Avatar","Pager","user","userRole","sites","roles","loading","search","loadUser","id","axios","console","text","loadSites","params","loadRoles","setRole","role","goTo","member_since","email","index","_q","composing","length","_m","site","county","state","code","plots_count","plants_count","staticStyle"],"sourceRoot":""}