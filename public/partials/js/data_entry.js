(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"8ORw":function(t,e,a){var n=a("muzd");"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,r);n.locals&&(t.exports=n.locals)},"C+gu":function(t,e,a){"use strict";var n=a("o0o1"),r=a.n(n),s=a("ke3Z"),o=a("MEn4"),i=a("klO2"),l=a("JUFj"),c=a("wXy6"),u=a("1MU1"),d=a("mS+z"),p=a("vQtE"),m=a("yoRh"),f=a("mXro"),v=a("TTxJ"),_=a("cv7c"),h=a("QEud"),g=a.n(h),b=a("wd/R"),y=a.n(b);function w(t,e,a,n,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,r)}function x(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function o(t){w(s,n,r,o,i,"next",t)}function i(t){w(s,n,r,o,i,"throw",t)}o(void 0)}))}}var C={name:"PlantForm",components:{DatePicker:g.a,InlineSpinner:v.a,Dropdown:f.a,Close:m.a,ModalTitle:p.a,ModalFooter:d.a,ModalBody:u.a,ModalHeader:c.a,ModalCard:l.a,Modal:i.a,Required:o.a,Icon:_.a},props:{plot:{required:!1,type:Object},plant:{required:!1,type:Object}},watch:{speciesSearch:function(){this.loadSpecies()},date:function(t){this.form.date=t?y()(t).format("YYYY-MM-DD"):null},"form.species_id":{handler:function(){this.form.errors.clear("species_id")}},"form.plant_type_id":{handler:function(){this.loadSpecies()}}},data:function(){var t=window.avid.last_entry;return{plants:[],saving:!1,date:t?y()(t).toDate():null,form:new s.a({new_measurement:!1,date:window.avid.last_entry,height:"",new_species:!1,new_species_name:"",plant_type_id:"",tag:"",species_id:"",quadrant:""}),loadingPlants:!1,loadingSpecies:!1,species:[],speciesSearch:""}},mounted:function(){var t=this;return x(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadTypes();case 2:t.plant&&t.form.setDefault(t.plant);case 3:case"end":return e.stop()}}),e)})))()},methods:{loadTypes:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingPlants=!0,e.prev=1,e.next=4,axios.get("/web/plant-types");case 4:return a=e.sent,n=a.data,t.plants=n,t.form.plant_type_id=n[0].id,e.next=10,t.loadSpecies();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.$alert("Unable to load form. Please try refreshing the page.");case 15:t.loadingPlants=!1;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},loadSpecies:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/web/species",{params:{search:t.speciesSearch,plant_type_id:t.form.plant_type_id}});case 3:a=e.sent,n=a.data,t.species=n.data.map((function(t){return{label:t.name,value:t.id}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},save:function(){this.plant?this.update():this.create()},create:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.saving=!0,e.prev=1,e.next=4,t.form.post("/web/plots/".concat(t.plot.id,"/plants"));case 4:a=e.sent,n=a.data,t.$emit("create",n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status||t.$notify({text:"Unable to create plant. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 13:t.saving=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},update:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.saving=!0,e.prev=1,e.next=4,t.form.put("/web/plants/".concat(t.plant.id));case 4:a=e.sent,n=a.data,t.$emit("update",n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status||t.$notify({text:"Unable to create plant. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 13:t.saving=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}},P=a("KHd+"),k=Object(P.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{on:{close:function(e){return t.$emit("close")}}},[a("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("modal-card",[a("modal-header",[t.plant?t._e():a("modal-title",[t._v("Add A Plant")]),t._v(" "),t.plant?a("modal-title",[t._v("Update Plant #"+t._s(t.plant.tag))]):t._e(),t._v(" "),a("close",{on:{click:function(e){return e.preventDefault(),t.$emit("close")}}})],1),t._v(" "),t.loadingPlants||t.loadingSpecies?a("modal-body",{staticClass:"d-flex justify-content-center align-items-center"},[a("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),t.loadingSpecies||t.loadingPlants?t._e():a("modal-body",{staticClass:"position-static"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"plant"}},[t._v("\n                        Plant Type\n                        "),a("required")],1),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.plant_type_id,expression:"form.plant_type_id"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("plant_type_id")},attrs:{id:"plant",name:"plant_type_id",disabled:t.loadingPlants},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"plant_type_id",e.target.multiple?a:a[0])}}},t._l(t.plants,(function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0),t._v(" "),t.form.errors.has("plant_type_id")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("plant_type_id"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"row position-static"},[a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"tag-num"}},[t._v("\n                            Tag Number\n                            "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tag,expression:"form.tag"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("tag")},attrs:{type:"text",id:"tag-num",name:"plant_type_id",placeholder:"Tag #"},domProps:{value:t.form.tag},on:{input:function(e){e.target.composing||t.$set(t.form,"tag",e.target.value)}}}),t._v(" "),t.form.errors.has("tag")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("tag"))+"\n                        ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group col-6 position-static"},[a("label",{attrs:{for:"quadrant"}},[t._v("\n                            Quadrant\n                            "),a("required")],1),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.quadrant,expression:"form.quadrant"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("quadrant")},attrs:{name:"quadrant",id:"quadrant"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"quadrant",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select a Quadrant")]),t._v(" "),a("option",{attrs:{value:"Northeast"}},[t._v("Northeast")]),t._v(" "),a("option",{attrs:{value:"Northwest"}},[t._v("Northwest")]),t._v(" "),a("option",{attrs:{value:"Southeast"}},[t._v("Southeast")]),t._v(" "),a("option",{attrs:{value:"Southwest"}},[t._v("Southwest")])]),t._v(" "),t.form.errors.has("quadrant")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("quadrant"))+"\n                        ")]):t._e()]),t._v(" "),t.form.new_species?t._e():a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"species"}},[t._v("\n                            Species\n                            "),a("required")],1),t._v(" "),a("dropdown",{staticClass:"mb-1",attrs:{id:"species",autocomplete:!0,lodaing:t.loadingSpecies,options:t.species,error:t.form.errors.has("species_id")},on:{search:function(e){t.speciesSearch=e}},model:{value:t.form.species_id,callback:function(e){t.$set(t.form,"species_id",e)},expression:"form.species_id"}}),t._v(" "),t.form.errors.has("species_id")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("species_id"))+"\n                        ")]):t._e()],1),t._v(" "),t.form.new_species?a("div",{staticClass:"form-group col-6 flex-column"},[a("label",{attrs:{for:"new-species"}},[t._v("\n                            Species\n                            "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.new_species_name,expression:"form.new_species_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("new_species_name")},attrs:{type:"text",id:"new-species",name:"new-species",placeholder:"Species Name"},domProps:{value:t.form.new_species_name},on:{input:function(e){e.target.composing||t.$set(t.form,"new_species_name",e.target.value)}}}),t._v(" "),t.form.errors.has("new_species_name")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("new_species_name"))+"\n                        ")]):t._e()]):t._e(),t._v(" "),t.form.new_species?a("button",{staticClass:"btn btn-link mt-auto mb-3 ml-3",on:{click:function(e){e.preventDefault(),t.form.new_species=!1}}},[a("span",[t._v("\n                                Cancel Species Creation\n                            ")])]):t._e()]),t._v(" "),t.form.new_species?t._e():a("p",{staticClass:"text-muted"},[t._v("\n                    If you cannot find the species from the dropdown,\n                    "),a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.form.new_species=!0}}},[t._v(" you can click here to create a new one.")])]),t._v(" "),this.plant||t.form.new_measurement?t._e():a("button",{staticClass:"btn btn-link",on:{click:function(e){e.preventDefault(),t.form.new_measurement=!0}}},[a("icon",{attrs:{name:"add"}}),t._v(" "),a("span",[t._v("Add a Measurement")])],1),t._v(" "),!this.plant&&t.form.new_measurement?a("div",{staticClass:"row position-static"},[a("div",{staticClass:"form-group col-lg-6 position-static"},[a("label",[t._v("\n                            Date\n                            "),a("required")],1),t._v(" "),a("date-picker",{attrs:{color:"green","max-date":new Date,"input-props":{class:"form-control"+(t.form.errors.has("date")?" is-invalid":""),placeholder:"Collection Date"}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),t.form.errors.has("date")?a("p",{staticClass:"mb-0 form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("date"))+"\n                        ")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"height"}},[t._v("\n                            Height (inches)\n                            "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group input-appended"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.height,expression:"form.height"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("height")},attrs:{id:"height",type:"text",placeholder:"Height"},domProps:{value:t.form.height},on:{input:function(e){e.target.composing||t.$set(t.form,"height",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[t._v("in.")])])]),t._v(" "),t.form.errors.has("height")?a("p",{staticClass:"mb-0 form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("height"))+"\n                        ")]):t._e()])]):t._e(),t._v(" "),t.form.new_measurement?a("button",{staticClass:"btn btn-link",on:{click:function(e){e.preventDefault(),t.form.new_measurement=!1}}},[a("span",[t._v("Cancel Measurement Creation")])]):t._e()]),t._v(" "),a("modal-footer",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.saving}},[t.saving?a("inline-spinner"):t._e(),t._v("\n                    Save\n                ")],1),t._v(" "),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n                    Cancel\n                ")])])],1)],1)])}),[],!1,null,"38b197b5",null);e.a=k.exports},"Hp/o":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.height-auto[data-v-23dc7042] {\n    height: auto !important;\n}\n",""])},N0V6:function(t,e,a){"use strict";var n=a("NlcB");a.n(n).a},NlcB:function(t,e,a){var n=a("Hp/o");"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,r);n.locals&&(t.exports=n.locals)},Ol2u:function(t,e,a){"use strict";e.a={seasons:["0","1 to 2","Greater than or equal to 3"],percentages:["0-9%","10-19%","20-29%","30-39%","40-49%","50-59%","60-69%","70-79%","80-89%","90-100%"],hours:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],minutes:["00","05","10","15","20","25","30","35","40","45","50","55"],timezones:["EST","CST","MST","PST"],wmus:["1A","1C","2A","3A","3C","3F","3G","3H","3J","3K","3M","3N","3P","3R","3S","4A","4B","4C","4F","4G","4H","4J","4K","4L","4O","4P","4R","4S","4T","4U","4W","4Y","4Z","5A","5C","5F","5G","5H","5J","5R","5S","5T","6A","6C","6F","6G","6H","6J","6K","6N","6P","6R","6S","7A","7F","7H","7J","7M","7P","7R","7S","8A","8C","8F","8G","8H","8J","8M","8N","8P","8R","8S","8T","8W","8X","8Y","9A","9C","9F","9G","9H","9J","9K","9M","9N","9P","9R"," 9S","9T","9W","9X","9Y"]}},RQW6:function(t,e,a){"use strict";var n=a("o0o1"),r=a.n(n),s=a("klO2"),o=a("JUFj"),i=a("wXy6"),l=a("1MU1"),c=a("mS+z"),u=a("vQtE"),d=a("yoRh"),p=a("MEn4"),m=a("ke3Z"),f=a("QEud"),v=a.n(f),_=a("TTxJ"),h=a("wd/R"),g=a.n(h);function b(t,e,a,n,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,r)}function y(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function o(t){b(s,n,r,o,i,"next",t)}function i(t){b(s,n,r,o,i,"throw",t)}o(void 0)}))}}function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function x(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){C(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function C(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var P={name:"MeasurementForm",components:{InlineSpinner:_.a,Required:p.a,Close:d.a,ModalTitle:u.a,ModalFooter:c.a,ModalBody:l.a,ModalHeader:i.a,ModalCard:o.a,Modal:s.a,DatePicker:v.a},props:{plant:{required:!0,type:Object},measurement:{required:!1,type:Object}},beforeMount:function(){this.measurement&&(this.form.setDefault(x(x({},this.measurement),{},{is_located:this.measurement.is_located?"1":"0",is_alive:null===this.measurement.is_alive?"":this.measurement.is_alive?"1":"0",date:this.measurement.date?g()(this.measurement.date).format("YYYY-MM-DD"):null})),this.date=this.measurement.date?g()(this.measurement.date).toDate():null)},data:function(){var t=window.avid.last_entry;return{saving:!1,date:t?g()(t).toDate():null,form:new m.a({is_located:"0",is_alive:"",date:window.avid.last_entry,height:""})}},watch:{date:function(t){this.form.date=t?g()(t).format("YYYY-MM-DD"):null}},methods:{save:function(){this.measurement?this.update():this.create()},create:function(){var t=this;return y(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.form.errors.clearAll(),t.saving=!0,e.prev=2,e.next=5,t.form.post("/web/plants/".concat(t.plant.id,"/measurements"));case 5:a=e.sent,n=a.data,window.avid.last_entry=n.date?g()(n.date).format("YYYY-MM-DD"):null,t.$emit("create",n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0.response&&422!==e.t0.response.status&&t.$notify({text:"Unable to save data. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 15:t.saving=!1;case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))()},update:function(){var t=this;return y(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.form.errors.clearAll(),t.saving=!0,e.prev=2,e.next=5,t.form.put("/web/measurements/".concat(t.measurement.id));case 5:a=e.sent,n=a.data,t.$emit("update",n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.response&&422!==e.t0.response.status&&t.$notify({text:"Unable to save data. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 14:t.saving=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()}}},k=a("KHd+"),S=Object(k.a)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{on:{close:function(e){return t.$emit("close")}}},[a("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.save(e)},keydown:function(e){return t.form.errors.clear(e.target.name)}}},[a("modal-card",[a("modal-header",[a("modal-title",[t._v("New Measurement")]),t._v(" "),a("close",{on:{click:function(e){return e.preventDefault(),t.$emit("close")}}})],1),t._v(" "),a("modal-body",{staticClass:"position-static"},[a("div",{staticClass:"row position-static"},[a("div",{staticClass:"form-group col-lg-6 position-static"},[a("label",[t._v("\n                            Date\n                            "),a("required")],1),t._v(" "),a("date-picker",{attrs:{color:"green","max-date":new Date,"input-props":{class:"form-control"+(t.form.errors.has("date")?" is-invalid":""),placeholder:"Collection Date"}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),t.form.errors.has("date")?a("p",{staticClass:"mb-0 form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("date"))+"\n                        ")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"located"}},[t._v("\n                            Was Plant Located?\n                            "),a("required")],1),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.is_located,expression:"form.is_located"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("is_located")},attrs:{name:"is_located",id:"located"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"is_located",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[t._v("No")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Yes")])]),t._v(" "),t.form.errors.has("is_located")?a("p",{staticClass:"mb-0 form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("is_located"))+"\n                        ")]):t._e()]),t._v(" "),"1"===t.form.is_located?a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"alive"}},[t._v("\n                            Was Plant Alive?\n                            "),a("required")],1),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.is_alive,expression:"form.is_alive"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("is_located")},attrs:{name:"is_alive",id:"alive"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"is_alive",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select One")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("No")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Yes")])]),t._v(" "),t.form.errors.has("is_alive")?a("p",{staticClass:"mb-0 form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("is_alive"))+"\n                        ")]):t._e()]):t._e(),t._v(" "),"1"===t.form.is_located?a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"height"}},[t._v("\n                            Height (inches)\n                            "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group input-appended"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.height,expression:"form.height"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("height")},attrs:{id:"height",type:"text"},domProps:{value:t.form.height},on:{input:function(e){e.target.composing||t.$set(t.form,"height",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[t._v("in.")])])]),t._v(" "),t.form.errors.has("height")?a("p",{staticClass:"mb-0 form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("height"))+"\n                        ")]):t._e()]):t._e()])]),t._v(" "),a("modal-footer",{staticClass:"d-flex"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.saving}},[t.saving?a("inline-spinner"):t._e(),t._v(" "),a("span",[t._v("Save")])],1),t._v(" "),a("button",{staticClass:"ml-auto btn btn-light",attrs:{type:"button",disabled:t.saving},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n                    Cancel\n                ")])])],1)],1)])}),[],!1,null,"e960c790",null);e.a=S.exports},gdrP:function(t,e,a){"use strict";var n=a("o0o1"),r=a.n(n),s=a("klO2"),o=a("JUFj"),i=a("wXy6"),l=a("1MU1"),c=a("mS+z"),u=a("vQtE"),d=a("yoRh"),p=a("ke3Z"),m=a("MEn4"),f=a("cv7c"),v=a("Ol2u"),_=a("TTxJ");function h(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,n;return e=t,n=[{key:"load",value:function(e){return(new t).loadMap(e)}}],(a=[{key:"loadMap",value:function(t){if(window.google&&window.google.maps)t();else{var e=document.createElement("script"),a=window.avid.keys.maps;e.async=!0,e.defer=!0,e.type="text/javascript",e.onload=t,e.src="https://maps.googleapis.com/maps/api/js?key=".concat(a),document.head.appendChild(e)}}}])&&h(e.prototype,a),n&&h(e,n),t}(),b={name:"ClickableMap",props:{value:{required:!1,type:Object,default:function(){return{latitude:40.354388,longitude:-95.998237}}}},mounted:function(){var t=this,e={latitude:40.354388,longitude:-95.998237};this.value.latitude&&this.value.longitude&&(e=this.value),g.load((function(){var a=new google.maps.LatLng(e.latitude,e.longitude);t.map=new google.maps.Map(t.$refs.map,{zoom:4,center:a}),t.updateTimeout=null,t.map.addListener("click",(function(e){t.updateTimeout=setTimeout((function(){return t.selectLocation(e)}),200)})),t.map.addListener("dblclick",(function(){clearTimeout(t.updateTimeout)}))})),this.value.latitude&&this.value.longitude&&(this.marker=new google.maps.Marker({map:this.map,position:new google.maps.LatLng(e.latitude,e.longitude)}))},data:function(){return{pos:{latitude:40.354388,longitude:-95.998237},map:null,marker:null,updateTimeout:null}},watch:{"value.latitude":{handler:function(){this.setMarkerPosition(),this.panTo()}},"value.longitude":{handler:function(){this.setMarkerPosition(),this.panTo()}}},methods:{selectLocation:function(t){var e=t.latLng;this.$emit("input",{latitude:e.lat(),longitude:e.lng()})},setMarkerPosition:function(){var t=this.value,e=this.marker&&this.marker.getPosition();if(e){var a=e.lng(),n=e.lng();t.latitude===a&&t.longitude===n||this.marker.setPosition(new google.maps.LatLng(t.latitude,t.longitude))}else this.marker=new google.maps.Marker({map:this.map,position:new google.maps.LatLng(t.latitude,t.longitude)})},panTo:function(){var t=this.value;t.latitude&&t.longitude&&this.map.panTo(new google.maps.LatLng(t.latitude,t.longitude))}}},y=a("KHd+");function w(t,e,a,n,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,r)}function x(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function o(t){w(s,n,r,o,i,"next",t)}function i(t){w(s,n,r,o,i,"throw",t)}o(void 0)}))}}var C={name:"PlotForm",components:{ClickableMap:Object(y.a)(b,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"map",staticStyle:{height:"100px"}})}),[],!1,null,"e5b1aa0e",null).exports,InlineSpinner:_.a,Icon:f.a,Required:m.a,Close:d.a,ModalTitle:u.a,ModalFooter:c.a,ModalBody:l.a,ModalHeader:i.a,ModalCard:o.a,Modal:s.a},props:{site:{required:!1},plot:{required:!1,type:Object,default:null}},data:function(){return{loading:!1,form:new p.a({number:"",latitude:null,longitude:null,basal_area:"",ground_cover:"",subcanopy:"",canopy:"",is_protected:"",protection_seasons:"",recorders:""}),options:v.a,showMap:!1}},mounted:function(){this.plot&&this.form.setDefault(this.plot)},methods:{submit:function(){this.plot?this.update():this.create()},create:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.form.post("/web/sites/".concat(t.site.id,"/plots"));case 4:a=e.sent,n=a.data,t.$notify({type:"success",text:"Plot created successfully"}),t.$emit("create",n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status||(t.$notify({type:"error",text:"Unable to process the request. Please try refreshing the page."}),console.error(e.t0));case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},update:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.form.put("/web/plots/".concat(t.plot.id));case 4:a=e.sent,n=a.data,t.$notify({type:"success",text:"Plot updated successfully"}),t.$emit("update",n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status||(t.$notify({type:"error",text:"Unable to process the request. Please try refreshing the page."}),console.error(e.t0));case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},setGpsFromMap:function(t){this.form.latitude=t.latitude,this.form.longitude=t.longitude}}},P=Object(y.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{medium:""},on:{close:function(e){return t.$emit("close")}}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()},keydown:function(e){e.target&&t.form.errors.clear(e.target.name)}}},[a("modal-card",[a("modal-header",[t.plot?a("modal-title",[t._v('Edit "Plot '+t._s(t.plot.number)+'"')]):a("modal-title",[t._v("New Plot")]),t._v(" "),a("close",{on:{click:function(e){return t.$emit("close")}}})],1),t._v(" "),a("modal-body",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"number"}},[t._v("\n                        Plot Number\n                        "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.number,expression:"form.number"}],class:["form-control",{"is-invalid":t.form.errors.has("number")}],attrs:{type:"text",name:"number",id:"number",placeholder:"E,g. 36"},domProps:{value:t.form.number},on:{input:function(e){e.target.composing||t.$set(t.form,"number",e.target.value)}}}),t._v(" "),t.form.errors.has("number")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("number"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-5"},[a("div",{staticClass:"d-flex align-items-center mb-1"},[a("div",[a("p",{staticClass:"mb-0"},[a("strong",[t._v("GPS Location")])]),t._v(" "),a("div",{staticClass:"mb-0"},[a("small",{staticClass:"text-muted"},[t._v("You may use the map to visually select the location.")])])])]),t._v(" "),a("div",{staticClass:"mb-2 form-group"},[a("label",{attrs:{for:"latitude"}},[t._v("\n                                Latitude\n                                "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.latitude,expression:"form.latitude"}],class:["form-control",{"is-invalid":t.form.errors.has("latitude")}],attrs:{type:"text",name:"latitude",id:"latitude",placeholder:"E,g. -36.898723"},domProps:{value:t.form.latitude},on:{input:function(e){e.target.composing||t.$set(t.form,"latitude",e.target.value)}}}),t._v(" "),t.form.errors.has("latitude")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                                "+t._s(t.form.errors.first("latitude"))+"\n                            ")]):t._e()]),t._v(" "),a("div",{staticClass:"mb-0 form-group"},[a("label",{attrs:{for:"longitude"}},[t._v("\n                                Longitude\n                                "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.longitude,expression:"form.longitude"}],class:["form-control",{"is-invalid":t.form.errors.has("longitude")}],attrs:{type:"text",name:"longitude",id:"longitude",placeholder:"E,g. -36.898723"},domProps:{value:t.form.longitude},on:{input:function(e){e.target.composing||t.$set(t.form,"longitude",e.target.value)}}}),t._v(" "),t.form.errors.has("longitude")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                                "+t._s(t.form.errors.first("longitude"))+"\n                            ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("small",{staticClass:"text-muted"},[t._v("When entering coordinates manually, please verify the location on the map")])])]),t._v(" "),a("div",{staticClass:"col-7"},[a("clickable-map",{staticClass:"map-height map-mini mb-3",attrs:{value:{latitude:t.form.latitude,longitude:t.form.longitude}},on:{input:function(e){return t.setGpsFromMap(e)}}})],1)]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"ground_cover"}},[t._v("\n                        Ground and Shrub Cover\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.ground_cover,expression:"form.ground_cover"}],class:["form-control",{"is-invalid":t.form.errors.has("ground_cover")}],attrs:{type:"text",name:"ground_cover",id:"ground_cover"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"ground_cover",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),t._l(t.options.percentages,(function(e){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2)]),t._v(" "),t.form.errors.has("ground_cover")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("ground_cover"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"subcanopy"}},[t._v("\n                        Subcanopy\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.subcanopy,expression:"form.subcanopy"}],class:["form-control",{"is-invalid":t.form.errors.has("subcanopy")}],attrs:{type:"text",name:"subcanopy",id:"subcanopy"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"subcanopy",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),t._l(t.options.percentages,(function(e){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2)]),t._v(" "),t.form.errors.has("subcanopy")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("subcanopy"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"canopy"}},[t._v("\n                        Canopy\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.canopy,expression:"form.canopy"}],class:["form-control",{"is-invalid":t.form.errors.has("canopy")}],attrs:{type:"text",name:"canopy",id:"canopy"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"canopy",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),t._l(t.options.percentages,(function(e){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2)]),t._v(" "),t.form.errors.has("canopy")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("canopy"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"is_protected"}},[t._v("\n                        Is plot enclosed or protected from deer?\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.is_protected,expression:"form.is_protected"}],class:["form-control",{"is-invalid":t.form.errors.has("is_protected")}],attrs:{type:"text",name:"is_protected",id:"is_protected"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"is_protected",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Yes")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("No")])])]),t._v(" "),t.form.errors.has("is_protected")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("is_protected"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"protection_seasons"}},[t._v("\n                        If yes, for how many growing seasons?\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.protection_seasons,expression:"form.protection_seasons"}],class:["form-control",{"is-invalid":t.form.errors.has("protection_seasons")}],attrs:{type:"text",name:"protection_seasons",id:"protection_seasons"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"protection_seasons",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),t._l(t.options.seasons,(function(e){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2)]),t._v(" "),t.form.errors.has("protection_seasons")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("protection_seasons"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"recorders"}},[t._v("Recorders")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.recorders,expression:"form.recorders"}],staticClass:"form-control",attrs:{type:"text",name:"recorders",id:"recorders",placeholder:"Type recorders"},domProps:{value:t.form.recorders},on:{input:function(e){e.target.composing||t.$set(t.form,"recorders",e.target.value)}}}),t._v(" "),t.form.errors.has("owner_contact")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("owner_contact"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"basal_area"}},[t._v("\n                        Basal Area\n                    ")]),t._v(" "),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.basal_area,expression:"form.basal_area"}],class:["form-control",{"is-invalid":t.form.errors.has("basal_area")}],attrs:{type:"text",name:"basal_area",id:"basal_area",placeholder:"E,g. 36"},domProps:{value:t.form.basal_area},on:{input:function(e){e.target.composing||t.$set(t.form,"basal_area",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[t._v("\n                                ft"),a("sup",[t._v("2")]),t._v("/ac\n                            ")])])]),t._v(" "),t.form.errors.has("basal_area")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("basal_area"))+"\n                    ")]):t._e()])]),t._v(" "),a("modal-footer",{staticClass:"d-flex"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.loading}},[t.loading?a("inline-spinner"):t._e(),t._v("\n                    Save\n                ")],1),t._v(" "),a("button",{staticClass:"btn btn-light ml-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("Close")])])],1)],1)])}),[],!1,null,"4021509e",null);e.a=P.exports},mBzz:function(t,e,a){"use strict";var n=a("P1tU"),r={name:"TokensField",props:{options:{required:!0,type:Array},id:{required:!1,type:String},value:{required:!1,type:Array},tags:{required:!1,type:Boolean,default:!1},disabled:{required:!1,type:Boolean,default:!1},placeholder:{required:!1,type:String,default:"Search..."}},components:{Select2:n.a},data:function(){return{selects:[]}},watch:{value:function(){this.selects=this.value}},methods:{onChange:function(t){this.$emit("input",t)}}},s=(a("N0V6"),a("KHd+")),o=Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form-group"},[a("Select2",{attrs:{id:t.id+"_select",options:t.options,placeholder:t.placeholder,disabled:t.disabled,settings:{multiple:"true",tags:t.tags,theme:"bootstrap4"}},on:{change:function(e){return t.onChange(e)}},model:{value:t.selects,callback:function(e){t.selects=e},expression:"selects"}})],1)])}),[],!1,null,"23dc7042",null);e.a=o.exports},mXro:function(t,e,a){"use strict";var n=a("cv7c"),r={name:"Dropdown",components:{InlineSpinner:a("TTxJ").a,Icon:n.a},props:{options:{required:!0,type:Array},value:{required:!1,default:null},placeholder:{required:!1,type:String,default:"Select"},emptyMessage:{required:!1,type:String,default:"No results found. Try adjusting your search terms."},endMessage:{required:!1,type:String,default:""},disabled:{required:!1,type:Boolean,default:!1},autocomplete:{required:!1,type:Boolean,default:!1},loading:{required:!1,type:Boolean,default:!1},error:{required:!1,type:Boolean,default:!1},maxWidth:{required:!1,type:Number,default:230},btnClass:{required:!1,type:String,default:"btn-select"}},data:function(){return{index:null}},computed:{selected:function(){return null===this.index||0===this.options.length?this.placeholder:this.options[this.index]?this.options[this.index].label:this.placeholder}},mounted:function(){this.setIndex()},watch:{options:{handler:function(){this.setIndex()},deep:!0},value:function(){this.setIndex()}},methods:{setIndex:function(){if(null!==this.value)for(var t=this.options,e=0;e<t.length;e++)if(this.value===t[e].value)return void(this.index=e)},select:function(t,e){this.$emit("input",t.value),this.index=e},focus:function(){var t=this;this.autocomplete&&setTimeout((function(){t.$refs.search.focus(),t.$refs.search.select()}),100)},clear:function(){this.$emit("input",null),this.index=null},down:function(){var t=$(this.$refs.menu).find(".dropdown-item").first();t.length&&t.focus()},up:function(t){this.autocomplete&&0===t&&this.focus()}}},s=a("KHd+"),o=Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown autocomplete"},[a("button",{ref:"btn",staticClass:"font-weight-normal",class:["btn","d-flex",t.btnClass,{"btn-placeholder-effect":null===t.value,"btn-select-active":null!==t.value,"border-danger":t.error}],attrs:{"data-toggle":"dropdown","data-boundary":"window",disabled:t.disabled,"data-flip":"false"},on:{click:function(e){return t.focus()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.focus()}}},[a("span",{staticClass:"text-case-normal"},[t._v("\n            "+t._s(t.selected)+"\n        ")]),t._v(" "),t.loading?a("inline-spinner",{staticClass:"ml-auto text-primary"}):a("icon",{staticClass:"ml-auto btn-dropdown-icon",attrs:{name:"caret-down"}})],1),t._v(" "),a("div",{ref:"menu",staticClass:"dropdown-menu w-100",style:"max-width: "+t.maxWidth+"px;"},[t.autocomplete?a("div",{staticClass:"pb-2 px-3"},[a("input",{ref:"search",staticClass:"form-control form-control-sm",attrs:{type:"search",placeholder:"Search...",title:"Search"},on:{keyup:function(e){return t.$emit("search",e.target.value)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.down()},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.options.length>0&&t.select(t.options[0],0)}]}})]):t._e(),t._v(" "),t._t("header"),t._v(" "),t._l(t.options,(function(e,n){return a("a",{class:["dropdown-item",{active:e.value===t.value}],attrs:{href:"#"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.up(n)},click:function(a){return a.preventDefault(),t.select(e,n)}}},[t._v("\n            "+t._s(e.label)+"\n        ")])})),t._v(" "),t._t("default"),t._v(" "),0===t.options.length&&t.emptyMessage.length?a("p",{staticClass:"text-center text-muted p-2 mb-0"},[t._v(t._s(t.emptyMessage))]):t._e(),t._v(" "),t.endMessage.length?a("p",{staticClass:"text-center text-muted p-2 mb-0"},[a("small",[t._v(t._s(t.endMessage))])]):t._e(),t._v(" "),t._t("footer")],2)])}),[],!1,null,"6b1a7e68",null);e.a=o.exports},muzd:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".editable[data-v-553a1c4d]:focus {\n  outline: none;\n}\n.editable.editable-focused[data-v-553a1c4d] {\n  border-bottom-color: #2EB07A !important;\n}",""])},pGQZ:function(t,e,a){"use strict";a.r(e);var n=a("o0o1"),r=a.n(n),s=a("wd/R"),o=a.n(s),i=a("QEud"),l=a.n(i),c=a("ke3Z"),u=a("TTxJ");function d(t,e,a,n,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,r)}var p={name:"InlineMeasurementForm",components:{InlineSpinner:u.a,DatePicker:l.a},props:{plant:{required:!0},defaultDate:{required:!1,default:null}},data:function(){return{date:null,focusedCell:null,loading:!1,form:new c.a({date:"",is_alive:"",is_located:"",height:""}),ready:!0}},watch:{date:function(t){this.form.date=this.getDate(t),this.ready&&this.$emit("date",t)},defaultDate:{immediate:!0,handler:function(t){var e=this;this.ready=!1,this.date=t,this.$nextTick((function(){e.ready=!0}))}}},methods:{save:function(){var t,e=this;return(t=r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.form.post("/web/plants/".concat(e.plant.id,"/measurements"));case 4:a=t.sent,n=a.data,e.$emit("create",n),e.$notify({type:"success",text:"Measurement created successfully"}),e.form.reset(),e.form.date=e.getDate(e.date),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),t.t0.response&&422===t.t0.response.status?e.$alert({title:"Please Review The Following",text:e.form.errors.toArray().join(" ")}):e.$alert("Unable to create measurement. Please try refreshing the page or report the error to us!"),console.error(t.t0);case 16:e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function o(t){d(s,n,r,o,i,"next",t)}function i(t){d(s,n,r,o,i,"throw",t)}o(void 0)}))})()},getDate:function(t){return t?o()(t).format("YYYY-MM-DD"):""}}},m=a("KHd+"),f=Object(m.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"tr",on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("div",{staticClass:"td p-0 border-top-0"}),t._v(" "),a("div",{staticClass:"td p-0 border-top-0"}),t._v(" "),a("div",{staticClass:"td p-0",class:{"outline-primary":"date"===t.focusedCell}},[a("date-picker",{attrs:{color:"green","max-date":new Date,"input-props":{class:"form-control px-3 border-0 w-100 cell-h",placeholder:"mm/dd/yyyy"},popover:{visibility:"click"}},on:{popoverWillShow:function(e){t.focusedCell="date"},popoverWillHide:function(e){t.focusedCell=null}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("div",{staticClass:"td p-0",class:{"outline-primary":"located"===t.focusedCell}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.is_located,expression:"form.is_located"}],staticClass:"form-control border-0 py-0 cell-h",attrs:{title:"Has the plant been located?"},on:{focusin:function(e){t.focusedCell="located"},focusout:function(e){t.focusedCell=null},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"is_located",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Located?")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Yes")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("No")])])]),t._v(" "),a("div",{staticClass:"td p-0",class:{"outline-primary":"alive"===t.focusedCell}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.is_alive,expression:"form.is_alive"}],staticClass:"form-control border-0 py-0 cell-h focus-outlined",attrs:{title:"Is the plant alive?"},on:{focusin:function(e){t.focusedCell="alive"},focusout:function(e){t.focusedCell=null},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"is_alive",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Alive?")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Yes")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("No")])])]),t._v(" "),a("div",{staticClass:"td p-0",class:{"outline-primary":"height"===t.focusedCell}},[a("div",{staticClass:"d-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.height,expression:"form.height"}],staticClass:"form-control px-3 border-0 w-100 cell-h focus-outlined flex-grow-1",attrs:{type:"number",step:"any",min:"0",title:"Height",placeholder:"Height"},domProps:{value:t.form.height},on:{focusin:function(e){t.focusedCell="height"},focusout:function(e){t.focusedCell=null},input:function(e){e.target.composing||t.$set(t.form,"height",e.target.value)}}}),t._v(" "),a("button",{staticClass:"cell-h btn btn-primary rounded-0",class:{"text-transparent":t.loading},attrs:{type:"submit",disabled:t.loading}},[t.loading?a("inline-spinner",{staticClass:"position-absolute text-white ml-2"}):t._e(),t._v(" "),a("span",[t._v("Save")])],1)])])])}),[],!1,null,"15c20c7f",null).exports,v=a("cv7c"),_={name:"PlotEntryButton",components:{Icon:v.a},props:{plot:{required:!0}}},h=Object(m.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"dropdown"},[a("a",{staticClass:"d-flex align-items-center justify-content-between w-100 flex-nowrap no-wrap",attrs:{href:"#",tabindex:"-1","data-toggle":"dropdown"}},[a("span",[t._v("Plot #"+t._s(t.plot.number))]),t._v(" "),a("icon",{attrs:{name:"caret-down"}})],1),t._v(" "),a("div",{staticClass:"dropdown-menu"},[a("a",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("addPlant")}}},[a("icon",{attrs:{name:"add"}}),t._v(" "),a("span",[t._v("New Plant")])],1),t._v(" "),a("router-link",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{to:"/app/plots/"+t.plot.id}},[a("icon",{attrs:{name:"eye"}}),t._v(" "),a("span",[t._v("View Plot")])],1),t._v(" "),a("a",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("editPlot")}}},[a("icon",{attrs:{name:"create"}}),t._v(" "),a("span",[t._v("Edit Plot")])],1),t._v(" "),a("a",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("deletePlot")}}},[a("icon",{attrs:{name:"trash"}}),t._v(" "),a("span",[t._v("Delete Plot")])],1)],1)])])}),[],!1,null,"37105a04",null).exports,g={name:"PlantEntryButton",components:{Icon:v.a},props:{plant:{required:!0}}},b=Object(m.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"dropdown"},[a("a",{staticClass:"d-flex align-items-center justify-content-between w-100 flex-nowrap no-wrap",attrs:{href:"#",tabindex:"-1","data-toggle":"dropdown"}},[a("span",[t._v("Plant #"+t._s(t.plant.tag))]),t._v(" "),a("icon",{attrs:{name:"caret-down"}})],1),t._v(" "),a("div",{staticClass:"dropdown-menu"},[a("router-link",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{to:"/app/plants/"+t.plant.id}},[a("icon",{attrs:{name:"eye"}}),t._v(" "),a("span",[t._v("View Plant")])],1),t._v(" "),a("a",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("editPlant")}}},[a("icon",{attrs:{name:"create"}}),t._v(" "),a("span",[t._v("Edit Plant")])],1),t._v(" "),a("a",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("deletePlant")}}},[a("icon",{attrs:{name:"trash"}}),t._v(" "),a("span",[t._v("Delete Plant")])],1)],1)])])}),[],!1,null,"ba270f18",null).exports,y={name:"MeasurementEntryButton",components:{Icon:v.a},props:{measurement:{required:!0}},data:function(){return{moment:o.a}}},w=Object(m.a)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"dropdown"},[a("a",{staticClass:"d-flex align-items-center justify-content-between w-100 flex-nowrap no-wrap",attrs:{href:"#",tabindex:"-1","data-toggle":"dropdown"}},[a("span",[t._v(t._s(t.moment(t.measurement.date).format("MMM Do, YYYY")))]),t._v(" "),a("icon",{attrs:{name:"caret-down"}})],1),t._v(" "),a("div",{staticClass:"dropdown-menu"},[a("a",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("editMeasurement")}}},[a("icon",{attrs:{name:"create"}}),t._v(" "),a("span",[t._v("Edit Measurement")])],1),t._v(" "),a("a",{staticClass:"dropdown-item pl-2 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("deleteMeasurement")}}},[a("icon",{attrs:{name:"trash"}}),t._v(" "),a("span",[t._v("Delete Measurement")])],1)])])])}),[],!1,null,"2af98979",null).exports,x=a("mXro"),C=a("C+gu"),P=a("uHij"),k=a("gdrP"),S=a("RQW6");function $(t,e,a,n,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,r)}function q(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function o(t){$(s,n,r,o,i,"next",t)}function i(t){$(s,n,r,o,i,"throw",t)}o(void 0)}))}}var M={name:"DataEntry",components:{PlotForm:k.a,SiteForm:P.a,PlantForm:C.a,MeasurementForm:S.a,Dropdown:x.a,InlineSpinner:u.a,Icon:v.a,PlotEntryButton:h,PlantEntryButton:b,MeasurementEntryButton:w,InlineMeasurementForm:f},data:function(){return{moment:o.a,sites:[],site:"",allPlots:[],plots:[],loadingSites:!0,loadingPlots:!0,limit:"",sortOrder:"tag_asc",plotFilter:"",search:"",showMeasurementForm:!1,showPlantForm:!1,showSiteForm:!1,showPlotForm:!1,measurement:null,plot:null,plant:null,plantPlot:null,plotSite:null,_request:null,defaultDate:null,deleting:null}},mounted:function(){this.loadSites()},watch:{site:function(t){this.plotFilter="",this.search="";var e=this.sites.filter((function(e){return e.id===t}));e.length>0&&(this.plotSite=e[0],this.allPlots=e[0].plots),this.loadPlots()},limit:function(){this.loadPlots()},plotFilter:function(){this.loadPlots()},search:function(){this.loadPlots()},sortOrder:function(){this.loadPlots()}},methods:{loadSites:function(){var t=this;return q(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingSites=!0,e.prev=1,e.next=4,axios.get("/web/data-entry/sites");case 4:a=e.sent,n=a.data,t.sites=n,""===t.site&&n.length>0&&(t.site=t.sites[0].id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t.$alert("Unable to load sites. Please try refreshing the page or contact us."),console.error(e.t0);case 14:t.loadingSites=!1;case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))()},loadPlots:function(){var t=this;return q(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._request&&t._request(),e.prev=1,e.next=4,axios.get("/web/data-entry/sites/".concat(t.site,"/plots"),{params:{limit:t.limit,plot:t.plotFilter,search:t.search,sort_order:t.sortOrder},cancelToken:new axios.CancelToken((function(e){return t._request=e}))});case 4:a=e.sent,n=a.data,t.plots=n,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),axios.isCancel(e.t0)||(t.$alert("Unable to load plots. Please try refreshing the page or contact us."),console.error(e.t0));case 12:t.loadingPlots=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},addPlant:function(t){this.plantPlot=t,this.showPlantForm=!0},editPlant:function(t){this.plant=t,this.showPlantForm=!0},editPlot:function(t){this.plot=t,this.showPlotForm=!0},deletePlot:function(t){var e,a=this;null===this.deleting&&this.$confirm({title:"Are you sure you want to delete Plot #".concat(t.number,"?"),text:"This action is permanent!",onConfirm:(e=q(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.deleting=t.id,e.prev=1,e.next=4,axios.delete("/web/plots/".concat(t.id));case 4:a.loadPlots(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.$notify({text:"Unable to delete plot. Please try refreshing the page.",type:"error"});case 10:a.deleting=null;case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(){return e.apply(this,arguments)})})},deletePlant:function(t){var e,a=this;null===this.deleting&&this.$confirm({title:"Are you sure you want to delete Plant #".concat(t.tag,"?"),text:"This action is permanent!",onConfirm:(e=q(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.deleting=t.id,e.prev=1,e.next=4,axios.delete("/web/plants/".concat(t.id));case 4:a.loadPlots(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),a.$notify({text:"Unable to delete plant. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 11:a.deleting=null;case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(){return e.apply(this,arguments)})})},deleteMeasurement:function(t){var e,a=this;null===this.deleting&&this.$confirm({title:"Are you sure you want to delete measurement collected on "+o()(t.date).format("MMM Do, YYYY")+"?",text:"This action is permanent.",onConfirm:(e=q(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.deleting=t.id,e.prev=1,e.next=4,axios.delete("/web/measurements/".concat(t.id));case 4:a.loadPlots(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),a.$notify({text:"Unable to delete measurement. Please try refreshing the page."});case 11:a.deleting=null;case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(){return e.apply(this,arguments)})})},editMeasurement:function(t,e){this.plant=t,this.measurement=e,this.showMeasurementForm=!0},plotUpdated:function(t){this.showPlotForm=!1,this.plots=this.plots.map((function(e){return e.id===t.id?t:e}))},measurementUpdated:function(t){this.showMeasurementForm=!1;var e=this.plots.find((function(e){return e.id===t.plot_id})),a=e.plants.find((function(e){return e.id===t.plant_id}));a.measurements=a.measurements.map((function(e){return e.id===t.id?t:e})),e.plants=e.plants.map((function(t){return t.id===a.id?a:t})),this.plots=this.plots.map((function(t){return t.id===e.id?e:t}))},plantUpdated:function(t){this.hidePlantForm();var e=this.plots.find((function(e){return e.id===t.plot_id}));e.plants=e.plants.map((function(e){return e.id===t.id?t:e})),this.plots=this.plots.map((function(t){return t.id===e.id?e:t})),this.$notify({type:"success",text:"Plant updated successfully"})},hidePlantForm:function(){this.showPlantForm=!1,this.plantPlot=null,this.plant=null},plantCreated:function(){this.loadPlots(),this.hidePlantForm(),this.$notify({type:"success",text:"Plant created successfully"})},measurementCreated:function(){this.loadPlots()},siteCreated:function(t){t.plots=[],this.sites.push(t),this.site=t.id,this.showSiteForm=!1},plotCreated:function(){this.loadPlots(),this.showPlotForm=!1}}},O=Object(m.a)(M,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loadingSites?t._e():a("div",{staticClass:"mb-3 d-flex"},[a("div",{staticClass:"flex-grow-1 d-flex"},[a("dropdown",{staticClass:"bg-white",attrs:{options:t.sites.map((function(t){return{label:t.name,value:t.id}}))},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("a",{staticClass:"dropdown-item d-flex align-items-center pl-2",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showSiteForm=!0}}},[a("icon",{attrs:{name:"add"}}),t._v(" "),a("span",[t._v("New Site")])],1),t._v(" "),a("div",{staticClass:"dropdown-divider"})])])],1),t._v(" "),a("div",{staticClass:"flex-shrink-0"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.showPlotForm=!0}}},[a("icon",{attrs:{name:"add"}}),t._v(" "),a("span",[t._v("Plot")])],1)])]),t._v(" "),t.loadingSites?a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),t.loadingSites?t._e():a("div",{staticClass:"card mb-3 position-static"},[a("div",{staticClass:"card-header d-flex px-2"},[a("div",{staticClass:"flex-grow-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search by plant tag",title:"Search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"flex-shrink-0 d-flex align-items-center"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortOrder,expression:"sortOrder"}],staticClass:"ml-1 custom-select",attrs:{title:"Sort Quadrant",name:"quadrant_filter",id:"quadrant-filter"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.sortOrder=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"tag_asc"}},[t._v("Sort by plant tag, ascending")]),t._v(" "),a("option",{attrs:{value:"tag_desc"}},[t._v("Sort by plant tag, descending")]),t._v(" "),a("option",{attrs:{value:"quadrant_asc"}},[t._v("Sort by quadrant, ascending")]),t._v(" "),a("option",{attrs:{value:"quadrant_desc"}},[t._v("Sort by quadrant, descending")])]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.limit,expression:"limit"}],staticClass:"ml-1 custom-select",attrs:{title:"Limit Measurements",name:"measurement_filter",id:"measurement-filter"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.limit=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("Show all measurements")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Show last measurement")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Show last 2 measurements")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("Show last 3 measurements")]),t._v(" "),a("option",{attrs:{value:"4"}},[t._v("Show last 4 measurements")])]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.plotFilter,expression:"plotFilter"}],staticClass:"custom-select ml-1",attrs:{name:"plot_filter",id:"plot-filter",title:"Filter by plot"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.plotFilter=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("All Plots")]),t._v(" "),t._l(t.allPlots,(function(e){return a("option",{domProps:{value:e.id}},[t._v("\n                        Plot #"+t._s(e.number)+"\n                    ")])}))],2)])]),t._v(" "),t.loadingPlots?a("div",{staticClass:"p-3 d-flex align-items-center justify-content-center"},[a("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),t.loadingPlots||0!==t.plots.length?t._e():a("div",{staticClass:"p-3 text-muted"},[t._v('\n            No plots found. Please use the "+ PLOT" button above to create a new one.\n        ')]),t._v(" "),!t.loadingPlots&&t.plots.length>0?a("div",{staticClass:"table table-bordered mb-0"},[t._m(0),t._v(" "),t._l(t.plots,(function(e){return[e.plants.length>0?[t._l(e.plants,(function(n,r){return[n.measurements.length>0?[t._l(n.measurements,(function(s,o){return a("div",{staticClass:"tr"},[a("div",{staticClass:"th",class:{"border-top-0":r>0||o>0}},[0===r&&0===o?a("plot-entry-button",{attrs:{plot:e},on:{addPlant:function(a){return t.addPlant(e)},editPlot:function(a){return t.editPlot(e)},deletePlot:function(a){return t.deletePlot(e)}}}):t._e()],1),t._v(" "),a("div",{staticClass:"th",class:{"border-top-0":o>0}},[0===o?a("div",[a("plant-entry-button",{attrs:{plant:n},on:{editPlant:function(e){return t.editPlant(n)},deletePlant:function(e){return t.deletePlant(n)}}}),t._v(" "),a("p",{staticClass:"mb-0 text-muted"},[t._v(t._s(n.species.name))]),t._v(" "),a("p",{staticClass:"mb-0 text-muted"},[t._v(t._s(n.quadrant)+" Quadrant")])],1):t._e()]),t._v(" "),a("div",{staticClass:"td"},[a("measurement-entry-button",{attrs:{measurement:s},on:{editMeasurement:function(e){return t.editMeasurement(n,s)},deleteMeasurement:function(e){return t.deleteMeasurement(s)}}})],1),t._v(" "),a("div",{staticClass:"td"},[t._v(t._s(s.is_located?"Yes":"No"))]),t._v(" "),a("div",{staticClass:"td"},[t._v(t._s(s.is_alive?"Yes":"No"))]),t._v(" "),a("div",{staticClass:"td"},[null!==s.height?a("span",[t._v("\n                                        "+t._s(Number(s.height).toFixed(2))+" in.\n                                    ")]):t._e()])])})),t._v(" "),a("inline-measurement-form",{attrs:{plant:n,"default-date":t.defaultDate},on:{create:t.measurementCreated,date:function(e){t.defaultDate=e}}})]:[a("div",{staticClass:"tr"},[a("div",{staticClass:"th",class:{"border-top-0":r>0}},[0===r?a("plot-entry-button",{attrs:{plot:e},on:{addPlant:function(a){return t.addPlant(e)},editPlot:function(a){return t.editPlot(e)},deletePlot:function(a){return t.deletePlot(e)}}}):t._e()],1),t._v(" "),a("div",{staticClass:"th"},[a("plant-entry-button",{attrs:{plant:n},on:{editPlant:function(e){return t.editPlant(n)},deletePlant:function(e){return t.deletePlant(n)}}}),t._v(" "),a("p",{staticClass:"mb-0 text-muted"},[t._v(t._s(n.species.name))]),t._v(" "),a("p",{staticClass:"mb-0 text-muted"},[t._v(t._s(n.quadrant)+" Quadrant")])],1),t._v(" "),t._m(1,!0),t._v(" "),a("div",{staticClass:"td border-right-0"}),t._v(" "),a("div",{staticClass:"td border-right-0"}),t._v(" "),a("div",{staticClass:"td"})]),t._v(" "),a("inline-measurement-form",{attrs:{plant:n,"default-date":t.defaultDate},on:{create:t.measurementCreated,date:function(e){t.defaultDate=e}}})]]}))]:a("div",{staticClass:"tr"},[a("div",{staticClass:"th"},[a("plot-entry-button",{attrs:{plot:e},on:{addPlant:function(a){return t.addPlant(e)},editPlot:function(a){return t.editPlot(e)},deletePlot:function(a){return t.deletePlot(e)}}})],1),t._v(" "),a("div",{staticClass:"td text-muted border-right-0"},[t._v("No Plants Found")]),t._v(" "),t._l(3,(function(t){return a("div",{staticClass:"td border-right-0"})})),t._v(" "),a("div",{staticClass:"td"})],2)]}))],2):t._e()]),t._v(" "),t.showPlantForm?a("plant-form",{attrs:{plot:t.plantPlot,plant:t.plant},on:{close:t.hidePlantForm,create:t.plantCreated,update:function(e){return t.plantUpdated(e)}}}):t._e(),t._v(" "),t.showPlotForm?a("plot-form",{attrs:{site:t.plotSite,plot:t.plot},on:{close:function(e){t.showPlotForm=!1},create:t.plotCreated,update:function(e){return t.plotUpdated(e)}}}):t._e(),t._v(" "),t.showSiteForm?a("site-form",{on:{close:function(e){t.showSiteForm=!1},create:t.siteCreated}}):t._e(),t._v(" "),t.showMeasurementForm?a("measurement-form",{attrs:{plant:t.plant,measurement:t.measurement},on:{close:function(e){t.showMeasurementForm=!1},update:function(e){return t.measurementUpdated(e)}}}):t._e()],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tr"},[a("div",{staticClass:"th text-muted border-bottom"},[t._v("Plot")]),t._v(" "),a("div",{staticClass:"th text-muted border-bottom"},[t._v("Plant")]),t._v(" "),a("div",{staticClass:"th text-muted border-bottom"},[t._v("Measurement Date")]),t._v(" "),a("div",{staticClass:"th text-muted border-bottom"},[t._v("Located")]),t._v(" "),a("div",{staticClass:"th text-muted border-bottom"},[t._v("Alive")]),t._v(" "),a("div",{staticClass:"th text-muted border-bottom"},[t._v("Height")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"td border-right-0"},[e("span",{staticClass:"text-muted"},[this._v("No Measurements Found")])])}],!1,null,"e9bdd538",null);e.default=O.exports},"s/Td":function(t,e,a){"use strict";var n=a("8ORw");a.n(n).a},uHij:function(t,e,a){"use strict";var n=a("o0o1"),r=a.n(n),s=a("klO2"),o=a("JUFj"),i=a("wXy6"),l=a("vQtE"),c=a("1MU1"),u=a("mS+z"),d=a("yoRh"),p=a("ke3Z"),m=a("MEn4"),f={name:"EditableContent",components:{Required:m.a},props:{value:{type:String},required:{type:Boolean},allowNewline:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0}},mounted:function(){this.$refs.input.innerText=this.value},watch:{value:function(){this.focused||(this.$refs.input.innerText=this.value)}},data:function(){return{focused:!1}},methods:{change:function(t){this.$emit("input",t.target.innerText)},blur:function(){this.focused=!1,this.$emit("blur")},preventNewline:function(t){return!!this.allowNewline||(t&&t.preventDefault?(t.preventDefault(),this.$refs.content.blur(),!1):void 0)},focus:function(){this.$refs.content.focus(),this.$refs.content.select()}}},v=(a("s/Td"),a("KHd+")),_={name:"Autocomplete",components:{EditableContent:Object(v.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"content",class:["form-control","editable",{"editable-focused":t.focused}],attrs:{contenteditable:"true"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.preventNewline(e)},focus:function(e){t.focused=!0},blur:function(e){return t.blur()},input:function(e){return t.change(e)}}},[a("span",{ref:"input"}),t._v(" "),!t.focused&&t.required?a("required"):t._e()],1)}),[],!1,null,"553a1c4d",null).exports},props:{right:{required:!1,default:!1,type:Boolean},value:{required:!1},options:{required:!0,type:Array},searchValue:{required:!0,type:String},emptyMessage:{required:!1,type:String,default:"No results found. Try adjusting your search terms."},endMessage:{required:!1,type:String,default:""},placeholder:{required:!1,type:String,default:"Search"},disabled:{required:!1,type:Boolean,default:!1}},data:function(){return{autocomplete:Math.random()%1e6,search:""}},mounted:function(){this.search=this.searchValue},watch:{search:function(t){this.$emit("search",t)}},methods:{select:function(t){this.$emit("input",t),this.search=t.search||t.label},clear:function(){this.search="",this.$emit("input",null)}}},h=Object(v.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown autocomplete"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],class:["form-control",{disabled:t.disabled}],attrs:{type:"text",name:"search",placehoder:t.placeholder,"aria-haspopup":"true","aria-expanded":"false",disabled:t.disabled,"data-flip":"false","aria-autocomplete":"none",autocomplete:t.autocomplete,"data-toggle":"dropdown"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),a("div",{class:["dropdown-menu","w-100",{"dropdown-menu-right":t.right}]},[t._l(t.options,(function(e){return a("a",{class:["dropdown-item",{active:e.value===t.value}],attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.select(e)}}},[t._v("\n            "+t._s(e.label)+"\n        ")])})),t._v(" "),0===t.options.length&&t.emptyMessage.length?a("p",{staticClass:"text-center text-muted p-2 mb-0"},[t._v(t._s(t.emptyMessage))]):t._e(),t._v(" "),t.endMessage.length?a("p",{staticClass:"text-center text-muted p-2 mb-0"},[a("small",[t._v(t._s(t.endMessage))])]):t._e()],2)])}),[],!1,null,"b8753710",null).exports,g=a("mXro"),b=a("TTxJ"),y=a("mBzz");function w(t,e,a,n,r,s,o){try{var i=t[s](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,r)}function x(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function o(t){w(s,n,r,o,i,"next",t)}function i(t){w(s,n,r,o,i,"throw",t)}o(void 0)}))}}function C(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function P(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?C(Object(a),!0).forEach((function(e){k(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function k(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var S={name:"SiteForm",components:{InlineSpinner:b.a,Dropdown:g.a,Autocomplete:h,Required:m.a,Close:d.a,ModalFooter:u.a,ModalBody:c.a,ModalTitle:l.a,ModalHeader:i.a,ModalCard:o.a,Modal:s.a,TokensField:y.a},props:{site:{required:!1,default:null}},data:function(){return{saving:!1,states:[],stateSearch:"",counties:[],countySearch:"",species:[],speciesOptions:[],form:new p.a({state_id:null,county_id:null,city:"",name:"",diameter:"",basal_area:"",owner_name:"",owner_contact:"",species:[],shrubs:[]}),stateRequest:null,countyRequest:null,loadingStates:!1,loadingCounties:!1}},mounted:function(){this.site&&this.form.setDefault(P(P({},this.site),{},{species:this.site.species.map((function(t){var e=t.id;return"".concat(e)})),shrubs:this.site.shrubs.map((function(t){var e=t.id;return"".concat(e)}))})),this.loadStates(),this.loadSpecies()},watch:{stateSearch:function(){this.loadStates()},countySearch:function(){this.loadCounties()}},methods:{loadStates:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingStates=!0,null!==t.stateRequest&&t.stateRequest(),e.prev=2,e.next=5,axios.get("/web/states",{params:{search:t.stateSearch},cancelToken:new axios.CancelToken((function(e){return t.stateRequest=e}))});case 5:a=e.sent,n=a.data,t.states=n.data.map((function(t){return{label:"".concat(t.name," (").concat(t.code,")"),value:t.id,search:t.name}})),t.loadingStates=!1,t.form.state_id&&t.loadCounties(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),axios.isCancel(e.t0)||(t.loadingStates=!1,console.error(e.t0));case 15:t.stateRequest=null;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()},loadCounties:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingCounties=!0,null!==t.countyRequest&&t.countyRequest(),e.prev=2,e.next=5,axios.get("/web/counties",{params:{state_id:t.form.state_id,search:t.countySearch},cancelToken:new axios.CancelToken((function(e){return t.countyRequest=e}))});case 5:a=e.sent,n=a.data,t.counties=n.data.map((function(t){return{label:t.name,value:t.id}})),t.loadingCounties=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),axios.isCancel(e.t0)||(t.loadingCounties=!1,console.error(e.t0));case 14:t.countyRequest=null;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},loadSpecies:function(){var t=this;return x(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.request&&t.request(),axios.get("/web/species",{params:{cancelToken:new axios.CancelToken((function(e){return t.request=e})),limit:500}}).then((function(e){t.speciesOptions=e.data.data.map((function(t){return{id:t.id,text:t.name}}))})).catch((function(t){console.error(t)}));case 2:case"end":return e.stop()}}),e)})))()},onChange:function(t){this.$emit("input",t)},selectState:function(t){this.loadCounties(),this.$refs.county.clear()},save:function(){this.site?this.update():this.submit()},update:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.saving=!0,e.prev=1,e.next=4,t.form.put("/web/sites/".concat(t.site.id));case 4:a=e.sent,n=a.data,t.$emit("update",n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status?t.$notify({text:"One or more fields need your attention. Please review the form.",type:"error"}):t.$notify({text:"Unable to save site. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 13:t.saving=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},submit:function(){var t=this;return x(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.saving=!0,e.prev=1,e.next=4,t.form.post("/web/sites");case 4:a=e.sent,n=a.data,t.$emit("create",n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response&&422!==e.t0.response.status&&t.$notify({text:"Unable to save site. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 13:t.saving=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}},$=Object(v.a)(S,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{medium:""},on:{close:function(e){return t.$emit("close")}}},[a("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.save()}}},[a("modal-card",[a("modal-header",[t.site?t._e():a("modal-title",[t._v("Add a New Site")]),t._v(" "),t.site?a("modal-title",[t._v("Update "+t._s(t.site.name))]):t._e(),t._v(" "),a("close",{on:{click:function(e){return t.$emit("close")}}})],1),t._v(" "),a("modal-body",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("\n                        Site Name\n                        "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",autocomplete:"site-name",id:"name",name:"name",placeholder:"Site Name",autofocus:""},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),t.form.errors.has("name")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("name"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v("\n                                State\n                                "),a("required")],1),t._v(" "),a("dropdown",{attrs:{autocomplete:"",loading:t.loadingStates,options:t.states,placeholder:"Select a state"},on:{input:function(e){return t.selectState(e)},search:function(e){t.stateSearch=e}},model:{value:t.form.state_id,callback:function(e){t.$set(t.form,"state_id",e)},expression:"form.state_id"}}),t._v(" "),t.form.errors.has("state")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                                "+t._s(t.form.errors.first("state"))+"\n                            ")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v("\n                                County\n                                "),a("required")],1),t._v(" "),a("dropdown",{ref:"county",attrs:{autocomplete:"",loading:t.loadingCounties,placeholder:"Select a County",options:t.counties,disabled:null===t.form.state_id},on:{search:function(e){t.countySearch=e}},model:{value:t.form.county_id,callback:function(e){t.$set(t.form,"county_id",e)},expression:"form.county_id"}}),t._v(" "),t.form.errors.has("county")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                                "+t._s(t.form.errors.first("county"))+"\n                            ")]):t._e()],1)])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"city"}},[t._v("\n                        Town\n                        "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.city,expression:"form.city"}],staticClass:"form-control",attrs:{type:"text",name:"city",id:"city",placeholder:"Type a city name"},domProps:{value:t.form.city},on:{input:function(e){e.target.composing||t.$set(t.form,"city",e.target.value)}}}),t._v(" "),t.form.errors.has("city")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("city"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"owner"}},[t._v("Owner's Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.owner_name,expression:"form.owner_name"}],staticClass:"form-control",attrs:{type:"text",name:"owner",id:"owner",placeholder:"Type a name"},domProps:{value:t.form.owner_name},on:{input:function(e){e.target.composing||t.$set(t.form,"owner_name",e.target.value)}}}),t._v(" "),t.form.errors.has("owner_name")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("owner_name"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"contact"}},[t._v("Contact Info")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.owner_contact,expression:"form.owner_contact"}],staticClass:"form-control",attrs:{type:"text",name:"contact",id:"contact",placeholder:"Type contact info"},domProps:{value:t.form.owner_contact},on:{input:function(e){e.target.composing||t.$set(t.form,"owner_contact",e.target.value)}}}),t._v(" "),t.form.errors.has("owner_contact")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("owner_contact"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"species"}},[t._v("\n                        Overstory Species\n                        "),a("required")],1),t._v(" "),a("tokens-field",{attrs:{id:"species",tags:!0,options:t.speciesOptions},model:{value:t.form.species,callback:function(e){t.$set(t.form,"species",e)},expression:"form.species"}}),t._v(" "),t.form.errors.has("species")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("species"))+"\n                    ")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"shrubs"}},[t._v("\n                        Seedling or Shrub Species\n                        "),a("required")],1),t._v(" "),a("tokens-field",{attrs:{id:"shrubs",tags:!0,options:t.speciesOptions},model:{value:t.form.shrubs,callback:function(e){t.$set(t.form,"shrubs",e)},expression:"form.shrubs"}}),t._v(" "),t.form.errors.has("shrubs")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("shrubs"))+"\n                    ")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group"},[a("p",{staticClass:"text-muted"},[t._v("\n                        If you cannot find the species you are looking for in the dropdown, you can insert a new one by typing the name of the species and pressing the Enter/Return key.\n                    ")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"basal-area"}},[t._v("\n                        Approximate Basal Area\n                    ")]),t._v(" "),a("div",{staticClass:"input-group is-appended"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.basal_area,expression:"form.basal_area"}],staticClass:"form-control",attrs:{type:"text",name:"basal_area",id:"basal-area",placeholder:"Type a number"},domProps:{value:t.form.basal_area},on:{input:function(e){e.target.composing||t.$set(t.form,"basal_area",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[t._v("ft"),a("sup",[t._v("2")]),t._v("/ac")])])]),t._v(" "),t.form.errors.has("basal_area")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("basal_area"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"diameter"}},[t._v("\n                        Average Overstory Tree Diameter\n                    ")]),t._v(" "),a("div",{staticClass:"input-group is-appended"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.diameter,expression:"form.diameter"}],staticClass:"form-control",attrs:{type:"text",name:"diameter",id:"diameter",placeholder:"Type a number"},domProps:{value:t.form.diameter},on:{input:function(e){e.target.composing||t.$set(t.form,"diameter",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[t._v("in")])])]),t._v(" "),t.form.errors.has("diameter")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("diameter"))+"\n                    ")]):t._e()])]),t._v(" "),a("modal-footer",{staticClass:"d-flex"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.saving}},[t.saving?a("inline-spinner"):t._e(),t._v(" "),a("span",[t._v("Save")])],1),t._v(" "),a("button",{staticClass:"btn btn-light ml-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n                    Close\n                ")])])],1)],1)])}),[],!1,null,"0912afc9",null);e.a=$.exports}}]);