(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"0XfU":function(t,e,a){"use strict";var n=a("o0o1"),s=a.n(n),r=a("TTxJ"),o=a("cv7c"),i=a("Pm5W"),l=a("cQaf"),c=a("+Gql"),u=a("C+gu");function d(t,e,a,n,s,r,o){try{var i=t[r](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,s)}function p(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function o(t){d(r,n,s,o,i,"next",t)}function i(t){d(r,n,s,o,i,"throw",t)}o(void 0)}))}}var m={name:"BetaPlantsView",components:{Pager:a("yJCx").a,PlantForm:u.a,InlineSpinner:r.a,Icon:o.a},props:{plot:{required:!0},editable:{required:!1,type:Boolean,default:!0},siteUrlPrefix:{required:!1,type:String,default:"/app/plants"}},watch:{"plot.id":{handler:function(){this.loading=!0,this.loadPlants()}},search:function(){this.loadPlants()}},data:function(){return{User:c.a,plants:[],plant:null,showForm:!1,lastPage:1,page:1,orderBy:"tag",orderDir:"asc",request:null,total:0,deleting:null,loading:!0,search:""}},mounted:function(){this.loadPlants()},methods:{loadPlants:function(){var t=this;return p(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.request&&t.request(),e.prev=1,e.next=4,axios.get("/web/plots/".concat(t.plot.id,"/plants"),{params:{search:t.search,page:t.page,order_by:t.orderBy,order_dir:t.orderDir},cancelToken:new axios.CancelToken((function(e){return t.request=e}))});case 4:a=e.sent,n=a.data,t.plants=n.data,t.lastPage=n.last_page,t.total=n.total,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),axios.isCancel(e.t0)||(console.error(e.t0),t.$notify({text:"Unable to load plot. Please try refreshing the page.",type:"error"}));case 14:t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},goTo:function(t){this.page=t,this.loadPlants()},created:function(t){this.closeForm(),this.loadPlants(),this.$notify({text:"Plant created successfully",type:"success"})},updated:function(t){this.closeForm(),this.plants=this.plants.map((function(e){return e.id===t.id?t:e})),this.$notify({text:"Plant updated successfully",type:"success"})},closeForm:function(){this.plant=null,this.showForm=!1},edit:function(t){this.plant=t,this.showForm=!0},destroy:function(t){var e,a=this;null===this.deleting&&this.$confirm({title:"Are you sure you want to delete Plant #".concat(t.tag,"?"),text:"This action is permanent!",onConfirm:(e=p(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.deleting=t.id,e.prev=1,e.next=4,axios.delete("/web/plants/".concat(t.id));case 4:a.loadPlants(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),a.$notify({text:"Unable to delete plant. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 11:a.deleting=null;case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(){return e.apply(this,arguments)})})},plotUpdated:function(t){this.plot=t,this.editingPlot=!1},sort:function(t){t===this.orderBy?this.orderDir="asc"===this.orderDir?"desc":"asc":(this.orderBy=t,this.orderDir="asc"),this.loadPlants()},sortIcon:function(t){return t!==this.orderBy?"swap-vertical":"asc"===this.orderDir?"arrow-up":"arrow-down"}}},v=a("KHd+"),f=Object(v.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card-header d-flex align-items-center p-2"},[a("div",{staticClass:"flex-grow-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search by tag or species"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"flex-shrink-0 text-muted"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){e.preventDefault(),t.showForm=!0}}},[a("icon",{attrs:{name:"add"}}),t._v(" "),a("span",[t._v("Plant")])],1)])]),t._v(" "),a("div",{staticClass:"card-body p-0 table-responsive"},[t.loading?a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),t.loading||0!==t.plants.length?t._e():a("div",{staticClass:"p-3 text-muted border-top"},[t._v('\n            No plants found. Please try adjusting your filters or create a new plant using the "+ Plant" button above.\n        ')]),t._v(" "),!t.loading&&t.plants.length>0?a("table",{staticClass:"table mb-0"},[a("thead",[a("tr",[a("th",[a("a",{staticClass:"d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sort("tag")}}},[a("span",{staticClass:"mr-1"},[t._v("Tag")]),t._v(" "),a("icon",{attrs:{name:t.sortIcon("tag")}})],1)]),t._v(" "),a("th",[a("a",{staticClass:"d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sort("name")}}},[a("span",{staticClass:"mr-1"},[t._v("Species")]),t._v(" "),a("icon",{attrs:{name:t.sortIcon("name")}})],1)]),t._v(" "),a("th",[a("a",{staticClass:"d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sort("quadrant")}}},[a("span",{staticClass:"mr-1"},[t._v("Quadrant")]),t._v(" "),a("icon",{attrs:{name:t.sortIcon("quadrant")}})],1)]),t._v(" "),a("th",[a("a",{staticClass:"d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sort("measurements_count")}}},[a("span",{staticClass:"mr-1"},[t._v("Measurements")]),t._v(" "),a("icon",{attrs:{name:t.sortIcon("measurements_count")}})],1)]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.plants,(function(e){return a("tr",{class:{"hover-visible-container":t.deleting!==e.id}},[a("td",[a("router-link",{attrs:{to:t.siteUrlPrefix+"/"+e.id}},[t._v(t._s(e.type.name)+" #"+t._s(e.tag))])],1),t._v(" "),a("td",[t._v(t._s(e.species_name))]),t._v(" "),a("td",[t._v(t._s(e.quadrant))]),t._v(" "),a("td",[t._v(t._s(e.measurements_count))]),t._v(" "),a("td",[a("div",{staticClass:"d-flex justify-content-end hover-visible"},[t.editable||t.User.owns(e)||t.User.can("update sites")?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit",expression:"'Edit'"}],staticClass:"btn btn-sm btn-link",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.edit(e)}}},[a("icon",{attrs:{name:"create"}})],1):t._e(),t._v(" "),t.User.owns(e)||t.User.can("delete sites")?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"btn btn-sm",class:t.deleting===e.id?"btn-danger":"btn-link",attrs:{type:"button"},on:{click:function(a){return t.destroy(e)}}},[t.deleting!==e.id?a("icon",{attrs:{name:"trash"}}):a("inline-spinner")],1):t._e()])])])})),0)]):t._e(),t._v(" "),t.lastPage>1?a("div",{staticClass:"py-2"},[a("pager",{attrs:{page:t.page,"last-page":t.lastPage},on:{change:function(e){return t.goTo(e)}}})],1):t._e()]),t._v(" "),t.showForm?a("plant-form",{attrs:{plot:t.plot,plant:t.plant},on:{close:t.closeForm,create:t.created,update:t.updated}}):t._e()],1)}),[],!1,null,"5a11061e",null).exports,_=a("mXro"),h=a("gdrP"),g=a("klO2"),b=a("JUFj"),y=a("wXy6"),x=a("vQtE"),w=a("1MU1"),C=a("mS+z"),P=a("yoRh"),k=a("ke3Z"),S=a("MEn4");function $(t,e,a,n,s,r,o){try{var i=t[r](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,s)}var q={name:"SiteForm",components:{InlineSpinner:r.a,Required:S.a,Close:P.a,ModalFooter:C.a,ModalBody:w.a,ModalTitle:x.a,ModalHeader:y.a,ModalCard:b.a,Modal:g.a},props:{site:{required:!1,default:null}},data:function(){return{form:new k.a({file:null})}},methods:{submit:function(){var t,e=this;return(t=s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.file&&e.form.setAsFile("file"),t.prev=1,t.next=4,e.form.post("/web/sites/".concat(e.site.id,"/import"));case 4:a=t.sent,n=a.data,e.$notify({type:"success",text:"Measurements imported successfully."}),e.$emit("create",n),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),t.t0.response&&422!==t.t0.response.status&&e.$notify({text:"Unable to save site. Please try refreshing the page.",type:"error"}),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})),function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function o(t){$(r,n,s,o,i,"next",t)}function i(t){$(r,n,s,o,i,"throw",t)}o(void 0)}))})()},fileChanged:function(t){this.form.file=t.target.files[0]}}},D=Object(v.a)(q,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{medium:""},on:{close:function(e){return t.$emit("close")}}},[a("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.submit()}}},[a("modal-card",[a("modal-header",[a("modal-title",[t._v("Import")]),t._v(" "),a("close",{on:{click:function(e){return t.$emit("close")}}})],1),t._v(" "),a("modal-body",[a("p",{staticClass:"text-muted"},[t._v("If you have filled out an exported data sheet, you can upload it here to automatically generate new measurements.")]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("\n                        File Upload\n                    ")]),t._v(" "),a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"custom-file"},[a("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"fileUpload",accept:".xlsx"},on:{change:function(e){return t.fileChanged(e)}}}),t._v(" "),a("label",{staticClass:"custom-file-label",attrs:{for:"fileUpload"}},[t._v("\n                                "+t._s(t.form.file?t.form.file.name:"Choose file")+"\n                            ")])])]),t._v(" "),t._l(t.form.errors.errors,(function(e){return a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(e[0])+"\n                    ")])}))],2)]),t._v(" "),a("modal-footer",{staticClass:"d-flex"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("span",[t._v("Import")])]),t._v(" "),a("button",{staticClass:"btn btn-light ml-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n                    Close\n                ")])])],1)],1)])}),[],!1,null,"cfd010d0",null).exports;function F(t,e,a,n,s,r,o){try{var i=t[r](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,s)}function M(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function o(t){F(r,n,s,o,i,"next",t)}function i(t){F(r,n,s,o,i,"throw",t)}o(void 0)}))}}var N={name:"BetaPlotsView",components:{InlineSpinner:r.a,PlotForm:h.a,ImportForm:D,Dropdown:_.a,BetaPlantsView:f,Tab:l.a,Tabs:i.a,Icon:o.a},props:{site:{required:!0},siteUrlPrefix:{required:!1,type:String,default:"/app/plants"},editable:{required:!1,type:Boolean,default:!0}},data:function(){return{User:c.a,loading:!0,plots:[],plot:null,plotId:null,page:1,lastPage:1,search:"",orderBy:"number",orderDir:"asc",request:null,plotOptions:[],showPlotForm:!1,editing:null,deleting:null,importing:!1}},watch:{"site.id":{handler:function(){this.loadPlots()}},plotId:function(t){var e=this.plots.filter((function(e){return e.id===t}));e.length>0&&(this.plot=e[0])},search:function(){this.loadPlots()}},mounted:function(){this.loadPlots()},methods:{loadPlots:function(){var t=this;return M(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t.request&&t.request(),e.prev=1,e.next=4,axios.get("/web/sites/".concat(t.site.id,"/plots"),{params:{page:t.page,search:t.search,order_by:t.orderBy,order_dir:t.orderDir},cancelToken:new axios.CancelToken((function(e){return t.request=e}))});case 4:a=e.sent,n=a.data,t.plots=n.data,t.lastPage=n.last_page,t.loading=!1,t.request=null,(null===t.plotId||null===t.plot)&&t.plots.length>0&&(t.plotId=t.plots[0].id,t.plot=t.plots[0]),t.setOptions(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),axios.isCancel(e.t0)||(t.loading=!1,t.request=null);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))()},created:function(t){this.plots.push(t),this.plot=t,this.plotId=t.id,this.setOptions(),this.closeForm()},updated:function(t){this.plot=t,this.plots=this.plots.map((function(e){return e.id===t.id?t:e})),this.setOptions(),this.closeForm()},setOptions:function(){this.plotOptions=this.plots.map((function(t){return{value:t.id,label:"Plot #".concat(t.number)}}))},closeForm:function(){this.showPlotForm=!1,this.editing=null},edit:function(){this.editing=this.plot,this.showPlotForm=!0},deletePlot:function(){var t,e=this;null===this.deleting&&this.$confirm({title:"Are you sure you want to delete Plot #".concat(this.plot.number,"?"),text:"This action is permanent!",onConfirm:(t=M(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=e.plot.id,t.prev=1,t.next=4,axios.delete("/web/plots/".concat(e.plot.id));case 4:e.plot=null,e.loadPlots(),e.$notify({text:"Plot deleted successfully.",type:"success"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.$notify({text:"Unable to delete plot. Please try refreshing the page.",type:"error"});case 12:e.deleting=null;case 13:case"end":return t.stop()}}),t,null,[[1,9]])}))),function(){return t.apply(this,arguments)})})},deleteSite:function(){var t,e=this;null===this.deleting&&this.$confirm({title:"Are you sure you want to delete ".concat(this.site.name,"?"),text:"This action is permanent!",onConfirm:(t=M(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=e.site.id,t.prev=1,t.next=4,axios.delete("/web/sites/".concat(e.site.id));case 4:e.$notify({text:"Site deleted successfully",type:"error"}),e.$router.replace({path:"/app/sites",query:{}}).catch((function(t){})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.$notify({text:"Unable to delete site. Please try refreshing the page.",type:"error"});case 11:e.deleting=null;case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),function(){return t.apply(this,arguments)})})},optional:function(t,e){return t?Array.isArray(t)&&0!==t.length?t.map((function(t){return t.name})).join(", "):t:void 0!==e?"".concat(e," is not provided"):"Not provided"},measurementsCreated:function(){this.closeImportForm()},closeImportForm:function(){this.importing=!1}}},T=Object(v.a)(N,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 col-lg-3"},[a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-header d-flex border-bottom"},[t._m(0),t._v(" "),a("div",{staticClass:"flex-shrink-0"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){e.preventDefault(),t.showPlotForm=!0}}},[a("icon",{attrs:{name:"add"}}),t._v(" "),a("span",[t._v("Plot")])],1)])]),t._v(" "),a("div",{staticClass:"card-body"},[a("dropdown",{attrs:{autocomplete:"",loading:t.loading,options:t.plotOptions},on:{search:function(e){t.search=e}},model:{value:t.plotId,callback:function(e){t.plotId=e},expression:"plotId"}})],1)]),t._v(" "),a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body"},[t._m(1),t._v(" "),a("a",{staticClass:"d-flex align-items-center",attrs:{href:"/web/sites/"+t.site.id+"/export",target:"_blank"}},[a("icon",{attrs:{name:"cloud-download-outline"}}),t._v(" "),a("span",{staticClass:"ml-2"},[t._v("Download Spreadsheet")])],1),t._v(" "),t._m(2),t._v(" "),a("a",{staticClass:"mt-3 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.importing=!0}}},[a("icon",{attrs:{name:"cloud-upload-outline"}}),t._v(" "),a("span",{staticClass:"ml-2"},[t._v("Import Spreadsheet")])],1),t._v(" "),t._m(3)])])]),t._v(" "),a("div",{staticClass:"col-md-8 col-lg-9"},[a("div",{staticClass:"card mb-3"},[t.loading?a("div",{staticClass:"p-3 d-flex align-items center justify-content-center"},[a("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),t.loading||0!==t.plots.length?t._e():a("div",{staticClass:"card-body d-flex align-items-center justify-content-center flex-column text-center"},[a("div",{staticClass:"d-flex align-items-center justify-content-center icon-circle"},[a("icon",{attrs:{name:"document-text-outline"}})],1),t._v(" "),a("p",{staticClass:"font-weight-bold mt-4"},[t._v("Welcome to Your Site")]),t._v(" "),a("p",{staticClass:"text-muted max-w-700"},[t._v("\n                        In this page, you will be able to create and manage plots for your site.\n                    ")]),t._v(" "),a("p",{staticClass:"text-muted max-w-700"},[t._v("\n                        Get started by creating a new plot using the button below.\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-primary mt-4",on:{click:function(e){e.preventDefault(),t.showPlotForm=!0}}},[a("icon",{attrs:{name:"add"}}),t._v(" "),a("span",[t._v("\n                            New Plot\n                        ")])],1)]),t._v(" "),!t.loading&&t.plots.length>0?a("tabs",[a("tab",{attrs:{name:"Plants",selected:""}},[t.plot?a("beta-plants-view",{attrs:{"site-url-prefix":t.siteUrlPrefix,editable:t.editable,plot:t.plot}}):t._e()],1),t._v(" "),a("tab",{attrs:{name:"Plot Info"}},[a("div",{staticClass:"card-header border-bottom d-flex"},[a("div",{staticClass:"flex-grow-1"},[a("strong",[t._v("Plot Information")])]),t._v(" "),a("div",{staticClass:"flex-shrink-0"},[t.editable||t.User.owns(t.plot)||t.User.can("update sites")?a("button",{staticClass:"btn btn-link",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[a("icon",{attrs:{name:"create"}}),t._v(" "),a("span",[t._v("Edit Plot")])],1):t._e(),t._v(" "),t.User.owns(t.plot)||t.User.can("delete sites")?a("button",{staticClass:"btn btn-link",on:{click:function(e){return e.preventDefault(),t.deletePlot(e)}}},[t.deleting!==t.plot.id?a("icon",{attrs:{name:"trash"}}):a("inline-spinner"),t._v(" "),a("span",[t._v("Delete Plot")])],1):t._e()])]),t._v(" "),a("div",{staticClass:"card-body"},[t.plot?a("dl",{staticClass:"mb-0"},[a("dt",[t._v("Basal Area")]),t._v(" "),null!==t.plot.basal_area?a("dd",[t._v(t._s(t.plot.basal_area))]):a("dd",[t._v("Not Provided")]),t._v(" "),a("dt",[t._v("Enclosed or Protected")]),t._v(" "),t.plot.is_protected?a("dd",[t._v("Yes")]):a("dd",[t._v("No")]),t._v(" "),a("dt",[t._v("Protection Period")]),t._v(" "),null!==t.plot.protection_seasons?a("dd",[t._v(t._s(t.plot.protection_seasons))]):a("dd",[t._v("Not Provided")]),t._v(" "),a("dt",[t._v("Ground and Shrub Cover")]),t._v(" "),null!==t.plot.ground_cover?a("dd",[t._v(t._s(t.plot.ground_cover))]):a("dd",[t._v("Not Provided")]),t._v(" "),a("dt",[t._v("Canopy")]),t._v(" "),null!==t.plot.canopy?a("dd",[t._v(t._s(t.plot.canopy))]):a("dd",[t._v("Not Provided")]),t._v(" "),a("dt",[t._v("Subcanopy")]),t._v(" "),null!==t.plot.subcanopy?a("dd",[t._v(t._s(t.plot.subcanopy))]):a("dd",[t._v("Not Provided")]),t._v(" "),a("dt",[t._v("Recorders")]),t._v(" "),null!==t.plot.recorders?a("dd",[t._v(t._s(t.plot.recorders))]):a("dd",[t._v("Not Provided")]),t._v(" "),a("dt",[t._v("Wildlife Management Unit")]),t._v(" "),t.plot.wmu?a("dd",[t._v(t._s(t.plot.wmu))]):a("dd",[t._v("Not Provided")])]):t._e()])]),t._v(" "),a("tab",{attrs:{name:"Site Info"}},[a("div",{staticClass:"card-header border-bottom d-flex"},[a("div",{staticClass:"flex-grow-1"},[a("strong",[t._v("Site Information")])]),t._v(" "),a("div",{staticClass:"flex-shrink-0"},[t.editable||t.User.owns(t.site)||t.User.can("update sites")?a("button",{staticClass:"btn btn-link",on:{click:function(e){return e.preventDefault(),t.$emit("edit-site-request")}}},[a("icon",{attrs:{name:"create"}}),t._v(" "),a("span",[t._v("Edit Site")])],1):t._e()]),t._v(" "),a("div",{staticClass:"flex-shrink-0"},[t.User.owns(t.site)||t.User.can("delete sites")?a("button",{staticClass:"btn btn-link",on:{click:function(e){return e.preventDefault(),t.deleteSite(e)}}},[t.deleting!==t.site.id?a("icon",{attrs:{name:"trash"}}):a("inline-spinner"),t._v(" "),a("span",[t._v("Delete Site")])],1):t._e()])]),t._v(" "),a("div",{staticClass:"card-body"},[a("dl",{staticClass:"mb-0"},[a("dt",[t._v("Owner")]),t._v(" "),a("dd",{staticClass:"text-muted"},[t._v(t._s(t.optional(t.site.owner_name,"Owner name")))]),t._v(" "),a("dt",[t._v("Contact Info")]),t._v(" "),a("dd",{staticClass:"text-muted"},[t._v("\n                                    "+t._s(t.optional(t.site.owner_contact,"Owner contact info"))+"\n                                ")]),t._v(" "),a("dt",[t._v("Overstory Species")]),t._v(" "),0!==t.site.species.length?a("dd",{staticClass:"text-muted"},[t._v("\n                                    "+t._s(t.site.species.map((function(t){return t.name})).join(", "))+"\n                                ")]):a("dd",{staticClass:"text-muted"},[t._v("Not provided")]),t._v(" "),a("dt",[t._v("Seedling or Shrub Species")]),t._v(" "),0!==t.site.shrubs.length?a("dd",{staticClass:"text-muted"},[t._v("\n                                    "+t._s(t.site.shrubs.map((function(t){return t.name})).join(", "))+"\n                                ")]):a("dd",{staticClass:"text-muted"},[t._v("Not provided")]),t._v(" "),a("dt",[t._v("Basal Area")]),t._v(" "),a("dd",{staticClass:"text-muted"},[t._v("\n                                    "+t._s(t.optional(t.site.basal_area))+"\n                                    "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.site.basal_area,expression:"site.basal_area"}]},[t._v("ft"),a("sup",[t._v("2")]),t._v("/ac")])]),t._v(" "),a("dt",[t._v("Average Overstory Tree Diameter")]),t._v(" "),a("dd",{staticClass:"text-muted"},[t._v(t._s(t.optional(t.site.diameter))+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.site.diameter,expression:"site.diameter"}]},[t._v("in")])])])])])],1):t._e()],1)])]),t._v(" "),t.importing?a("import-form",{attrs:{site:t.site},on:{close:t.closeImportForm,create:function(e){return t.measurementsCreated()}}}):t._e(),t._v(" "),t.showPlotForm?a("plot-form",{attrs:{site:t.site,plot:t.editing},on:{create:function(e){return t.created(e)},update:function(e){return t.updated(e)},close:t.closeForm}}):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex-grow-1"},[e("strong",[this._v("Plots")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pb-2"},[e("strong",[this._v("Actions")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mb-2"},[e("small",{staticClass:"text-muted"},[this._v("The produced spreadsheet can be filled and imported into the site")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mb-2"},[e("small",{staticClass:"text-muted"},[this._v("Import data recorded in spreadsheet format")])])}],!1,null,"8f6cf6e4",null).exports;function U(t,e,a,n,s,r,o){try{var i=t[r](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,s)}var I={name:"BetaSite",components:{SiteForm:a("uHij").a,Icon:o.a,BetaPlotsView:T,InlineSpinner:r.a},props:{siteUrlPrefix:{required:!1,type:String,default:"/app/plants"},editable:{required:!1,type:Boolean,default:!0}},data:function(){return{loadingSite:!0,site:null,plots:[],loadingPlots:!1,plotSearch:"",plants:[],loadingPlants:!1,showForm:!1}},mounted:function(){this.loadSite()},methods:{loadSite:function(){var t,e=this;return(t=s.a.mark((function t(){var a,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingSite=!0,t.prev=1,a=e.$route.params.id,t.next=5,axios.get("/web/sites/".concat(a));case 5:n=t.sent,r=n.data,e.site=r,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0),e.$alert("Unable to load site information. Please try refreshing the page.");case 14:e.loadingSite=!1;case 15:case"end":return t.stop()}}),t,null,[[1,10]])})),function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function o(t){U(r,n,s,o,i,"next",t)}function i(t){U(r,n,s,o,i,"throw",t)}o(void 0)}))})()},edit:function(){this.showForm=!0},updated:function(t){this.site=t,this.showForm=!1}}},O=Object(v.a)(I,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loadingSite?a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),t.site&&!t.loadingSite?a("div",{staticClass:"mb-3 d-flex"},[a("div",{staticClass:"flex-grow-1"},[a("h1",{staticClass:"page-title"},[t._v("\n                "+t._s(t.site.name)+"\n            ")]),t._v(" "),a("p",{staticClass:"mb-0 text-muted"},[t._v("\n                "+t._s(t.site.city?t.site.city+", ":"")+t._s(t.site.county.name)+", "+t._s(t.site.state.name)+"\n            ")])]),t._v(" "),a("div",{staticClass:"flex-shrink-0"})]):t._e(),t._v(" "),t.site?a("beta-plots-view",{attrs:{site:t.site,"site-url-prefix":t.siteUrlPrefix,editable:t.editable},on:{"edit-site-request":t.edit}}):t._e(),t._v(" "),t.showForm?a("site-form",{attrs:{site:t.site},on:{close:function(e){t.showForm=!1},update:t.updated}}):t._e()],1)}),[],!1,null,"75b436dc",null);e.a=O.exports},"C+gu":function(t,e,a){"use strict";var n=a("o0o1"),s=a.n(n),r=a("ke3Z"),o=a("MEn4"),i=a("klO2"),l=a("JUFj"),c=a("wXy6"),u=a("1MU1"),d=a("mS+z"),p=a("vQtE"),m=a("yoRh"),v=a("mXro"),f=a("TTxJ"),_=a("cv7c"),h=a("QEud"),g=a.n(h),b=a("wd/R"),y=a.n(b);function x(t,e,a,n,s,r,o){try{var i=t[r](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,s)}function w(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function o(t){x(r,n,s,o,i,"next",t)}function i(t){x(r,n,s,o,i,"throw",t)}o(void 0)}))}}var C={name:"PlantForm",components:{DatePicker:g.a,InlineSpinner:f.a,Dropdown:v.a,Close:m.a,ModalTitle:p.a,ModalFooter:d.a,ModalBody:u.a,ModalHeader:c.a,ModalCard:l.a,Modal:i.a,Required:o.a,Icon:_.a},props:{plot:{required:!1,type:Object},plant:{required:!1,type:Object}},watch:{speciesSearch:function(){this.loadSpecies()},date:function(t){this.form.date=t?y()(t).format("YYYY-MM-DD"):null},"form.species_id":{handler:function(){this.form.errors.clear("species_id")}},"form.plant_type_id":{handler:function(){this.loadSpecies()}}},data:function(){var t=window.avid.last_entry;return{plants:[],saving:!1,date:t?y()(t).toDate():null,form:new r.a({new_measurement:!1,date:window.avid.last_entry,height:"",new_species:!1,new_species_name:"",plant_type_id:"",tag:"",species_id:"",quadrant:""}),loadingPlants:!1,loadingSpecies:!1,species:[],speciesSearch:""}},mounted:function(){var t=this;return w(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadTypes();case 2:t.plant&&t.form.setDefault(t.plant);case 3:case"end":return e.stop()}}),e)})))()},methods:{loadTypes:function(){var t=this;return w(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingPlants=!0,e.prev=1,e.next=4,axios.get("/web/plant-types");case 4:return a=e.sent,n=a.data,t.plants=n,t.form.plant_type_id=n[0].id,e.next=10,t.loadSpecies();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.$alert("Unable to load form. Please try refreshing the page.");case 15:t.loadingPlants=!1;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},loadSpecies:function(){var t=this;return w(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/web/species",{params:{search:t.speciesSearch,plant_type_id:t.form.plant_type_id}});case 3:a=e.sent,n=a.data,t.species=n.data.map((function(t){return{label:t.name,value:t.id}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},save:function(){this.plant?this.update():this.create()},create:function(){var t=this;return w(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.saving=!0,e.prev=1,e.next=4,t.form.post("/web/plots/".concat(t.plot.id,"/plants"));case 4:a=e.sent,n=a.data,t.$emit("create",n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status||t.$notify({text:"Unable to create plant. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 13:t.saving=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},update:function(){var t=this;return w(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.saving=!0,e.prev=1,e.next=4,t.form.put("/web/plants/".concat(t.plant.id));case 4:a=e.sent,n=a.data,t.$emit("update",n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status||t.$notify({text:"Unable to create plant. Please try refreshing the page.",type:"error"}),console.error(e.t0);case 13:t.saving=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}},P=a("KHd+"),k=Object(P.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{on:{close:function(e){return t.$emit("close")}}},[a("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("modal-card",[a("modal-header",[t.plant?t._e():a("modal-title",[t._v("Add A Plant")]),t._v(" "),t.plant?a("modal-title",[t._v("Update Plant #"+t._s(t.plant.tag))]):t._e(),t._v(" "),a("close",{on:{click:function(e){return e.preventDefault(),t.$emit("close")}}})],1),t._v(" "),t.loadingPlants||t.loadingSpecies?a("modal-body",{staticClass:"d-flex justify-content-center align-items-center"},[a("inline-spinner",{staticClass:"text-primary"})],1):t._e(),t._v(" "),t.loadingSpecies||t.loadingPlants?t._e():a("modal-body",{staticClass:"position-static"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"plant"}},[t._v("\n                        Plant Type\n                        "),a("required")],1),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.plant_type_id,expression:"form.plant_type_id"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("plant_type_id")},attrs:{id:"plant",name:"plant_type_id",disabled:t.loadingPlants},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"plant_type_id",e.target.multiple?a:a[0])}}},t._l(t.plants,(function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0),t._v(" "),t.form.errors.has("plant_type_id")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("plant_type_id"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"row position-static"},[a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"tag-num"}},[t._v("\n                            Tag Number\n                            "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tag,expression:"form.tag"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("tag")},attrs:{type:"text",id:"tag-num",name:"plant_type_id",placeholder:"Tag #"},domProps:{value:t.form.tag},on:{input:function(e){e.target.composing||t.$set(t.form,"tag",e.target.value)}}}),t._v(" "),t.form.errors.has("tag")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("tag"))+"\n                        ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group col-6 position-static"},[a("label",{attrs:{for:"quadrant"}},[t._v("\n                            Quadrant\n                            "),a("required")],1),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.quadrant,expression:"form.quadrant"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("quadrant")},attrs:{name:"quadrant",id:"quadrant"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"quadrant",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select a Quadrant")]),t._v(" "),a("option",{attrs:{value:"Northeast"}},[t._v("Northeast")]),t._v(" "),a("option",{attrs:{value:"Northwest"}},[t._v("Northwest")]),t._v(" "),a("option",{attrs:{value:"Southeast"}},[t._v("Southeast")]),t._v(" "),a("option",{attrs:{value:"Southwest"}},[t._v("Southwest")])]),t._v(" "),t.form.errors.has("quadrant")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("quadrant"))+"\n                        ")]):t._e()]),t._v(" "),t.form.new_species?t._e():a("div",{staticClass:"form-group col-6"},[a("label",{attrs:{for:"species"}},[t._v("\n                            Species\n                            "),a("required")],1),t._v(" "),a("dropdown",{staticClass:"mb-1",attrs:{id:"species",autocomplete:!0,lodaing:t.loadingSpecies,options:t.species,error:t.form.errors.has("species_id")},on:{search:function(e){t.speciesSearch=e}},model:{value:t.form.species_id,callback:function(e){t.$set(t.form,"species_id",e)},expression:"form.species_id"}}),t._v(" "),t.form.errors.has("species_id")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("species_id"))+"\n                        ")]):t._e()],1),t._v(" "),t.form.new_species?a("div",{staticClass:"form-group col-6 flex-column"},[a("label",{attrs:{for:"new-species"}},[t._v("\n                            Species\n                            "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.new_species_name,expression:"form.new_species_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("new_species_name")},attrs:{type:"text",id:"new-species",name:"new-species",placeholder:"Species Name"},domProps:{value:t.form.new_species_name},on:{input:function(e){e.target.composing||t.$set(t.form,"new_species_name",e.target.value)}}}),t._v(" "),t.form.errors.has("new_species_name")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("new_species_name"))+"\n                        ")]):t._e()]):t._e(),t._v(" "),t.form.new_species?a("button",{staticClass:"btn btn-link mt-auto mb-3 ml-3",on:{click:function(e){e.preventDefault(),t.form.new_species=!1}}},[a("span",[t._v("\n                                Cancel Species Creation\n                            ")])]):t._e()]),t._v(" "),t.form.new_species?t._e():a("p",{staticClass:"text-muted"},[t._v("\n                    If you cannot find the species from the dropdown,\n                    "),a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.form.new_species=!0}}},[t._v(" you can click here to create a new one.")])]),t._v(" "),this.plant||t.form.new_measurement?t._e():a("button",{staticClass:"btn btn-link",on:{click:function(e){e.preventDefault(),t.form.new_measurement=!0}}},[a("icon",{attrs:{name:"add"}}),t._v(" "),a("span",[t._v("Add a Measurement")])],1),t._v(" "),!this.plant&&t.form.new_measurement?a("div",{staticClass:"row position-static"},[a("div",{staticClass:"form-group col-lg-6 position-static"},[a("label",[t._v("\n                            Date\n                            "),a("required")],1),t._v(" "),a("date-picker",{attrs:{color:"green","max-date":new Date,"input-props":{class:"form-control"+(t.form.errors.has("date")?" is-invalid":""),placeholder:"Collection Date"}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),t.form.errors.has("date")?a("p",{staticClass:"mb-0 form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("date"))+"\n                        ")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"height"}},[t._v("\n                            Height (inches)\n                            "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group input-appended"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.height,expression:"form.height"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("height")},attrs:{id:"height",type:"text",placeholder:"Height"},domProps:{value:t.form.height},on:{input:function(e){e.target.composing||t.$set(t.form,"height",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[t._v("in.")])])]),t._v(" "),t.form.errors.has("height")?a("p",{staticClass:"mb-0 form-text text-danger"},[t._v("\n                            "+t._s(t.form.errors.first("height"))+"\n                        ")]):t._e()])]):t._e(),t._v(" "),t.form.new_measurement?a("button",{staticClass:"btn btn-link",on:{click:function(e){e.preventDefault(),t.form.new_measurement=!1}}},[a("span",[t._v("Cancel Measurement Creation")])]):t._e()]),t._v(" "),a("modal-footer",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.saving}},[t.saving?a("inline-spinner"):t._e(),t._v("\n                    Save\n                ")],1),t._v(" "),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n                    Cancel\n                ")])])],1)],1)])}),[],!1,null,"38b197b5",null);e.a=k.exports},Ioex:function(t,e,a){"use strict";a.r(e);var n={name:"Plots",components:{PlotsDataView:a("0XfU").a}},s=a("KHd+"),r=Object(s.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("plots-data-view")],1)}),[],!1,null,"40b8bcd3",null);e.default=r.exports},Ol2u:function(t,e,a){"use strict";e.a={seasons:["0","1 to 2","Greater than or equal to 3"],percentages:["0-9%","10-19%","20-29%","30-39%","40-49%","50-59%","60-69%","70-79%","80-89%","90-100%"],hours:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],minutes:["00","05","10","15","20","25","30","35","40","45","50","55"],timezones:["EST","CST","MST","PST"],wmus:["1A","1C","2A","3A","3C","3F","3G","3H","3J","3K","3M","3N","3P","3R","3S","4A","4B","4C","4F","4G","4H","4J","4K","4L","4O","4P","4R","4S","4T","4U","4W","4Y","4Z","5A","5C","5F","5G","5H","5J","5R","5S","5T","6A","6C","6F","6G","6H","6J","6K","6N","6P","6R","6S","7A","7F","7H","7J","7M","7P","7R","7S","8A","8C","8F","8G","8H","8J","8M","8N","8P","8R","8S","8T","8W","8X","8Y","9A","9C","9F","9G","9H","9J","9K","9M","9N","9P","9R"," 9S","9T","9W","9X","9Y"]}},Pm5W:function(t,e,a){"use strict";var n={name:"Tabs",components:{Icon:a("cv7c").a},props:{history:{required:!1,type:Boolean,default:!0}},data:function(){return{tabs:[]}},mounted:function(){var t=this;this.tabs=this.$children.filter((function(t){return"tab"===t.$options._componentTag})).map((function(t){return t})),this.history&&this.tabs.forEach((function(e){t.$route.hash===e.href&&t.selectTab(e)}))},methods:{selectTab:function(t,e){t&&!this.history&&t.preventDefault(),this.tabs.forEach((function(t){t&&e&&(t.isActive=t.name===e.name)}))}}},s=a("KHd+"),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"nav nav-custom-tabs align-items-center"},[t._l(t.tabs,(function(e){return a("a",{class:["nav-link",{active:e.isActive}],attrs:{href:e.href},on:{click:function(a){return t.selectTab(a,e)}}},[e.icon?a("icon",{attrs:{name:e.icon}}):t._e(),t._v(" "),a("span",[t._v(t._s(e.name))])],1)})),t._v(" "),t._t("right")],2),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.a=r.exports},cQaf:function(t,e,a){"use strict";var n={name:"Tab",props:{name:{required:!0,type:String},selected:{default:!1,type:Boolean},icon:{required:!1,type:String,default:null}},watch:{isActive:function(t){t&&this.$emit("mount")}},data:function(){return{isActive:!1}},mounted:function(){this.isActive=this.selected},computed:{href:function(){return"#"+this.name.toLowerCase().replace(/ /g,"-").replace(/#/g,"")}}},s=a("KHd+"),r=Object(s.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return this.isActive?e("div",[this._t("default")],2):this._e()}),[],!1,null,null,null);e.a=r.exports},gdrP:function(t,e,a){"use strict";var n=a("o0o1"),s=a.n(n),r=a("klO2"),o=a("JUFj"),i=a("wXy6"),l=a("1MU1"),c=a("mS+z"),u=a("vQtE"),d=a("yoRh"),p=a("ke3Z"),m=a("MEn4"),v=a("cv7c"),f=a("Ol2u"),_=a("TTxJ");function h(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,n;return e=t,n=[{key:"load",value:function(e){return(new t).loadMap(e)}}],(a=[{key:"loadMap",value:function(t){if(window.google&&window.google.maps)t();else{var e=document.createElement("script"),a=window.avid.keys.maps;e.async=!0,e.defer=!0,e.type="text/javascript",e.onload=t,e.src="https://maps.googleapis.com/maps/api/js?key=".concat(a),document.head.appendChild(e)}}}])&&h(e.prototype,a),n&&h(e,n),t}(),b={name:"ClickableMap",props:{value:{required:!1,type:Object,default:function(){return{latitude:40.354388,longitude:-95.998237}}}},mounted:function(){var t=this,e={latitude:40.354388,longitude:-95.998237};this.value.latitude&&this.value.longitude&&(e=this.value),g.load((function(){var a=new google.maps.LatLng(e.latitude,e.longitude);t.map=new google.maps.Map(t.$refs.map,{zoom:4,center:a}),t.map.addListener("click",t.selectLocation)})),this.value.latitude&&this.value.longitude&&(this.marker=new google.maps.Marker({map:this.map,position:new google.maps.LatLng(e.latitude,e.longitude)}))},data:function(){return{pos:{latitude:40.354388,longitude:-95.998237},map:null,marker:null}},watch:{"value.latitude":{handler:function(){this.setMarkerPosition(),this.panTo()}},"value.longitude":{handler:function(){this.setMarkerPosition(),this.panTo()}}},methods:{selectLocation:function(t){var e=t.latLng;this.$emit("input",{latitude:e.lat(),longitude:e.lng()})},setMarkerPosition:function(){var t=this.value,e=this.marker&&this.marker.getPosition();if(e){var a=e.lng(),n=e.lng();t.latitude===a&&t.longitude===n||this.marker.setPosition(new google.maps.LatLng(t.latitude,t.longitude))}else this.marker=new google.maps.Marker({map:this.map,position:new google.maps.LatLng(t.latitude,t.longitude)})},panTo:function(){var t=this.value;t.latitude&&t.longitude&&this.map.panTo(new google.maps.LatLng(t.latitude,t.longitude))}}},y=a("KHd+");function x(t,e,a,n,s,r,o){try{var i=t[r](o),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(n,s)}function w(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function o(t){x(r,n,s,o,i,"next",t)}function i(t){x(r,n,s,o,i,"throw",t)}o(void 0)}))}}var C={name:"PlotForm",components:{ClickableMap:Object(y.a)(b,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"map",staticStyle:{height:"100px"}})}),[],!1,null,"098d25d8",null).exports,InlineSpinner:_.a,Icon:v.a,Required:m.a,Close:d.a,ModalTitle:u.a,ModalFooter:c.a,ModalBody:l.a,ModalHeader:i.a,ModalCard:o.a,Modal:r.a},props:{site:{required:!1},plot:{required:!1,type:Object,default:null}},data:function(){return{loading:!1,form:new p.a({number:"",latitude:null,longitude:null,basal_area:"",ground_cover:"",subcanopy:"",canopy:"",is_protected:"",protection_seasons:"",recorders:""}),options:f.a,showMap:!1}},mounted:function(){this.plot&&this.form.setDefault(this.plot)},methods:{submit:function(){this.plot?this.update():this.create()},create:function(){var t=this;return w(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.form.post("/web/sites/".concat(t.site.id,"/plots"));case 4:a=e.sent,n=a.data,t.$notify({type:"success",text:"Plot created successfully"}),t.$emit("create",n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status||(t.$notify({type:"error",text:"Unable to process the request. Please try refreshing the page."}),console.error(e.t0));case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},update:function(){var t=this;return w(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.form.put("/web/plots/".concat(t.plot.id));case 4:a=e.sent,n=a.data,t.$notify({type:"success",text:"Plot updated successfully"}),t.$emit("update",n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response&&422===e.t0.response.status||(t.$notify({type:"error",text:"Unable to process the request. Please try refreshing the page."}),console.error(e.t0));case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},setGpsFromMap:function(t){this.form.latitude=t.latitude,this.form.longitude=t.longitude}}},P=Object(y.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{medium:""},on:{close:function(e){return t.$emit("close")}}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()},keydown:function(e){e.target&&t.form.errors.clear(e.target.name)}}},[a("modal-card",[a("modal-header",[t.plot?a("modal-title",[t._v('Edit "Plot '+t._s(t.plot.number)+'"')]):a("modal-title",[t._v("New Plot")]),t._v(" "),a("close",{on:{click:function(e){return t.$emit("close")}}})],1),t._v(" "),a("modal-body",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"number"}},[t._v("\n                        Plot Number\n                        "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.number,expression:"form.number"}],class:["form-control",{"is-invalid":t.form.errors.has("number")}],attrs:{type:"text",name:"number",id:"number",placeholder:"E,g. 36"},domProps:{value:t.form.number},on:{input:function(e){e.target.composing||t.$set(t.form,"number",e.target.value)}}}),t._v(" "),t.form.errors.has("number")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("number"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-5"},[a("div",{staticClass:"d-flex align-items-center mb-1"},[a("div",[a("p",{staticClass:"mb-0"},[a("strong",[t._v("GPS Location")])]),t._v(" "),a("div",{staticClass:"mb-0"},[a("small",{staticClass:"text-muted"},[t._v("You may use the map to visually select the location.")])])])]),t._v(" "),a("div",{staticClass:"mb-2 form-group"},[a("label",{attrs:{for:"latitude"}},[t._v("\n                                Latitude\n                                "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.latitude,expression:"form.latitude"}],class:["form-control",{"is-invalid":t.form.errors.has("latitude")}],attrs:{type:"text",name:"latitude",id:"latitude",placeholder:"E,g. -36.898723"},domProps:{value:t.form.latitude},on:{input:function(e){e.target.composing||t.$set(t.form,"latitude",e.target.value)}}}),t._v(" "),t.form.errors.has("latitude")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                                "+t._s(t.form.errors.first("latitude"))+"\n                            ")]):t._e()]),t._v(" "),a("div",{staticClass:"mb-0 form-group"},[a("label",{attrs:{for:"longitude"}},[t._v("\n                                Longitude\n                                "),a("required")],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.longitude,expression:"form.longitude"}],class:["form-control",{"is-invalid":t.form.errors.has("longitude")}],attrs:{type:"text",name:"longitude",id:"longitude",placeholder:"E,g. -36.898723"},domProps:{value:t.form.longitude},on:{input:function(e){e.target.composing||t.$set(t.form,"longitude",e.target.value)}}}),t._v(" "),t.form.errors.has("longitude")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                                "+t._s(t.form.errors.first("longitude"))+"\n                            ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("small",{staticClass:"text-muted"},[t._v("When entering coordinates manually, please verify the location on the map")])])]),t._v(" "),a("div",{staticClass:"col-7"},[a("clickable-map",{staticClass:"map-height map-mini mb-3",attrs:{value:{latitude:t.form.latitude,longitude:t.form.longitude}},on:{input:function(e){return t.setGpsFromMap(e)}}})],1)]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"ground_cover"}},[t._v("\n                        Ground and Shrub Cover\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.ground_cover,expression:"form.ground_cover"}],class:["form-control",{"is-invalid":t.form.errors.has("ground_cover")}],attrs:{type:"text",name:"ground_cover",id:"ground_cover"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"ground_cover",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),t._l(t.options.percentages,(function(e){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2)]),t._v(" "),t.form.errors.has("ground_cover")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("ground_cover"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"subcanopy"}},[t._v("\n                        Subcanopy\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.subcanopy,expression:"form.subcanopy"}],class:["form-control",{"is-invalid":t.form.errors.has("subcanopy")}],attrs:{type:"text",name:"subcanopy",id:"subcanopy"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"subcanopy",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),t._l(t.options.percentages,(function(e){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2)]),t._v(" "),t.form.errors.has("subcanopy")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("subcanopy"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"canopy"}},[t._v("\n                        Canopy\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.canopy,expression:"form.canopy"}],class:["form-control",{"is-invalid":t.form.errors.has("canopy")}],attrs:{type:"text",name:"canopy",id:"canopy"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"canopy",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),t._l(t.options.percentages,(function(e){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2)]),t._v(" "),t.form.errors.has("canopy")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("canopy"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"is_protected"}},[t._v("\n                        Is plot enclosed or protected from deer?\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.is_protected,expression:"form.is_protected"}],class:["form-control",{"is-invalid":t.form.errors.has("is_protected")}],attrs:{type:"text",name:"is_protected",id:"is_protected"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"is_protected",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Yes")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("No")])])]),t._v(" "),t.form.errors.has("is_protected")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("is_protected"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"protection_seasons"}},[t._v("\n                        If yes, for how many growing seasons?\n                        "),a("required")],1),t._v(" "),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.protection_seasons,expression:"form.protection_seasons"}],class:["form-control",{"is-invalid":t.form.errors.has("protection_seasons")}],attrs:{type:"text",name:"protection_seasons",id:"protection_seasons"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"protection_seasons",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Option")]),t._v(" "),t._l(t.options.seasons,(function(e){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2)]),t._v(" "),t.form.errors.has("protection_seasons")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("protection_seasons"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"recorders"}},[t._v("Recorders")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.recorders,expression:"form.recorders"}],staticClass:"form-control",attrs:{type:"text",name:"recorders",id:"recorders",placeholder:"Type recorders"},domProps:{value:t.form.recorders},on:{input:function(e){e.target.composing||t.$set(t.form,"recorders",e.target.value)}}}),t._v(" "),t.form.errors.has("owner_contact")?a("span",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("owner_contact"))+"\n                    ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"basal_area"}},[t._v("\n                        Basal Area\n                    ")]),t._v(" "),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.basal_area,expression:"form.basal_area"}],class:["form-control",{"is-invalid":t.form.errors.has("basal_area")}],attrs:{type:"text",name:"basal_area",id:"basal_area",placeholder:"E,g. 36"},domProps:{value:t.form.basal_area},on:{input:function(e){e.target.composing||t.$set(t.form,"basal_area",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[t._v("\n                                ft"),a("sup",[t._v("2")]),t._v("/ac\n                            ")])])]),t._v(" "),t.form.errors.has("basal_area")?a("small",{staticClass:"form-text text-danger"},[t._v("\n                        "+t._s(t.form.errors.first("basal_area"))+"\n                    ")]):t._e()])]),t._v(" "),a("modal-footer",{staticClass:"d-flex"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.loading}},[t.loading?a("inline-spinner"):t._e(),t._v("\n                    Save\n                ")],1),t._v(" "),a("button",{staticClass:"btn btn-light ml-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("Close")])])],1)],1)])}),[],!1,null,"4021509e",null);e.a=P.exports},yJCx:function(t,e,a){"use strict";var n={name:"Pager",props:{lastPage:{required:!0,type:Number},page:{required:!0,type:Number}},methods:{previous:function(){1!==this.page&&this.$emit("change",this.page-1)},next:function(){this.lastPage!==this.page&&this.$emit("change",this.page+1)},change:function(t){this.page!==t&&this.$emit("change",t)}}},s=a("KHd+"),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.lastPage>1?a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination justify-content-center mb-0"},[a("li",{class:["page-item",{disabled:1===t.page}]},[a("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1","aria-disabled":1===t.page?"true":"false"},on:{click:function(e){return e.preventDefault(),t.previous()}}},[t._v("Previous")])]),t._v(" "),t._l(t.lastPage,(function(e){return a("li",{class:["page-item",{active:t.page===e}]},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.change(e)}}},[t._v(t._s(e))])])})),t._v(" "),a("li",{class:["page-item",{disabled:t.lastPage===t.page}]},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-disabled":t.lastPage===t.page?"true":"false"},on:{click:function(e){return e.preventDefault(),t.next()}}},[t._v("Next")])])],2)]):t._e()}),[],!1,null,"d369b0ee",null);e.a=r.exports}}]);